var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function h(){return u(" ")}function f(){return u("")}function p(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e){return function(t){return t.preventDefault(),e.call(this,t)}}function g(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function w(e){return function(t){t.target===this&&e.call(this,t)}}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e){return""===e?null:+e}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function E(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function x(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}function k(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let T,S;function A(){if(void 0===T){T=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){T=!0}}return T}function C(e){S=e}function N(){const e=function(){if(!S)throw new Error("Function called outside component initialization");return S}();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const a=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}(t,n,{cancelable:r});return i.slice().forEach((t=>{t.call(e,a)})),!a.defaultPrevented}return!0}}function I(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const M=[],z=[],D=[],R=[],U=Promise.resolve();let O=!1;function $(e){D.push(e)}function P(e){R.push(e)}const F=new Set;let L=0;function V(){if(0!==L)return;const e=S;do{try{for(;L<M.length;){const e=M[L];L++,C(e),B(e.$$)}}catch(e){throw M.length=0,L=0,e}for(C(null),M.length=0,L=0;z.length;)z.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];F.has(t)||(F.add(t),t())}D.length=0}while(M.length);for(;R.length;)R.pop()();O=!1,F.clear(),C(e)}function B(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach($)}}const H=new Set;let j;function Z(){j={r:0,c:[],p:j}}function q(){j.r||r(j.c),j=j.p}function G(e,t){e&&e.i&&(H.delete(e),e.i(t))}function Y(e,t,n,r){if(e&&e.o){if(H.has(e))return;H.add(e),j.c.push((()=>{H.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const K="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function W(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Q(e){e&&e.c()}function X(e,n,a,o){const{fragment:s,after_update:l}=e.$$;s&&s.m(n,a),o||$((()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]})),l.forEach($)}function J(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ee(e,t){-1===e.$$.dirty[0]&&(M.push(e),O||(O=!0,U.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function te(t,i,a,o,s,c,d,u=[-1]){const h=S;C(t);const f=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||h.$$.root};d&&d(f.root);let p=!1;if(f.ctx=a?a(t,i.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&ee(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!o&&o(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(l)}else f.fragment&&f.fragment.c();i.intro&&G(t.$$.fragment),X(t,i.target,i.anchor,i.customElement),V()}C(h)}class ne{$destroy(){J(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var re=Object.defineProperty,ie=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ce=Math.pow,de=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ue=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&de(e,n,t[n]);if(oe)for(var n of oe(t))le.call(t,n)&&de(e,n,t[n]);return e},he=(e,t)=>ie(e,ae(t)),fe=(e,t)=>{var n={};for(var r in e)se.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&oe)for(var r of oe(e))t.indexOf(r)<0&&le.call(e,r)&&(n[r]=e[r]);return n},pe=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},o=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);s((n=n.apply(e,t)).next())}));const me="p".charCodeAt(0),ge="H".charCodeAt(0),we="Y".charCodeAt(0),be="s".charCodeAt(0);let _e;function ye(e){let t=-1;_e||(_e=function(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}());for(let n=0;n<e.length;n++)t=_e[255&(t^e[n])]^t>>>8;return-1^t}function ve(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=me,r[1]=ge,r[2]=we,r[3]=be,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=255&t,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const i=ye(r),a=new Uint8Array(4);if(a[0]=i>>>24,a[1]=i>>>16,a[2]=i>>>8,a[3]=255&i,n){const t=function(e){for(let t=e.length-1;t>=4;t--)if(9===e[t-4]&&e[t-3]===me&&e[t-2]===ge&&e[t-1]===we&&e[t]===be)return t-3;return 0}(e);return e.set(r,t),e.set(a,t+13),e}{const t=new Uint8Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=9;const n=new Uint8Array(54);return n.set(e,0),n.set(t,33),n.set(r,37),n.set(a,50),n}}const Ee="[modern-screenshot]",xe="undefined"!=typeof window,ke=xe&&"Worker"in window,Te=xe&&"atob"in window;var Se;const Ae=xe?null==(Se=window.navigator)?void 0:Se.userAgent:"",Ce=Ae.includes("Chrome"),Ne=Ae.includes("AppleWebKit")&&!Ce,Ie=Ae.includes("Firefox"),Me=e=>e&&"__CONTEXT__"in e,ze=e=>"CSSFontFaceRule"===e.constructor.name,De=e=>"CSSImportRule"===e.constructor.name,Re=e=>1===e.nodeType,Ue=e=>"object"==typeof e.className,Oe=e=>"image"===e.tagName,$e=e=>"use"===e.tagName,Pe=e=>Re(e)&&void 0!==e.style&&!Ue(e),Fe=e=>8===e.nodeType,Le=e=>3===e.nodeType,Ve=e=>"IMG"===e.tagName,Be=e=>"VIDEO"===e.tagName,He=e=>"CANVAS"===e.tagName,je=e=>"TEXTAREA"===e.tagName,Ze=e=>"INPUT"===e.tagName,qe=e=>"STYLE"===e.tagName,Ge=e=>"SCRIPT"===e.tagName,Ye=e=>"SELECT"===e.tagName,Ke=e=>"SLOT"===e.tagName,We=e=>"IFRAME"===e.tagName,Qe=(...e)=>console.warn(Ee,...e),Xe=e=>console.time(`${Ee} ${e}`),Je=e=>console.timeEnd(`${Ee} ${e}`),et=e=>{var t;const n=null==(t=null==e?void 0:e.createElement)?void 0:t.call(e,"canvas");return n&&(n.height=n.width=1),n&&"toDataURL"in n&&Boolean(n.toDataURL("image/webp").includes("image/webp"))},tt=e=>e.startsWith("data:");function nt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(xe&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!xe)return e;const n=rt().implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}function rt(e){var t;return null!=(t=e&&Re(e)?null==e?void 0:e.ownerDocument:e)?t:window.document}const it="http://www.w3.org/2000/svg";function at(e,t="image/png",n=1){return pe(this,null,(function*(){try{return yield new Promise(((r,i)=>{e.toBlob((e=>{e?r(e):i(new Error("Blob is null"))}),t,n)}))}catch(r){if(Te)return Qe("Failed canvas to blob",{type:t,quality:n},r),function(e){var t,n;const[r,i]=e.split(","),a=null!=(n=null==(t=r.match(/data:(.+);/))?void 0:t[1])?n:void 0,o=window.atob(i),s=o.length,l=new Uint8Array(s);for(let e=0;e<s;e+=1)l[e]=o.charCodeAt(e);return new Blob([l],{type:a})}(e.toDataURL(t,n));throw r}}))}function ot(e,t){return new Promise(((n,r)=>{const i=new FileReader;i.onload=()=>n(i.result),i.onerror=()=>r(i.error),i.onabort=()=>r(new Error(`Failed read blob to ${t}`)),"dataUrl"===t?i.readAsDataURL(e):"arrayBuffer"===t&&i.readAsArrayBuffer(e)}))}const st=e=>ot(e,"dataUrl"),lt=e=>ot(e,"arrayBuffer");function ct(e,t){const n=rt(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function dt(e,t){return new Promise((n=>{const{timeout:r,ownerDocument:i,onError:a}=null!=t?t:{},o="string"==typeof e?ct(e,rt(i)):e;let s=null,l=null;function c(){n(o),s&&clearTimeout(s),null==l||l()}if(r&&(s=setTimeout(c,r)),Be(o)){const e=o.currentSrc||o.src;if(!e)return o.poster?dt(o.poster,t).then(n):c();if(o.readyState>=2)return c();const r=c,i=t=>{Qe("Failed video load",e,t),null==a||a(t),c()};l=()=>{o.removeEventListener("loadeddata",r),o.removeEventListener("error",i)},o.addEventListener("loadeddata",r,{once:!0}),o.addEventListener("error",i,{once:!0})}else{const e=Oe(o)?o.href.baseVal:o.currentSrc||o.src;if(!e)return c();const t=()=>pe(this,null,(function*(){if(Ve(o)&&"decode"in o)try{yield o.decode()}catch(t){Qe("Failed to decode image, trying to render anyway",o.dataset.originalSrc||e,t)}c()})),n=t=>{Qe("Failed image load",o.dataset.originalSrc||e,t),c()};if(Ve(o)&&o.complete)return t();l=()=>{o.removeEventListener("load",t),o.removeEventListener("error",n)},o.addEventListener("load",t,{once:!0}),o.addEventListener("error",n,{once:!0})}}))}const ut=function(){let e=0;return()=>(e+=1,`u${`0000${(Math.random()*ce(36,4)<<0).toString(36)}`.slice(-4)}${e}`)}();function ht(e){return null==e?void 0:e.split(",").map((e=>e.trim().replace(/"|'/g,"").toLowerCase())).filter(Boolean)}function ft(e){return{time:t=>e&&Xe(t),timeEnd:t=>e&&Je(t),warn:(...t)=>e&&Qe(...t)}}function pt(e){return{cache:e?"no-cache":"force-cache"}}function mt(e,t){return pe(this,null,(function*(){return Me(e)?e:function(e,t){return pe(this,null,(function*(){var n,r,i,a,o;const{scale:s=1,workerUrl:l,workerNumber:c=1}=t||{},d=Boolean(null==t?void 0:t.debug),u=null==(n=null==t?void 0:t.features)||n,h=null!=(r=e.ownerDocument)?r:xe?window.document:void 0,f=null!=(a=null==(i=e.ownerDocument)?void 0:i.defaultView)?a:xe?window:void 0,p=new Map,m=he(ue({width:0,height:0,quality:1,type:"image/png",scale:s,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:d,fetch:ue({requestInit:pt(null==(o=null==t?void 0:t.fetch)?void 0:o.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},null==t?void 0:t.fetch),fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:c,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1},t),{__CONTEXT__:!0,log:ft(d),node:e,ownerDocument:h,ownerWindow:f,dpi:1===s?null:96*s,svgStyleElement:gt(h),svgDefsElement:null==h?void 0:h.createElementNS(it,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...new Array(ke&&l&&c?c:0)].map((()=>{try{const e=new Worker(l);return e.onmessage=e=>pe(this,null,(function*(){var t,n,r,i;const{url:a,result:o}=e.data;o?null==(n=null==(t=p.get(a))?void 0:t.resolve)||n.call(t,o):null==(i=null==(r=p.get(a))?void 0:r.reject)||i.call(r,new Error(`Error receiving message from worker: ${a}`))})),e.onmessageerror=e=>{var t,n;const{url:r}=e.data;null==(n=null==(t=p.get(r))?void 0:t.reject)||n.call(t,new Error(`Error receiving message from worker: ${r}`))},e}catch(e){return Qe("Failed to new Worker",e),null}})).filter(Boolean),fontFamilies:new Set,fontCssTexts:new Map,acceptOfImage:`${[et(h)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:p,drawImageCount:0,tasks:[],features:u,isEnable:e=>{var t,n;return"restoreScrollPosition"===e?"boolean"!=typeof u&&(null!=(t=u[e])&&t):"boolean"==typeof u?u:null==(n=u[e])||n}});m.log.time("wait until load"),yield function(e,t){return pe(this,null,(function*(){Pe(e)&&(Ve(e)||Be(e)?yield dt(e,{timeout:t}):yield Promise.all(["img","video"].flatMap((n=>Array.from(e.querySelectorAll(n)).map((e=>dt(e,{timeout:t})))))))}))}(e,m.timeout),m.log.timeEnd("wait until load");const{width:g,height:w}=function(e,t){let{width:n,height:r}=t;if(Re(e)&&(!n||!r)){const t=e.getBoundingClientRect();n=n||t.width||Number(e.getAttribute("width"))||0,r=r||t.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}(e,m);return m.width=g,m.height=w,m}))}(e,he(ue({},t),{autoDestruct:!0}))}))}function gt(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode("\n.______background-clip--text {\n  background-clip: text;\n  -webkit-background-clip: text;\n}\n");return t.appendChild(n),t}function wt(e,t){return pe(this,null,(function*(){const{log:n,timeout:r,drawImageCount:i,drawImageInterval:a}=t;n.time("image to canvas");const o=yield dt(e,{timeout:r}),{canvas:s,context2d:l}=function(e,t){const{width:n,height:r,scale:i,backgroundColor:a,maximumCanvasSize:o}=t,s=e.createElement("canvas");s.width=Math.floor(n*i),s.height=Math.floor(r*i),s.style.width=`${n}px`,s.style.height=`${r}px`,o&&(s.width>o||s.height>o)&&(s.width>o&&s.height>o?s.width>s.height?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o):s.width>o?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o));const l=s.getContext("2d");return l&&a&&(l.fillStyle=a,l.fillRect(0,0,s.width,s.height)),{canvas:s,context2d:l}}(e.ownerDocument,t),c=()=>{try{null==l||l.drawImage(o,0,0,s.width,s.height)}catch(e){Qe("Failed to drawImage",e)}};if(c(),t.isEnable("fixSvgXmlDecode"))for(let e=0;e<i;e++)yield new Promise((t=>{setTimeout((()=>{c(),t()}),e+a)}));return t.drawImageCount=0,n.timeEnd("image to canvas"),s}))}const bt=["width","height","-webkit-text-fill-color"],_t=["stroke","fill"];function yt(e,t,n){var r;const{defaultComputedStyles:i,ownerDocument:a}=n,o=e.nodeName.toLowerCase(),s=Ue(e)&&"svg"!==o,l=s?_t.map((t=>[t,e.getAttribute(t)])).filter((([,e])=>null!==e)):[],c=[s&&"svg",o,l.map(((e,t)=>`${e}=${t}`)).join(","),t].filter(Boolean).join(":");if(i.has(c))return i.get(c);let d=n.sandbox;if(!d)try{a&&(d=a.createElement("iframe"),d.id=`__SANDBOX__-${ut()}`,d.width="0",d.height="0",d.style.visibility="hidden",d.style.position="fixed",a.body.appendChild(d),null==(r=d.contentWindow)||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),n.sandbox=d)}catch(e){Qe("Failed to create iframe sandbox",e)}if(!d)return new Map;const u=d.contentWindow;if(!u)return new Map;const h=u.document;let f,p;s?(f=h.createElementNS(it,"svg"),p=f.ownerDocument.createElementNS(f.namespaceURI,o),l.forEach((([e,t])=>{p.setAttributeNS(null,e,t)})),f.appendChild(p)):f=p=h.createElement(o),p.textContent=" ",h.body.appendChild(f);const m=u.getComputedStyle(p,t),g=new Map;for(let e=m.length,t=0;t<e;t++){const e=m.item(t);bt.includes(e)||g.set(e,m.getPropertyValue(e))}return h.body.removeChild(f),i.set(c,g),g}function vt(e,t,n){var r;const i=new Map,a=[],o=new Map;if(n)for(const e of n)s(e);else for(let t=e.length,n=0;n<t;n++){s(e.item(n))}for(let e=a.length,t=0;t<e;t++)null==(r=o.get(a[t]))||r.forEach(((e,t)=>i.set(t,e)));function s(n){const r=e.getPropertyValue(n),s=e.getPropertyPriority(n),l=n.lastIndexOf("-"),c=l>-1?n.substring(0,l):void 0;if(c){let e=o.get(c);e||(e=new Map,o.set(c,e)),e.set(n,[r,s])}t.get(n)===r&&!s||(c?a.push(c):i.set(n,[r,s]))}return i}const Et=[":before",":after"],xt=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function kt(e){if(e.ownerDocument)try{const t=e.toDataURL();if("data:,"!==t)return ct(t,e.ownerDocument)}catch(e){}const t=e.cloneNode(!1),n=e.getContext("2d"),r=t.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(e){Qe("Failed to clone canvas",e)}return t}function Tt(e,t){return He(e)?kt(e):We(e)?function(e,t){var n;try{if(null!=(n=null==e?void 0:e.contentDocument)&&n.body)return It(e.contentDocument.body,t)}catch(e){Qe("Failed to clone iframe",e)}return e.cloneNode(!1)}(e,t):Ve(e)?function(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager"),t}(e):Be(e)?function(e){return pe(this,null,(function*(){if(e.ownerDocument&&!e.currentSrc&&e.poster)return ct(e.poster,e.ownerDocument);const t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);const n=t.ownerDocument;if(n){let r=!0;if(yield dt(t,{onError:()=>r=!1}),!r)return e.poster?ct(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,yield new Promise((e=>{t.addEventListener("seeked",e,{once:!0})}));const i=n.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;try{const e=i.getContext("2d");e&&e.drawImage(t,0,0,i.width,i.height)}catch(n){return Qe("Failed to clone video",n),e.poster?ct(e.poster,e.ownerDocument):t}return kt(i)}return t}))}(e):e.cloneNode(!1)}const St=new Set(["symbol"]);function At(e,t,n,r){return pe(this,null,(function*(){if(Re(n)&&(qe(n)||Ge(n))||r.filter&&!r.filter(n))return;St.has(t.nodeName)||St.has(n.nodeName)?r.currentParentNodeStyle=void 0:r.currentParentNodeStyle=r.currentNodeStyle;const i=yield It(n,r);r.isEnable("restoreScrollPosition")&&function(e,t){if(!Pe(e)||!Pe(t))return;const{scrollTop:n,scrollLeft:r}=e;if(!n&&!r)return;const{transform:i}=t.style,a=new DOMMatrix(i),{a:o,b:s,c:l,d:c}=a;a.a=1,a.b=0,a.c=0,a.d=1,a.translateSelf(-r,-n),a.a=o,a.b=s,a.c=l,a.d=c,t.style.transform=a.toString()}(e,i),t.appendChild(i)}))}function Ct(e,t,n){return pe(this,null,(function*(){var r,i;for(let a=null!=(i=Re(e)?null==(r=e.shadowRoot)?void 0:r.firstChild:void 0)?i:e.firstChild;a;a=a.nextSibling)if(!Fe(a))if(Re(a)&&Ke(a)&&"function"==typeof a.assignedNodes){const r=a.assignedNodes();for(let i=0;i<r.length;i++)yield At(e,t,r[i],n)}else yield At(e,t,a,n)}))}const Nt=/^[\w-:]+$/;function It(e,t,n=!1){return pe(this,null,(function*(){var r,i,a,o;const{ownerDocument:s,ownerWindow:l,fontFamilies:c}=t;if(s&&Le(e))return s.createTextNode(e.data);if(s&&l&&Re(e)&&(Pe(e)||Ue(e))){const s=yield Tt(e,t);if(t.isEnable("removeAbnormalAttributes")){const e=s.getAttributeNames();for(let t=e.length,n=0;n<t;n++){const t=e[n];Nt.test(t)||s.removeAttribute(t)}}const l=t.currentNodeStyle=function(e,t,n,r){var i,a,o,s;const{ownerWindow:l,includeStyleProperties:c,currentParentNodeStyle:d}=r,u=t.style,h=l.getComputedStyle(e),f=yt(e,null,r);null==d||d.forEach(((e,t)=>{f.delete(t)}));const p=vt(h,f,c);return p.delete("transition-property"),p.delete("all"),p.delete("d"),p.delete("content"),n&&(p.delete("margin-top"),p.delete("margin-right"),p.delete("margin-bottom"),p.delete("margin-left"),p.delete("margin-block-start"),p.delete("margin-block-end"),p.delete("margin-inline-start"),p.delete("margin-inline-end"),p.set("box-sizing",["border-box",""])),"text"===(null==(i=p.get("background-clip"))?void 0:i[0])&&t.classList.add("______background-clip--text"),Ce&&(p.has("font-kerning")||p.set("font-kerning",["normal",""]),("hidden"===(null==(a=p.get("overflow-x"))?void 0:a[0])||"hidden"===(null==(o=p.get("overflow-y"))?void 0:o[0]))&&"ellipsis"===(null==(s=p.get("text-overflow"))?void 0:s[0])&&e.scrollWidth===e.clientWidth&&p.set("text-overflow",["clip",""])),p.forEach((([e,t],n)=>{u.setProperty(n,e,t)})),p}(e,s,n,t);n&&function(e,t){const{backgroundColor:n,width:r,height:i,style:a}=t,o=e.style;if(n&&o.setProperty("background-color",n,"important"),r&&o.setProperty("width",`${r}px`,"important"),i&&o.setProperty("height",`${i}px`,"important"),a)for(const e in a)o[e]=a[e]}(s,t);let d=!1;if(t.isEnable("copyScrollbar")){const t=[null==(r=l.get("overflow-x"))?void 0:r[0],null==(i=l.get("overflow-y"))?void 0:i[1]];d=t.includes("scroll")||(t.includes("auto")||t.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}return function(e,t,n,r){const{ownerWindow:i,svgStyleElement:a,svgStyles:o,currentNodeStyle:s}=r;function l(n){var a;const l=i.getComputedStyle(e,n);let c=l.getPropertyValue("content");if(!c||"none"===c)return;c=c.replace(/(')|(")|(counter\(.+\))/g,"");const d=[ut()],u=yt(e,n,r);null==s||s.forEach(((e,t)=>{u.delete(t)}));const h=vt(l,u,r.includeStyleProperties);h.delete("content"),h.delete("-webkit-locale"),"text"===(null==(a=h.get("background-clip"))?void 0:a[0])&&t.classList.add("______background-clip--text");const f=[`content: '${c}';`];if(h.forEach((([e,t],n)=>{f.push(`${n}: ${e}${t?" !important":""};`)})),1===f.length)return;try{t.className=[t.className,...d].join(" ")}catch(e){return}const p=f.join("\n  ");let m=o.get(p);m||(m=[],o.set(p,m)),m.push(`.${d[0]}:${n}`)}a&&i&&(Et.forEach(l),n&&xt.forEach(l))}(e,s,d,t),function(e,t){je(e)&&(t.innerHTML=e.value),(je(e)||Ze(e)||Ye(e))&&t.setAttribute("value",e.value)}(e,s),null==(o=ht(null==(a=l.get("font-family"))?void 0:a[0]))||o.forEach((e=>c.add(e))),Be(e)||(yield Ct(e,s,t)),s}const d=e.cloneNode(!1);return yield Ct(e,d,t),d}))}function Mt(e,t){const{url:n,requestType:r="text",responseType:i="text",imageDom:a}=t;let o=n;const{timeout:s,acceptOfImage:l,requests:c,fetchFn:d,fetch:{requestInit:u,bypassingCache:h,placeholderImage:f},workers:p}=e;"image"===r&&(Ne||Ie)&&e.drawImageCount++;let m=c.get(n);if(!m){h&&h instanceof RegExp&&h.test(o)&&(o+=(/\?/.test(o)?"&":"?")+(new Date).getTime());const e=ue({url:o,timeout:s,responseType:i,headers:"image"===r?{accept:l}:void 0},u);m={type:r,resolve:void 0,reject:void 0,response:null},m.response=(()=>pe(this,null,(function*(){if(d&&"image"===r){const e=yield d(n);if(e)return e}return!Ne&&n.startsWith("http")&&p.length?new Promise(((t,r)=>{p[c.size&p.length-1].postMessage(ue({rawUrl:n},e)),m.resolve=t,m.reject=r})):function(e){const t=e,{url:n,timeout:r,responseType:i}=t,a=fe(t,["url","timeout","responseType"]),o=new AbortController,s=r?setTimeout((()=>o.abort()),r):void 0;return fetch(n,ue({signal:o.signal},a)).then((e=>{if(!e.ok)throw new Error("Failed fetch, not 2xx response",{cause:e});return"dataUrl"===i?e.blob().then(st):e.text()})).finally((()=>clearTimeout(s)))}(e)})))().catch((e=>{if(c.delete(n),"image"===r&&f)return Qe("Failed to fetch image base64, trying to use placeholder image",o),"string"==typeof f?f:f(a);throw e})),c.set(n,m)}return m.response}function zt(e,t,n,r){return pe(this,null,(function*(){if(!Dt(e))return e;for(const[i,a]of function(e,t){const n=[];return e.replace(Rt,((e,r,i)=>(n.push([i,nt(i,t)]),e))),n.filter((([e])=>!tt(e)))}(e,t))try{const t=yield Mt(n,{url:a,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(Ut(i),`$1${t}$3`)}catch(e){Qe("Failed to fetch css data url",i,e)}return e}))}function Dt(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const Rt=/url\((['"]?)([^'"]+?)\1\)/g;function Ut(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ot(e,t){return pe(this,null,(function*(){const{ownerDocument:e,svgStyleElement:n,fontFamilies:r,fontCssTexts:i,tasks:a,font:o}=t;if(e&&n&&r.size)if(o&&o.cssText){const r=Vt(o.cssText,t);n.appendChild(e.createTextNode(`${r}\n`))}else{const o=Array.from(e.styleSheets).filter((e=>{try{return"cssRules"in e&&Boolean(e.cssRules.length)}catch(t){return Qe(`Error while reading CSS rules from ${e.href}`,t),!1}}));yield Promise.all(o.flatMap((e=>Array.from(e.cssRules).map(((n,r)=>pe(this,null,(function*(){if(De(n)){let i=r+1;const a=n.href;let o="";try{o=yield Mt(t,{url:a,requestType:"text",responseType:"text"})}catch(e){Qe(`Error fetch remote css import from ${a}`,e)}const s=o.replace(Rt,((e,t,n)=>e.replace(n,nt(n,a))));for(const t of function(e){if(null==e)return[];const t=[];let n=e.replace($t,"");for(;;){const e=Pt.exec(n);if(!e)break;t.push(e[0])}n=n.replace(Pt,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(e)i.lastIndex=r.lastIndex;else{if(e=i.exec(n),!e)break;r.lastIndex=i.lastIndex}t.push(e[0])}return t}(s))try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(e){Qe("Error inserting rule from remote css import",{rule:t,error:e})}}}))))))),o.flatMap((e=>Array.from(e.cssRules))).filter((e=>{var t;return ze(e)&&Dt(e.style.getPropertyValue("src"))&&(null==(t=ht(e.style.getPropertyValue("font-family")))?void 0:t.some((e=>r.has(e))))})).forEach((r=>{const o=r,s=i.get(o.cssText);s?n.appendChild(e.createTextNode(`${s}\n`)):a.push(zt(o.cssText,o.parentStyleSheet?o.parentStyleSheet.href:null,t).then((r=>{r=Vt(r,t),i.set(o.cssText,r),n.appendChild(e.createTextNode(`${r}\n`))})))}))}}))}const $t=/(\/\*[\s\S]*?\*\/)/gi,Pt=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;const Ft=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Lt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Vt(e,t){const{font:n}=t,r=n?null==n?void 0:n.preferredFormat:void 0;return r?e.replace(Lt,(e=>{for(;;){const[t,,n]=Ft.exec(e)||[];if(!n)return"";if(n===r)return`src: ${t};`}})):e}const Bt=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Ht(e,t){const{tasks:n}=t;Re(e)&&((Ve(e)||Oe(e))&&n.push(...function(e,t){if(Ve(e)){const n=e.currentSrc||e.src;if(!tt(n))return[Mt(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then((t=>{t&&(e.srcset="",e.dataset.originalSrc=n,e.src=t||"")}))];(Ne||Ie)&&t.drawImageCount++}else if(Ue(e)&&!tt(e.href.baseVal)){const n=e.href.baseVal;return[Mt(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then((t=>{t&&(e.dataset.originalSrc=n,e.href.baseVal=t||"")}))]}return[]}(e,t)),$e(e)&&n.push(...function(e,t){var n;const{ownerDocument:r,svgDefsElement:i}=t,a=null!=(n=e.getAttribute("href"))?n:e.getAttribute("xlink:href");if(!a)return[];const[o,s]=a.split("#");if(s){const n=`#${s}`,a=null==r?void 0:r.querySelector(`svg ${n}`);if(o&&e.setAttribute("href",n),null!=i&&i.querySelector(n))return[];if(a)return null==i||i.appendChild(a.cloneNode(!0)),[];if(o)return[Mt(t,{url:o,responseType:"text"}).then((e=>{null==i||i.insertAdjacentHTML("beforeend",e)}))]}return[]}(e,t))),Pe(e)&&n.push(...function(e,t){return Bt.map((n=>{const r=e.getPropertyValue(n);return r&&"none"!==r?((Ne||Ie)&&t.drawImageCount++,zt(r,null,t,!0).then((t=>{!t||r===t||e.setProperty(n,t,e.getPropertyPriority(n))}))):null})).filter(Boolean)}(e.style,t)),e.childNodes.forEach((e=>{Ht(e,t)}))}function jt(e,t){return pe(this,null,(function*(){const n=yield mt(e,t);if(Re(n.node)&&Ue(n.node))return n.node;const{ownerDocument:r,log:i,tasks:a,svgStyleElement:o,svgDefsElement:s,svgStyles:l,font:c,progress:d,autoDestruct:u,onCloneNode:h,onEmbedNode:f,onCreateForeignObjectSvg:p}=n;i.time("clone node");const m=yield It(n.node,n,!0);if(o&&r){let e="";l.forEach(((t,n)=>{e+=`${t.join(",\n")} {\n  ${n}\n}\n`})),o.appendChild(r.createTextNode(e))}i.timeEnd("clone node"),null==h||h(m),!1!==c&&Re(m)&&(i.time("embed web font"),yield Ot(0,n),i.timeEnd("embed web font")),i.time("embed node"),Ht(m,n);const g=a.length;let w=0;null==d||d(w,g),yield Promise.all([...Array(4)].map((()=>pe(this,null,(function*(){for(;;){const e=a.pop();if(!e)break;try{yield e}catch(e){Qe("Failed to run task",e)}null==d||d(++w,g)}}))))),i.timeEnd("embed node"),null==f||f(m);const b=function(e,t){const{width:n,height:r}=t,i=function(e,t,n){const r=rt(n).createElementNS(it,"svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}(n,r,e.ownerDocument),a=i.ownerDocument.createElementNS(i.namespaceURI,"foreignObject");return a.setAttributeNS(null,"x","0%"),a.setAttributeNS(null,"y","0%"),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.append(e),i.appendChild(a),i}(m,n);return s&&b.insertBefore(s,b.children[0]),o&&b.insertBefore(o,b.children[0]),u&&function(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(e){}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}(n),null==p||p(b),b}))}function Zt(e,t){return pe(this,null,(function*(){var n;const r=yield mt(e,t),i=yield jt(r),a=function(e,t){let n=(new XMLSerializer).serializeToString(e);return t&&(n=n.replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}(i,r.isEnable("removeControlCharacter"));r.autoDestruct||(r.svgStyleElement=gt(r.ownerDocument),r.svgDefsElement=null==(n=r.ownerDocument)?void 0:n.createElementNS(it,"defs"),r.svgStyles.clear());const o=ct(a,i.ownerDocument);return yield wt(o,r)}))}function qt(e){let t;if(e){if(!(e instanceof ArrayBuffer))throw Error("Invalid buffer received.");if(this.datas=new DataView(e,0,qt.HEADER_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"h"!==String.fromCharCode(this.datas.getUint8(2))||"d"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileHeader : MThd prefix not found");if(6!==this.datas.getUint32(4))throw new Error("Invalid MIDIFileHeader : Chunk length must be 6")}else t=new Uint8Array(qt.HEADER_LENGTH),t[0]=77,t[1]=84,t[2]=104,t[3]=100,t[4]=0,t[5]=0,t[6]=0,t[7]=6,t[8]=0,t[9]=1,t[10]=0,t[11]=1,t[12]=0,t[13]=192,this.datas=new DataView(t.buffer,0,qt.HEADER_LENGTH)}qt.HEADER_LENGTH=14,qt.FRAMES_PER_SECONDS=1,qt.TICKS_PER_BEAT=2,qt.prototype.getFormat=function(){const e=this.datas.getUint16(8);if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI file : MIDI format ("+e+"), format can be 0, 1 or 2 only.");return e},qt.prototype.setFormat=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI format given ("+e+"), format can be 0, 1 or 2 only.");this.datas.setUint16(8,e)},qt.prototype.getTracksCount=function(){return this.datas.getUint16(10)},qt.prototype.setTracksCount=function(e){return this.datas.setUint16(10,e)},qt.prototype.getTickResolution=function(e){return 32768&this.datas.getUint16(12)?1e6/(this.getSMPTEFrames()*this.getTicksPerFrame()):(e=e||5e5)/this.getTicksPerBeat()},qt.prototype.getTimeDivision=function(){return 32768&this.datas.getUint16(12)?qt.FRAMES_PER_SECONDS:qt.TICKS_PER_BEAT},qt.prototype.getTicksPerBeat=function(){var e=this.datas.getUint16(12);if(32768&e)throw new Error("Time division is not expressed as ticks per beat.");return e},qt.prototype.setTicksPerBeat=function(e){this.datas.setUint16(12,32767&e)},qt.prototype.getSMPTEFrames=function(){const e=this.datas.getUint16(12);let t;if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");if(t=32512&e,-1===[24,25,29,30].indexOf(t))throw new Error("Invalid SMPTE frames value ("+t+").");return 29===t?29.97:t},qt.prototype.getTicksPerFrame=function(){const e=this.datas.getUint16(12);if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");return 255&e},qt.prototype.setSMTPEDivision=function(e,t){if(29.97===e&&(e=29),-1===[24,25,29,30].indexOf(e))throw new Error("Invalid SMPTE frames value given ("+e+").");if(0>t||255<t)throw new Error("Invalid ticks per frame value given ("+e+").");this.datas.setUint8(12,128|e),this.datas.setUint8(13,t)};var Gt=qt;function Yt(e,t){let n,r;if(e){if(!(e instanceof ArrayBuffer))throw new Error("Invalid buffer received.");if(12>e.byteLength-t)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : Buffer length must size at least 12bytes");if(this.datas=new DataView(e,t,Yt.HDR_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"r"!==String.fromCharCode(this.datas.getUint8(2))||"k"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : MTrk prefix not found");if(r=this.getTrackLength(),e.byteLength-t<r)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : The track size exceed the buffer length.");if(this.datas=new DataView(e,t,Yt.HDR_LENGTH+r),255!==this.datas.getUint8(Yt.HDR_LENGTH+(r-3))||47!==this.datas.getUint8(Yt.HDR_LENGTH+(r-2))||0!==this.datas.getUint8(Yt.HDR_LENGTH+(r-1)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : No track end event found at the expected index ("+(Yt.HDR_LENGTH+(r-1)).toString(16)+").")}else n=new Uint8Array(12),n[0]=77,n[1]=84,n[2]=114,n[3]=107,n[4]=0,n[5]=0,n[6]=0,n[7]=4,n[8]=0,n[9]=255,n[10]=47,n[11]=0,this.datas=new DataView(n.buffer,0,Yt.HDR_LENGTH+4)}Yt.HDR_LENGTH=8,Yt.prototype.getTrackLength=function(){return this.datas.getUint32(4)},Yt.prototype.setTrackLength=function(e){return this.datas.setUint32(4,e)},Yt.prototype.getTrackContent=function(){return new DataView(this.datas.buffer,this.datas.byteOffset+Yt.HDR_LENGTH,this.datas.byteLength-Yt.HDR_LENGTH)},Yt.prototype.setTrackContent=function(e){let t,n,r,i;const a=e.byteLength-e.byteOffset;if(4>a)throw new Error("Invalid track length, must size at least 4bytes");for(this.datas=new DataView(new Uint8Array(Yt.HDR_LENGTH+a).buffer),this.datas.setUint8(0,77),this.datas.setUint8(1,84),this.datas.setUint8(2,114),this.datas.setUint8(3,107),this.datas.setUint32(4,a),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=new Uint8Array(this.datas.buffer,Yt.HDR_LENGTH,a),r=0,i=t.length;r<i;r++)n[r]=t[r]};var Kt=Yt;function Wt(){throw new Error("MIDIEvents function not intended to be run.")}Wt.EVENT_META=255,Wt.EVENT_SYSEX=240,Wt.EVENT_DIVSYSEX=247,Wt.EVENT_MIDI=8,Wt.EVENT_META_SEQUENCE_NUMBER=0,Wt.EVENT_META_TEXT=1,Wt.EVENT_META_COPYRIGHT_NOTICE=2,Wt.EVENT_META_TRACK_NAME=3,Wt.EVENT_META_INSTRUMENT_NAME=4,Wt.EVENT_META_LYRICS=5,Wt.EVENT_META_MARKER=6,Wt.EVENT_META_CUE_POINT=7,Wt.EVENT_META_MIDI_CHANNEL_PREFIX=32,Wt.EVENT_META_END_OF_TRACK=47,Wt.EVENT_META_SET_TEMPO=81,Wt.EVENT_META_SMTPE_OFFSET=84,Wt.EVENT_META_TIME_SIGNATURE=88,Wt.EVENT_META_KEY_SIGNATURE=89,Wt.EVENT_META_SEQUENCER_SPECIFIC=127,Wt.EVENT_MIDI_NOTE_OFF=8,Wt.EVENT_MIDI_NOTE_ON=9,Wt.EVENT_MIDI_NOTE_AFTERTOUCH=10,Wt.EVENT_MIDI_CONTROLLER=11,Wt.EVENT_MIDI_PROGRAM_CHANGE=12,Wt.EVENT_MIDI_CHANNEL_AFTERTOUCH=13,Wt.EVENT_MIDI_PITCH_BEND=14,Wt.MIDI_1PARAM_EVENTS=[Wt.EVENT_MIDI_PROGRAM_CHANGE,Wt.EVENT_MIDI_CHANNEL_AFTERTOUCH],Wt.MIDI_2PARAMS_EVENTS=[Wt.EVENT_MIDI_NOTE_OFF,Wt.EVENT_MIDI_NOTE_ON,Wt.EVENT_MIDI_NOTE_AFTERTOUCH,Wt.EVENT_MIDI_CONTROLLER,Wt.EVENT_MIDI_PITCH_BEND],Wt.createParser=function(e,t,n){var r,i,a,o,s;if(e instanceof DataView&&(e={position:t||0,buffer:e,readUint8:function(){return this.buffer.getUint8(this.position++)},readUint16:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readUint32:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readVarInt:function(){for(var e,t=0,n=0;4>n++;){if(!(128&(e=this.readUint8())))return t+e;t+=127&e,t<<=7}throw new Error("0x"+this.position.toString(16)+": Variable integer length cannot exceed 4 bytes")},readBytes:function(e){for(var t=[];0<e;e--)t.push(this.readUint8());return t},pos:function(){return"0x"+(this.buffer.byteOffset+this.position).toString(16)},end:function(){return this.position===this.buffer.byteLength}},t=0),0<t)for(;t--;)e.readUint8();return{next:function(){if(e.end())return null;if(i={index:e.pos(),delta:e.readVarInt()},240==(240&(r=e.readUint8()))){if(r!==Wt.EVENT_META){if(r===Wt.EVENT_SYSEX||r===Wt.EVENT_DIVSYSEX)return i.type=r,i.length=e.readVarInt(),i.data=e.readBytes(i.length),i;if(n)throw new Error(e.pos()+" Unknown event type "+r.toString(16)+", Delta: "+i.delta+".");return i.type=r,i.badsubtype=e.readVarInt(),i.length=e.readUint8(),i.data=e.readBytes(i.length),i}switch(i.type=Wt.EVENT_META,i.subtype=e.readUint8(),i.length=e.readVarInt(),i.subtype){case Wt.EVENT_META_SEQUENCE_NUMBER:if(n&&2!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.msb=e.readUint8(),i.lsb=e.readUint8(),i;case Wt.EVENT_META_TEXT:case Wt.EVENT_META_COPYRIGHT_NOTICE:case Wt.EVENT_META_TRACK_NAME:case Wt.EVENT_META_INSTRUMENT_NAME:case Wt.EVENT_META_LYRICS:case Wt.EVENT_META_MARKER:case Wt.EVENT_META_CUE_POINT:return i.data=e.readBytes(i.length),i;case Wt.EVENT_META_MIDI_CHANNEL_PREFIX:if(n&&1!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.prefix=e.readUint8(),i;case Wt.EVENT_META_END_OF_TRACK:if(n&&0!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i;case Wt.EVENT_META_SET_TEMPO:if(n&&3!==i.length)throw new Error(e.pos()+" Tempo meta event length must be 3.");return i.tempo=(e.readUint8()<<16)+(e.readUint8()<<8)+e.readUint8(),i.tempoBPM=6e7/i.tempo,i;case Wt.EVENT_META_SMTPE_OFFSET:if(n&&5!==i.length)throw new Error(e.pos()+" Bad metaevent length.");if(i.hour=e.readUint8(),n&&23<i.hour)throw new Error(e.pos()+" SMTPE offset hour value must be part of 0-23.");if(i.minutes=e.readUint8(),n&&59<i.minutes)throw new Error(e.pos()+" SMTPE offset minutes value must be part of 0-59.");if(i.seconds=e.readUint8(),n&&59<i.seconds)throw new Error(e.pos()+" SMTPE offset seconds value must be part of 0-59.");if(i.frames=e.readUint8(),n&&30<i.frames)throw new Error(e.pos()+" SMTPE offset frames value must be part of 0-30.");if(i.subframes=e.readUint8(),n&&99<i.subframes)throw new Error(e.pos()+" SMTPE offset subframes value must be part of 0-99.");return i;case Wt.EVENT_META_KEY_SIGNATURE:if(n&&2!==i.length)throw new Error(e.pos()+" Bad metaevent length.");if(i.key=e.readUint8(),n&&(-7>i.key||7<i.key))throw new Error(e.pos()+" Bad metaevent length.");if(i.scale=e.readUint8(),n&&0!==i.scale&&1!==i.scale)throw new Error(e.pos()+" Key signature scale value must be 0 or 1.");return i;case Wt.EVENT_META_TIME_SIGNATURE:if(n&&4!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.data=e.readBytes(i.length),i.param1=i.data[0],i.param2=i.data[1],i.param3=i.data[2],i.param4=i.data[3],i;case Wt.EVENT_META_SEQUENCER_SPECIFIC:return i.data=e.readBytes(i.length),i;default:if(n)throw new Error(e.pos()+" Unknown meta event type ("+i.subtype.toString(16)+").");return i.data=e.readBytes(i.length),i}}else{if(0==(128&r)){if(!a)throw new Error(e.pos()+" Running status without previous event");s=r}else a=r>>4,o=15&r,s=e.readUint8();switch(i.type=Wt.EVENT_MIDI,i.subtype=a,i.channel=o,i.param1=s,a){case Wt.EVENT_MIDI_NOTE_OFF:return i.param2=e.readUint8(),i;case Wt.EVENT_MIDI_NOTE_ON:return i.param2=e.readUint8(),i.param2||(i.subtype=Wt.EVENT_MIDI_NOTE_OFF,i.param2=127),i;case Wt.EVENT_MIDI_NOTE_AFTERTOUCH:case Wt.EVENT_MIDI_CONTROLLER:return i.param2=e.readUint8(),i;case Wt.EVENT_MIDI_PROGRAM_CHANGE:case Wt.EVENT_MIDI_CHANNEL_AFTERTOUCH:return i;case Wt.EVENT_MIDI_PITCH_BEND:return i.param2=e.readUint8(),i;default:if(n)throw new Error(e.pos()+" Unknown MIDI event type ("+a.toString(16)+").");return i}}}}},Wt.writeToTrack=function(e,t,n){var r,i,a,o,s=0;for(r=0,i=e.length;r<i;r++){if(e[r].delta>>>28)throw Error("Event #"+r+": Maximum delta time value reached ("+e[r].delta+"/134217728 max)");if(e[r].delta>>>21&&(t[s++]=e[r].delta>>>21&127|128),e[r].delta>>>14&&(t[s++]=e[r].delta>>>14&127|128),e[r].delta>>>7&&(t[s++]=e[r].delta>>>7&127|128),t[s++]=127&e[r].delta,e[r].type===Wt.EVENT_MIDI)t[s++]=(e[r].subtype<<4)+e[r].channel,t[s++]=e[r].param1,-1!==Wt.MIDI_2PARAMS_EVENTS.indexOf(e[r].subtype)&&(t[s++]=e[r].param2);else{if(t[s++]=e[r].type,e[r].type===Wt.EVENT_META&&(t[s++]=e[r].subtype),e[r].length>>>28)throw Error("Event #"+r+": Maximum length reached ("+e[r].length+"/134217728 max)");if(e[r].length>>>21&&(t[s++]=e[r].length>>>21&127|128),e[r].length>>>14&&(t[s++]=e[r].length>>>14&127|128),e[r].length>>>7&&(t[s++]=e[r].length>>>7&127|128),t[s++]=127&e[r].length,e[r].type===Wt.EVENT_META)switch(e[r].subtype){case Wt.EVENT_META_SEQUENCE_NUMBER:t[s++]=e[r].msb,t[s++]=e[r].lsb;break;case Wt.EVENT_META_TEXT:case Wt.EVENT_META_COPYRIGHT_NOTICE:case Wt.EVENT_META_TRACK_NAME:case Wt.EVENT_META_INSTRUMENT_NAME:case Wt.EVENT_META_LYRICS:case Wt.EVENT_META_MARKER:case Wt.EVENT_META_CUE_POINT:for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a];break;case Wt.EVENT_META_MIDI_CHANNEL_PREFIX:t[s++]=e[r].prefix;break;case Wt.EVENT_META_END_OF_TRACK:break;case Wt.EVENT_META_SET_TEMPO:t[s++]=e[r].tempo>>16,t[s++]=e[r].tempo>>8&255,t[s++]=255&e[r].tempo;break;case Wt.EVENT_META_SMTPE_OFFSET:if(n&&23<e[r].hour)throw new Error("Event #"+r+": SMTPE offset hour value must be part of 0-23.");if(t[s++]=e[r].hour,n&&59<e[r].minutes)throw new Error("Event #"+r+": SMTPE offset minutes value must be part of 0-59.");if(t[s++]=e[r].minutes,n&&59<e[r].seconds)throw new Error("Event #"+r+": SMTPE offset seconds value must be part of 0-59.");if(t[s++]=e[r].seconds,n&&30<e[r].frames)throw new Error("Event #"+r+": SMTPE offset frames amount must be part of 0-30.");if(t[s++]=e[r].frames,n&&99<e[r].subframes)throw new Error("Event #"+r+": SMTPE offset subframes amount must be part of 0-99.");t[s++]=e[r].subframes;break;case Wt.EVENT_META_KEY_SIGNATURE:if("number"!=typeof e[r].key||-7>e[r].key||7<e[r].scale)throw new Error("Event #"+r+":The key signature key must be between -7 and 7");if("number"!=typeof e[r].scale||0>e[r].scale||1<e[r].scale)throw new Error("Event #"+r+":The key signature scale must be 0 or 1");t[s++]=e[r].key,t[s++]=e[r].scale;break;case Wt.EVENT_META_TIME_SIGNATURE:case Wt.EVENT_META_SEQUENCER_SPECIFIC:default:for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a]}else for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a]}}},Wt.getRequiredBufferLength=function(e){var t,n=0,r=0;for(r=0,t=e.length;r<t;r++)n+=e[r].delta>>>21?4:e[r].delta>>>14?3:e[r].delta>>>7?2:1,e[r].type===Wt.EVENT_MIDI?(n++,n++,-1!==Wt.MIDI_2PARAMS_EVENTS.indexOf(e[r].subtype)&&n++):(n++,e[r].type===Wt.EVENT_META&&n++,n+=e[r].length>>>21?4:e[r].length>>>14?3:e[r].length>>>7?2:1,n+=e[r].length);return n};var Qt=Wt,Xt={isNotUTF8:function(e,t,n){try{tn(e,t,n,!0)}catch(e){return!0}return!1},getCharLength:Jt,getCharCode:en,getStringFromBytes:tn,getBytesForCharCode:nn,setBytesFromCharCode:rn,setBytesFromString:function(e,t,n,r,i){e=e||"",t=t||[],n|=0,r="number"==typeof r?r:t.byteLength||1/0;for(var a=0,o=e.length;a<o;a++){var s=nn(e[a].codePointAt(0));if(i&&n+s>r)throw new Error('Not enought bytes to encode the char "'+e[a]+'" at the offset "'+n+'".');rn(e[a].codePointAt(0),t,n,s),n+=s}return t}};function Jt(e){return 240==(240&e)?4:224==(224&e)?3:192==(192&e)?2:e==(127&e)?1:0}function en(e,t,n){var r=0,i="";if(t=t||0,e.length-t<=0)throw new Error("No more characters remaining in array.");if(0==(n=n||Jt(e[t])))throw new Error(e[t].toString(2)+" is not a significative byte (offset:"+t+").");if(1===n)return e[t];if(e.length-t<n)throw new Error("Expected at least "+n+" bytes remaining in array.");if(i="00000000".slice(0,n)+1+"00000000".slice(n+1),e[t]&parseInt(i,2))throw Error("Index "+t+": A "+n+" bytes encoded char cannot encode the "+(n+1)+"th rank bit to 1.");for(i="0000".slice(0,n+1)+"11111111".slice(n+1),r+=(e[t]&parseInt(i,2))<<6*--n;n;){if(128!=(128&e[t+1])||64==(64&e[t+1]))throw Error("Index "+(t+1)+': Next bytes of encoded char must begin with a "10" bit sequence.');r+=(63&e[++t])<<6*--n}return r}function tn(e,t,n,r){var i,a=[];for(t|=0,n="number"==typeof n?n:e.byteLength||e.length;t<n;t++){if(t+(i=Jt(e[t]))>n){if(r)throw Error("Index "+t+": Found a "+i+" bytes encoded char declaration but only "+(n-t)+" bytes are available.")}else a.push(String.fromCodePoint(en(e,t,i)));t+=i-1}return a.join("")}function nn(e){if(e<128)return 1;if(e<2048)return 2;if(e<65536)return 3;if(e<2097152)return 4;throw new Error("CharCode "+e+" cannot be encoded with UTF8.")}function rn(e,t,n,r){if(e|=0,t=t||[],n|=0,1==(r=r||nn(e)))t[n]=e;else for(t[n++]=(parseInt("1111".slice(0,r),2)<<8-r)+(e>>>6*--r);r>0;)t[n++]=e>>>6*--r&63|128;return t}function an(e,t){var n,r,i,a;if(e){if(25>(e=function(e){if(e){if(e instanceof ArrayBuffer)return e;if(e instanceof Uint8Array)return new Uint8Array(e).buffer}throw new Error("Unsupported buffer type, need ArrayBuffer or Uint8Array")}(e)).byteLength)throw new Error("A buffer of a valid MIDI file must have, at least, a size of 25bytes.");for(this.header=new Gt(e),this.tracks=[],r=Gt.HEADER_LENGTH,i=0,a=this.header.getTracksCount();i<a;i++){if(t&&r>=e.byteLength-1)throw new Error("Couldn't find datas corresponding to the track #"+i+".");n=new Kt(e,r),this.tracks.push(n),r+=n.getTrackLength()+8}if(t&&r!==e.byteLength)throw new Error("It seems that the buffer contains too much datas.")}else this.header=new Gt,this.tracks=[new Kt]}an.prototype.getEvents=function(e,t){var n,r,i,a,o,s,l=0,c=[],d=this.header.getFormat(),u=this.header.getTickResolution();if(1!==d||1===this.tracks.length)for(i=0,a=this.tracks.length;i<a;i++)for(l=2===d&&l?l:0,r=(n=Qt.createParser(this.tracks[i].getTrackContent(),0,!1)).next();r;)l+=r.delta?r.delta*u/1e3:0,r.type===Qt.EVENT_META&&r.subtype===Qt.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),e&&r.type!==e||t&&(!r.subtype||r.subtype!==t)||(r.playTime=l,c.push(r)),r=n.next();else{for(o=[],s=-1,i=0,a=this.tracks.length;i<a;i++)o[i]={},o[i].parser=Qt.createParser(this.tracks[i].getTrackContent(),0,!1),o[i].curEvent=o[i].parser.next();do{for(s=-1,i=0,a=o.length;i<a;i++)o[i].curEvent&&(-1===s||o[i].curEvent.delta<o[s].curEvent.delta)&&(s=i);if(-1!==s){for(i=0,a=o.length;i<a;i++)i!==s&&o[i].curEvent&&(o[i].curEvent.delta-=o[s].curEvent.delta);l+=(r=o[s].curEvent).delta?r.delta*u/1e3:0,r.type===Qt.EVENT_META&&r.subtype===Qt.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),e&&r.type!==e||t&&(!r.subtype||r.subtype!==t)||(r.playTime=l,r.track=s,c.push(r)),o[s].curEvent=o[s].parser.next()}}while(-1!==s)}return c},an.prototype.getMidiEvents=function(){return this.getEvents(Qt.EVENT_MIDI)},an.prototype.getLyrics=function(){var e,t,n,r=this.getEvents(Qt.EVENT_META),i=[],a=[];for(t=0,n=r.length;t<n;t++)(e=r[t]).subtype===Qt.EVENT_META_LYRICS?a.push(e):e.subtype===Qt.EVENT_META_TEXT&&("@"===String.fromCharCode(e.data[0])?"T"===String.fromCharCode(e.data[1])||"I"===String.fromCharCode(e.data[1])||String.fromCharCode(e.data[1]):0===String.fromCharCode.apply(String,e.data).indexOf("words")?i.length=0:0!==e.playTime&&i.push(e));2<a.length?i=a:i.length||(i=[]);try{i.forEach((function(e){e.text=Xt.getStringFromBytes(e.data,0,e.length,!0)}))}catch(e){i.forEach((function(e){e.text=e.data.map((function(e){return String.fromCharCode(e)})).join("")}))}return i},an.prototype.getTrackEvents=function(e){var t,n,r=[];if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=(n=Qt.createParser(this.tracks[e].getTrackContent(),0,!1)).next();do{r.push(t),t=n.next()}while(t);return r},an.prototype.setTrackEvents=function(e,t){var n,r;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");if(!t||!t.length)throw Error("A track must contain at least one event, none given.");n=Qt.getRequiredBufferLength(t),r=new Uint8Array(n),Qt.writeToTrack(t,r),this.tracks[e].setTrackContent(r)},an.prototype.deleteTrack=function(e){if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");this.tracks.splice(e,1),this.header.setTracksCount(this.tracks.length)},an.prototype.addTrack=function(e){var t;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=new Kt,e===this.tracks.length?this.tracks.push(t):this.tracks.splice(e,0,t),this.header.setTracksCount(this.tracks.length)},an.prototype.getContent=function(){var e,t,n,r,i,a,o,s,l;for(e=Gt.HEADER_LENGTH,r=0,i=this.tracks.length;r<i;r++)e+=this.tracks[r].getTrackLength()+8;for(t=new Uint8Array(e),n=new Uint8Array(this.header.datas.buffer,this.header.datas.byteOffset,Gt.HEADER_LENGTH),r=0,i=Gt.HEADER_LENGTH;r<i;r++)t[r]=n[r];for(a=0,o=this.tracks.length;a<o;a++)for(n=new Uint8Array(this.tracks[a].datas.buffer,this.tracks[a].datas.byteOffset,this.tracks[a].datas.byteLength),s=0,l=this.tracks[a].datas.byteLength;s<l;s++)t[r++]=n[s];return t.buffer},an.Header=Gt,an.Track=Kt;var on=an;const sn="!@#$%^&*()QWERTYUIOPASDFGHJKLZXCBVNM";let ln=e=>!e||e.type&&("break"==e.type||"comment"==e.type),cn=e=>!ln(e);class dn{constructor(e,t,n,r,i,a="keep",o="keep"){this.original=e,this.value=e,this.playTime=t,this.delta=i,this.char=fn[e-21],this.tempo=n,this.BPM=r,this.transposition=()=>this.value-this.original,this.valid=e>=21&&e<=108,this.outOfRange=e<=35||e>=97,sn.includes(this.char)?"Start"===a?this.displayValue=e-108:"End"==a&&(this.displayValue=e+108):this.outOfRange?"Start"===o?this.displayValue=e-1024:"End"==o?this.displayValue=e+1024:mn.includes(this.char)?this.displayValue=e-1024:this.displayValue=e+1024:this.displayValue=e}new_with_saved_original(e){let t=new dn(e,this.playTime,this.tempo,this.BPM,this.delta,this.shifts,this.oors);return t.original=this.original,t}}class un{constructor(e,t=!0,n=!0){let r=!1,i=e[0];this.classicChordOrder=t,this.sequentialQuantize=n;for(let t of e){if(t.playTime!=i.playTime){r=!0;break}i=t}if(this.is_quantized=r,r)r&&(this.notes=n?e:this.#e(e,t));else{let n=[],r=[];e.forEach((e=>{n.includes(e.value)||(n.push(e.value),r.push(e))})),this.notes=this.#e(r,t)}}transpose=(e,t=!1,n=!1)=>{t&&(e=this.notes[0].transposition()+e);let r=new un(this.notes,this.classicChordOrder,this.sequentialQuantize);for(let t=0;t<r.notes.length;t++){let t=n?this:r,i=t.notes.map((t=>t.new_with_saved_original(t.original+e)));r=new un(i,this.classicChordOrder,this.sequentialQuantize),t.notes=r.notes}return r};display=()=>{if(this.notes[0]?.char){if(1==this.notes.length)return this.notes[0].char;{let e=[];for(let t of this.notes)e.push(t.char??"?");return"["+e.join("")+"]"}}return"?"};#e(e,t){return t?this.#t(e):e.sort(((e,t)=>e.displayValue-t.displayValue))}#t(e){let t,n=[],r=[],i=[],a=[],o=[],s=[];e=e.sort(((e,t)=>e.value-t.value));for(const n of e)n.outOfRange?n.value-1024===n.displayValue?o.push(n):n.value+1024===n.displayValue&&s.push(n):(isNaN(n.char)?sn.includes(n.char)?i.push(n):a.push(n):r.push(n),t=n);return t&&(n=sn.includes(t.char)?[...r,...a,...i]:[...i,...r,...a]),[...o,...n,...s]}}function hn(e,t,n=undefined){const r=.5;let i=0;let a,o,s,l=t.quantize,c=t.pShifts,d=t.pOors,u=t.classicChordOrder,h=t.sequentialQuantize,f=t.bpm,p=[],m=[],g=f,w=4166.66*f;let b=0;e.forEach((e=>{if(81==e.subtype&&((f=e).tempo&&f.tempoBPM&&0!==f.tempo&&0!==f.tempoBPM)){if(w=e.tempo,g=e.tempoBPM,null==s)t.bpmChanges&&p.push({type:"comment",kind:"tempo",text:`Tempo: ${Math.round(e.tempoBPM)} BPM`});else if(null!=s&&s!=e.tempo&&o!=e.tempoBPM&&t.bpmChanges){let n=Math.round(e.tempoBPM),r=n<o?n:o,i=((n>o?n:o)-r)/r*100;if(i<t.minSpeedChange)return;p.push({type:"comment",kind:"tempo",text:`${Math.round(i)}% ${n>o?"faster":"slower"} - BPM changed to ${Math.round(e.tempoBPM)}`})}return o=e.tempoBPM,void(s=e.tempo)}var f;const _=e.param1,y=e.playTime,v=e.delta;if(!_)return;if(null==a&&(a=y),Math.abs(y-a)<l)m.push(new dn(_,y,w,g,v,c,d)),a=y;else{if(0==m.length)return void(a=y);let e=new un(m,u,h);e.index=b,b++;let t=n?.find((e=>e.index===b));t&&0!=t.notes[0].transposition()&&e.transpose(t.notes[0].transposition(),!1,!0),p.push(e),m=[],m.push(new dn(_,y,w,g,v,c,d)),a=y}const{doBreak:E,newPenalty:x}=function(e,n){if(!e)return!1;let i=e.tempo/1e3*t.beats,a=e.playTime-n;return a+r>=i?{doBreak:!0,newPenalty:n+a}:{doBreak:!1,newPenalty:n}}(m[0],i);i=x,E&&p.push({type:"break"})}));let _=new un(m,u,h);_.index=b,b++;let y=n?.find((e=>e.index===b));return y&&0!=y.notes[0].transposition()&&_.transpose(y.notes[0].transposition(),!1,!0),p.push(_),s||console.log(`No tempo found in sheet, set to ${g}/${w}`),p}const fn="1234567890qwert1!2@34$5%6^78*9(0qQwWeErtTyYuiIoOpPasSdDfgGhHjJklLzZxcCvVbBnmyuiopasdfghj",pn="1234567890qwertyuiopasdfghjklzxcvbnm",mn=pn.slice(0,15);function gn(e){let t=e.notes.filter((e=>!1===e.outOfRange&&!0===e.valid)),n=t.filter((e=>pn.includes(e.char))),r=t.filter((e=>!pn.includes(e.char)));return 2*t.length+Math.abs(r.length-n.length)}function wn(e,t,n=0,r=4,i=0){let a=e.map((e=>function(e,t,n=0){if(!e)return;if(ln(e))return n;let r=[n];e.notes.filter((e=>!1===e.outOfRange&&!0===e.valid)).length;let i=gn(e.transpose(r)),a=t=>{let n=gn(e.transpose(t));if(n>i)i=n,r=[t];else if(n==i){if(0==t&&r.includes(0))return n;r.push(t)}return n};for(let e=+n;e<=t;e++)a(+e),a(-e);return r}(e,t,n))),o=0,s=0,l=[];a=a.flat();for(let e of a){if(l.includes(e))continue;l.push(e);let t=a.filter((t=>t==e)),n=t.length;n>o&&(o=n,s=e)}return s}function bn(e,t,n){const r=e.slice();return r[20]=t[n],r}function _n(e){let t,n,i,a,f,m,g,w,_,y,v,E,k,T,S,A,C,N,I,M,z,D,R,U,O,P,F,L,V,B,H,j,Z,q,G,Y,K,W,Q,X,J,ee,te,ne,re,ie,ae,oe,se;function le(e,t){return e[2]?vn:yn}let ce=le(e),de=ce(e),ue=1==e[0].missingTempo&&En(e),he=e[2]&&xn(e),fe=e[2]&&kn(e),pe=e[0].oors&&e[0].tempoMarks&&Sn(e),me=e[3],ge=[];for(let t=0;t<me.length;t+=1)ge[t]=An(bn(e,me,t));return{c(){t=d("hr"),n=h(),i=d("div"),a=d("div"),f=d("label"),f.textContent="Place shifted notes at:",m=h(),g=d("select"),w=d("option"),w.textContent="Start",_=d("option"),_.textContent="End",E=h(),k=d("div"),T=d("label"),T.textContent="Place out of range notes at:",S=h(),A=d("select"),C=d("option"),C.textContent="Inorder",N=d("option"),N.textContent="Start",I=d("option"),I.textContent="End",M=h(),z=d("hr"),D=h(),de.c(),R=h(),ue&&ue.c(),U=h(),he&&he.c(),O=h(),P=d("div"),F=h(),L=d("label"),V=d("input"),B=u("\n        Include out of range (ctrl) notes"),H=h(),j=d("label"),Z=d("input"),q=u("\n        Show tempo and out-of-range marks"),G=h(),fe&&fe.c(),Y=h(),pe&&pe.c(),K=h(),W=d("hr"),Q=h(),X=d("div"),J=d("label"),J.textContent="Font:",ee=h(),te=d("select");for(let e=0;e<ge.length;e+=1)ge[e].c();ne=h(),re=d("hr"),ie=h(),ae=d("style"),ae.textContent='* {\n        user-select: none;\n    }\n\n    label {\n        max-width: fit-content;\n        text-align: center;\n    }\n\n    .select-div {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        text-align: center;\n    }\n\n    select {\n        height: auto;\n        margin-left: 0.4em;\n        margin-top: 0.2em;\n        margin-bottom: 0;\n    }\n    \n    select option {\n        background: #2D2A32;\n    }\n\n    input[type="checkbox"] {\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    input[type="range"] {\n        margin-left: 0.4em;\n        margin-right: 0.4em;\n        margin-bottom: 0;\n    }\n\n    input[type="file"] {\n        margin-bottom: 0;\n    }\n\n    input[type="text"] {\n        margin-bottom: 0;\n    }\n    \n    .beats, .select-label, .tempo {\n        display: flex;\n        flex-direction: row;\n    }',b(t,"class","my-2 mx-1"),b(f,"for","shifts-position"),w.__value="Start",w.value=w.__value,_.__value="End",_.value=_.__value,g.disabled=y=e[0].classicChordOrder,b(g,"title",v=e[0].classicChordOrder?'Disable "Classic chord order" to customize this.':""),b(g,"name","shifts-position"),b(g,"id","shifts-position"),void 0===e[0].pShifts&&$((()=>e[4].call(g))),b(a,"class","select-div"),b(T,"for","oors-position"),C.__value="Inorder",C.value=C.__value,N.__value="Start",N.value=N.__value,I.__value="End",I.value=I.__value,b(A,"name","oors-position"),b(A,"id","oors-position"),void 0===e[0].pOors&&$((()=>e[5].call(A))),b(k,"class","select-div"),b(z,"class","my-2 mx-1"),b(V,"type","checkbox"),b(V,"id","out-of-range"),b(L,"for","out-of-range"),b(Z,"type","checkbox"),b(Z,"id","tempo-checkbox"),b(j,"for","tempo-checkbox"),b(W,"class","my-2 mx-1"),b(J,"for","font"),b(te,"name","font"),b(te,"id","font"),void 0===e[0].font&&$((()=>e[18].call(te))),b(X,"class","select-div"),b(re,"class","my-2 mx-1")},m(r,l){s(r,t,l),s(r,n,l),s(r,i,l),o(i,a),o(a,f),o(a,m),o(a,g),o(g,w),o(g,_),x(g,e[0].pShifts),o(i,E),o(i,k),o(k,T),o(k,S),o(k,A),o(A,C),o(A,N),o(A,I),x(A,e[0].pOors),o(i,M),o(i,z),o(i,D),de.m(i,null),o(i,R),ue&&ue.m(i,null),o(i,U),he&&he.m(i,null),o(i,O),o(i,P),o(i,F),o(i,L),o(L,V),V.checked=e[0].oors,o(L,B),o(i,H),o(i,j),o(j,Z),Z.checked=e[0].tempoMarks,o(j,q),o(i,G),fe&&fe.m(i,null),o(i,Y),pe&&pe.m(i,null),o(i,K),o(i,W),o(i,Q),o(i,X),o(X,J),o(X,ee),o(X,te);for(let e=0;e<ge.length;e+=1)ge[e].m(te,null);x(te,e[0].font),o(i,ne),o(i,re),s(r,ie,l),s(r,ae,l),oe||(se=[p(g,"change",e[4]),p(A,"change",e[5]),p(V,"change",e[12]),p(Z,"change",e[13]),p(te,"change",e[18])],oe=!0)},p(e,t){if(1&t&&y!==(y=e[0].classicChordOrder)&&(g.disabled=y),1&t&&v!==(v=e[0].classicChordOrder?'Disable "Classic chord order" to customize this.':"")&&b(g,"title",v),1&t&&x(g,e[0].pShifts),1&t&&x(A,e[0].pOors),ce===(ce=le(e))&&de?de.p(e,t):(de.d(1),de=ce(e),de&&(de.c(),de.m(i,R))),1==e[0].missingTempo?ue?ue.p(e,t):(ue=En(e),ue.c(),ue.m(i,U)):ue&&(ue.d(1),ue=null),e[2]?he?he.p(e,t):(he=xn(e),he.c(),he.m(i,O)):he&&(he.d(1),he=null),1&t&&(V.checked=e[0].oors),1&t&&(Z.checked=e[0].tempoMarks),e[2]?fe?fe.p(e,t):(fe=kn(e),fe.c(),fe.m(i,Y)):fe&&(fe.d(1),fe=null),e[0].oors&&e[0].tempoMarks?pe?pe.p(e,t):(pe=Sn(e),pe.c(),pe.m(i,K)):pe&&(pe.d(1),pe=null),8&t){let n;for(me=e[3],n=0;n<me.length;n+=1){const r=bn(e,me,n);ge[n]?ge[n].p(r,t):(ge[n]=An(r),ge[n].c(),ge[n].m(te,null))}for(;n<ge.length;n+=1)ge[n].d(1);ge.length=me.length}1&t&&x(te,e[0].font)},d(e){e&&l(t),e&&l(n),e&&l(i),de.d(),ue&&ue.d(),he&&he.d(),fe&&fe.d(),pe&&pe.d(),c(ge,e),e&&l(ie),e&&l(ae),oe=!1,r(se)}}}function yn(t){let n;return{c(){n=d("i"),n.textContent="Some settings are not available because the original MIDI data is missing."},m(e,t){s(e,n,t)},p:e,d(e){e&&l(n)}}}function vn(e){let t,n,i,a,c,f,m,g,w,_,E=1==e[0].beats?"1 beat":`${e[0].beats} beats`;return{c(){t=d("div"),n=d("label"),n.textContent="Break lines:",i=h(),a=d("input"),c=h(),f=d("span"),m=u("Every "),g=u(E),b(n,"class","slider-label"),b(n,"for","beats-for-newline"),b(a,"type","range"),b(a,"id","beats-for-newline"),b(a,"min","1"),b(a,"max","32"),b(t,"class","beats")},m(r,l){s(r,t,l),o(t,n),o(t,i),o(t,a),v(a,e[0].beats),o(t,c),o(t,f),o(f,m),o(f,g),w||(_=[p(a,"change",e[6]),p(a,"input",e[6])],w=!0)},p(e,t){1&t&&v(a,e[0].beats),1&t&&E!==(E=1==e[0].beats?"1 beat":`${e[0].beats} beats`)&&y(g,E)},d(e){e&&l(t),w=!1,r(_)}}}function En(e){let t,n,i,a,c,u,f,m;return{c(){t=d("div"),n=d("label"),n.textContent="BPM (?):",i=h(),a=d("input"),c=h(),u=d("input"),b(n,"class","slider-label"),b(n,"for","tempo"),b(n,"title","You're able to change this because your MIDI file doesn't have tempo/BPM."),b(a,"type","range"),b(a,"id","tempo"),b(a,"min","1"),b(a,"max","300"),b(u,"type","number"),b(u,"class","w-16 box-border"),b(u,"min","1"),b(u,"max","300"),b(t,"class","tempo")},m(r,l){s(r,t,l),o(t,n),o(t,i),o(t,a),v(a,e[0].bpm),o(t,c),o(t,u),v(u,e[0].bpm),f||(m=[p(a,"change",e[7]),p(a,"input",e[7]),p(u,"input",e[8])],f=!0)},p(e,t){1&t&&v(a,e[0].bpm),1&t&&_(u.value)!==e[0].bpm&&v(u,e[0].bpm)},d(e){e&&l(t),f=!1,r(m)}}}function xn(e){let t,n,i,a,c,f,m,g,w,_,E,x,k,T,S,A,C,N,I=e[0].quantize+"";return{c(){t=d("div"),n=d("label"),n.textContent="Quantize:",i=h(),a=d("input"),c=h(),f=d("span"),m=u(I),g=u(" miliseconds"),w=h(),_=d("label"),E=d("input"),x=u("\n            Classic chord order"),k=h(),T=d("label"),S=d("input"),A=u("\n            Sequential quantizes"),b(n,"class","slider-label"),b(n,"for","quantize-prompt"),b(a,"type","range"),b(a,"id","quantize-prompt"),b(a,"min","1"),b(a,"max","250"),b(t,"class","beats"),b(E,"type","checkbox"),b(E,"id","classic-chord-order"),b(_,"for","classic-chord-order"),b(S,"type","checkbox"),b(S,"id","order-quantizes"),b(T,"for","order-quantizes")},m(r,l){s(r,t,l),o(t,n),o(t,i),o(t,a),v(a,e[0].quantize),o(t,c),o(t,f),o(f,m),o(f,g),s(r,w,l),s(r,_,l),o(_,E),E.checked=e[0].classicChordOrder,o(_,x),s(r,k,l),s(r,T,l),o(T,S),S.checked=e[0].sequentialQuantize,o(T,A),C||(N=[p(a,"change",e[9]),p(a,"input",e[9]),p(E,"change",e[10]),p(S,"change",e[11])],C=!0)},p(e,t){1&t&&v(a,e[0].quantize),1&t&&I!==(I=e[0].quantize+"")&&y(m,I),1&t&&(E.checked=e[0].classicChordOrder),1&t&&(S.checked=e[0].sequentialQuantize)},d(e){e&&l(t),e&&l(w),e&&l(_),e&&l(k),e&&l(T),C=!1,r(N)}}}function kn(e){let t,n,r,i,a,c,f,m=e[0].bpmChanges&&Tn(e);return{c(){t=d("label"),n=d("input"),r=u("\n            Show BPM changes as comments"),i=h(),a=d("div"),m&&m.c(),b(n,"type","checkbox"),b(n,"id","bpm-changes"),b(t,"for","bpm-changes"),b(a,"class","beats")},m(l,d){s(l,t,d),o(t,n),n.checked=e[0].bpmChanges,o(t,r),s(l,i,d),s(l,a,d),m&&m.m(a,null),c||(f=p(n,"change",e[14]),c=!0)},p(e,t){1&t&&(n.checked=e[0].bpmChanges),e[0].bpmChanges?m?m.p(e,t):(m=Tn(e),m.c(),m.m(a,null)):m&&(m.d(1),m=null)},d(e){e&&l(t),e&&l(i),e&&l(a),m&&m.d(),c=!1,f()}}}function Tn(e){let t,n,i,a,c,f,m,g,w,_,E=e[0].minSpeedChange+"";return{c(){t=d("label"),t.textContent="Min. % speed change:",n=h(),i=d("input"),a=h(),c=d("span"),f=u("At least "),m=u(E),g=u("%"),b(t,"class","slider-label"),b(t,"for","min-speed-change"),b(i,"type","range"),b(i,"id","min-speed-change"),b(i,"min","0"),b(i,"max","100")},m(r,l){s(r,t,l),s(r,n,l),s(r,i,l),v(i,e[0].minSpeedChange),s(r,a,l),s(r,c,l),o(c,f),o(c,m),o(c,g),w||(_=[p(i,"change",e[15]),p(i,"input",e[15])],w=!0)},p(e,t){1&t&&v(i,e[0].minSpeedChange),1&t&&E!==(E=e[0].minSpeedChange+"")&&y(m,E)},d(e){e&&l(t),e&&l(n),e&&l(i),e&&l(a),e&&l(c),w=!1,r(_)}}}function Sn(e){let t,n,i,a,c,u,f;return{c(){t=d("div"),n=d("label"),n.textContent="Out-of-range separator (?):",i=h(),a=d("div"),c=d("input"),b(n,"title","Helps tell you if notes are out-of-range, certain characters are restricted from use!"),b(n,"for","oor-separator"),b(c,"type","text"),b(c,"id","oor-separator"),E(a,"display","inline-flex")},m(r,l){s(r,t,l),o(t,n),o(t,i),o(t,a),o(a,c),v(c,e[0].oorSeparator),u||(f=[p(c,"input",e[16]),p(c,"input",e[17])],u=!0)},p(e,t){1&t&&c.value!==e[0].oorSeparator&&v(c,e[0].oorSeparator)},d(e){e&&l(t),u=!1,r(f)}}}function An(t){let n,r,i=t[20]+"";return{c(){n=d("option"),r=u(i),n.__value=t[20],n.value=n.__value},m(e,t){s(e,n,t),o(n,r)},p:e,d(e){e&&l(n)}}}function Cn(t){let n,r=t[1]&&_n(t);return{c(){r&&r.c(),n=f()},m(e,t){r&&r.m(e,t),s(e,n,t)},p(e,[t]){e[1]?r?r.p(e,t):(r=_n(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&l(n)}}}function Nn(e,t,n){N();let{show:r}=t,{hasMIDI:i=!1}=t,a=["Verdana","Tahoma","Dejavu Sans","Segoe UI","Helvetica","Lucida Console","Candara"],{settings:o={beats:4,quantize:35,classicChordOrder:!0,sequentialQuantize:!1,pShifts:"Start",pOors:"Inorder",oors:!0,tempoMarks:!1,bpmChanges:!0,minSpeedChange:10,oorSeparator:":",lbauto_atleast:4,font:a[0],capturingImage:!1,missingTempo:!1,bpm:120}}=t;return e.$$set=e=>{"show"in e&&n(1,r=e.show),"hasMIDI"in e&&n(2,i=e.hasMIDI),"settings"in e&&n(0,o=e.settings)},[o,r,i,a,function(){o.pShifts=k(this),n(0,o)},function(){o.pOors=k(this),n(0,o)},function(){o.beats=_(this.value),n(0,o)},function(){o.bpm=_(this.value),n(0,o)},function(){o.bpm=_(this.value),n(0,o)},function(){o.quantize=_(this.value),n(0,o)},function(){o.classicChordOrder=this.checked,n(0,o)},function(){o.sequentialQuantize=this.checked,n(0,o)},function(){o.oors=this.checked,n(0,o)},function(){o.tempoMarks=this.checked,n(0,o)},function(){o.bpmChanges=this.checked,n(0,o)},function(){o.minSpeedChange=_(this.value),n(0,o)},function(){o.oorSeparator=this.value,n(0,o)},e=>{[null,"0","","    "," ","'","[","]","(",")","{","}","_","-",".",","].concat(fn.split("")).includes(e.data?.toLowerCase()??null)?n(0,o.oorSeparator=":",o):n(0,o.oorSeparator=e.data[0],o)},function(){o.font=k(this),n(0,o)}]}class In extends ne{constructor(e){super(),te(this,e,Nn,Cn,a,{show:1,hasMIDI:2,settings:0})}}function Mn(t){let n,r,i,a,c,f,m,g,w,_,v,x,k,T=t[1].getTrackLength()+"";return{c(){n=d("div"),r=d("input"),a=h(),c=d("label"),f=u("Track "),m=u(t[2]),g=u(" ("),w=u(T),_=u(" events)"),b(r,"id",i="trackbox"+t[2]),b(r,"type","checkbox"),E(r,"transform","scale(1.5)"),b(c,"for",v="trackbox"+t[2]),b(c,"class","mx-2"),b(n,"id","track"),b(n,"class","flex flex-row align-middle")},m(e,i){s(e,n,i),o(n,r),r.checked=t[0],o(n,a),o(n,c),o(c,f),o(c,m),o(c,g),o(c,w),o(c,_),x||(k=p(r,"change",t[3]),x=!0)},p(e,[t]){4&t&&i!==(i="trackbox"+e[2])&&b(r,"id",i),1&t&&(r.checked=e[0]),4&t&&y(m,e[2]),2&t&&T!==(T=e[1].getTrackLength()+"")&&y(w,T),4&t&&v!==(v="trackbox"+e[2])&&b(c,"for",v)},i:e,o:e,d(e){e&&l(n),x=!1,k()}}}function zn(e,t,n){let{track:r,idx:i}=t,{selected:a=!1}=t;return e.$$set=e=>{"track"in e&&n(1,r=e.track),"idx"in e&&n(2,i=e.idx),"selected"in e&&n(0,a=e.selected)},[a,r,i,function(){a=this.checked,n(0,a)}]}class Dn extends ne{constructor(e){super(),te(this,e,zn,Mn,a,{track:1,idx:2,selected:0})}}const Rn={long:"white",quadruple:"#a3f0a3",whole:"#74da74",half:"#9ada5a",quarter:"#c0c05a",eighth:"#da7e5a",sixteenth:"#daa6a6",thirtysecond:"#ff1900",sixtyfourth:"#9c0f00"};function Un(e,t,n={}){return`<span style="color:${t};${n.underline?`border-bottom:2px solid ${t}`:""}">${e}</span>`}function On(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}function $n(t){let n,i,a,o=t[3]()+"";return{c(){n=d("span"),b(n,"class","chord-block svelte-gpk658"),E(n,"font-family",t[1].font)},m(e,r){s(e,n,r),n.innerHTML=o,i||(a=[p(n,"contextmenu",m(t[7])),p(n,"mousedown",g(t[8]))],i=!0)},p(e,[t]){2&t&&E(n,"font-family",e[1].font)},i:e,o:e,d(e){e&&l(n),i=!1,r(a)}}}On(".chord-block.svelte-gpk658{all:unset}.chord-block.svelte-gpk658:hover{background-color:#3d3a42;cursor:pointer}.chord-block.svelte-gpk658:active{all:unset}");const Pn="rgba(97, 97, 97, 50)";function Fn(e,t,n){const r=N();let{index:i}=t,{chord:a}=t,{next:o}=t,{selected:s}=t,{settings:l}=t;function c(){let e=a.notes[0].tempo/1e3,t=o.notes[0].playTime-a.notes[0].playTime;t-=.5;let n=Rn.long;return t<e/16?n=Rn.sixtyfourth:t<e/8?n=Rn.thirtysecond:t<e/4?n=Rn.sixteenth:t<e/2?n=Rn.eighth:t<e?n=Rn.quarter:t<2*e?n=Rn.half:t<4*e?n=Rn.whole:t<8*e?n=Rn.quadruple:t<16*e&&(n=Rn.long),n}return e.$$set=e=>{"index"in e&&n(0,i=e.index),"chord"in e&&n(4,a=e.chord),"next"in e&&n(5,o=e.next),"selected"in e&&n(6,s=e.selected),"settings"in e&&n(1,l=e.settings)},[i,l,r,function(){if(!a?.notes?.[0])return"";let e=`<span style="color:${c=o?c():Rn.long}; ${s?"background-color: "+Pn+";":""}">`,t=a.notes.length>1&&a.notes.find((e=>!0===e.valid));!1===l.oors&&a.notes.filter((e=>!1===e.outOfRange)).length<=1&&(t=!1),t&&(e+="[");for(const n of a.notes){if(!n.valid){e+="_";continue}let r=!0===n.outOfRange&&!0===l.oors;if(!0===r){let r=a.notes.filter((e=>!1===e.outOfRange)),i=a.notes.filter((e=>!0===e.outOfRange&&e.displayValue===e.value-1024)),o=a.notes.filter((e=>!0===e.outOfRange&&e.displayValue===e.value+1024));const s=n===i[0],d=n===i[i.length-1],u=!t&&n===o[0],h=t&&0===r.length&&0===i.length&&n===o[0],f=t&&r.length>0&&n===o[0];(s||u||h||f)&&(l.tempoMarks?e+=`${l.oorSeparator}${n.char}`:l.tempoMarks||(e+=`<span style="border-bottom: 2px solid ${c}">${n.char}</span>`)),l.tempoMarks&&d&&r.length>0&&(e+="'")}else r||n.outOfRange||(e+=Un(`${n.char}`,c))}t&&(e+="]");let n=a.notes[0].tempo/1e3,r=o?.notes[0]?.playTime-a.notes[0].playTime??void 0;return r-=.5,e+=l.tempoMarks?Un(function(e,t){return t<e/4?"-":t<e/2?" ":t<e?" - ":t<2*e?", ":t<3*e?"... ":t<4*e?".... ":"...... "}(n,r),c):" ",e+"</span>"},a,o,s,function(t){I.call(this,e,t)},e=>{switch(e.button){case 0:r("select",{index:+i,by:-1});break;case 1:e.preventDefault();break;case 2:r("select",{index:+i,by:1}),e.preventDefault()}}]}class Ln extends ne{constructor(e){super(),te(this,e,Fn,$n,a,{index:0,chord:4,next:5,selected:6,settings:1})}}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function Vn(e){let t=e.length;for(;--t>=0;)e[t]=0}const Bn=256,Hn=286,jn=30,Zn=15,qn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Gn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Yn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Kn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wn=new Array(576);Vn(Wn);const Qn=new Array(60);Vn(Qn);const Xn=new Array(512);Vn(Xn);const Jn=new Array(256);Vn(Jn);const er=new Array(29);Vn(er);const tr=new Array(jn);function nr(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let rr,ir,ar;function or(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Vn(tr);const sr=e=>e<256?Xn[e]:Xn[256+(e>>>7)],lr=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},cr=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,lr(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},dr=(e,t,n)=>{cr(e,n[2*t],n[2*t+1])},ur=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},hr=(e,t,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=Zn;i++)o=o+n[i-1]<<1,r[i]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=ur(r[t]++,t))}},fr=e=>{let t;for(t=0;t<Hn;t++)e.dyn_ltree[2*t]=0;for(t=0;t<jn;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},pr=e=>{e.bi_valid>8?lr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},mr=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},gr=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&mr(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!mr(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},wr=(e,t,n)=>{let r,i,a,o,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?dr(e,i,t):(a=Jn[i],dr(e,a+Bn+1,t),o=qn[a],0!==o&&(i-=er[a],cr(e,i,o)),r--,a=sr(r),dr(e,a,n),o=Gn[a],0!==o&&(r-=tr[a],cr(e,r,o)))}while(s<e.sym_next);dr(e,256,t)},br=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)gr(e,n,o);l=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],gr(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,gr(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,h,f,p,m=0;for(h=0;h<=Zn;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],h=n[2*n[2*d+1]+1]+1,h>l&&(h=l,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,f=0,d>=s&&(f=o[d-s]),p=n[2*d],e.opt_len+=p*(h+f),a&&(e.static_len+=p*(i[2*d+1]+f)));if(0!==m){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--c],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),hr(n,c,e.bl_count)},_r=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},yr=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{dr(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(dr(e,i,e.bl_tree),s--),dr(e,16,e.bl_tree),cr(e,s-3,2)):s<=10?(dr(e,17,e.bl_tree),cr(e,s-3,3)):(dr(e,18,e.bl_tree),cr(e,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}};let vr=!1;const Er=(e,t,n,r)=>{cr(e,0+(r?1:0),3),pr(e),lr(e,n),lr(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var xr=(e,t,n,r)=>{let i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Bn;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),br(e,e.l_desc),br(e,e.d_desc),o=(e=>{let t;for(_r(e,e.dyn_ltree,e.l_desc.max_code),_r(e,e.dyn_dtree,e.d_desc.max_code),br(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Kn[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?Er(e,t,n,r):4===e.strategy||a===i?(cr(e,2+(r?1:0),3),wr(e,Wn,Qn)):(cr(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(cr(e,t-257,5),cr(e,n-1,5),cr(e,r-4,4),i=0;i<r;i++)cr(e,e.bl_tree[2*Kn[i]+1],3);yr(e,e.dyn_ltree,t-1),yr(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),wr(e,e.dyn_ltree,e.dyn_dtree)),fr(e),r&&pr(e)},kr={_tr_init:e=>{vr||((()=>{let e,t,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for(er[r]=n,e=0;e<1<<qn[r];e++)Jn[n++]=r;for(Jn[n-1]=r,i=0,r=0;r<16;r++)for(tr[r]=i,e=0;e<1<<Gn[r];e++)Xn[i++]=r;for(i>>=7;r<jn;r++)for(tr[r]=i<<7,e=0;e<1<<Gn[r]-7;e++)Xn[256+i++]=r;for(t=0;t<=Zn;t++)a[t]=0;for(e=0;e<=143;)Wn[2*e+1]=8,e++,a[8]++;for(;e<=255;)Wn[2*e+1]=9,e++,a[9]++;for(;e<=279;)Wn[2*e+1]=7,e++,a[7]++;for(;e<=287;)Wn[2*e+1]=8,e++,a[8]++;for(hr(Wn,287,a),e=0;e<jn;e++)Qn[2*e+1]=5,Qn[2*e]=ur(e,5);rr=new nr(Wn,qn,257,Hn,Zn),ir=new nr(Qn,Gn,0,jn,Zn),ar=new nr(new Array(0),Yn,0,19,7)})(),vr=!0),e.l_desc=new or(e.dyn_ltree,rr),e.d_desc=new or(e.dyn_dtree,ir),e.bl_desc=new or(e.bl_tree,ar),e.bi_buf=0,e.bi_valid=0,fr(e)},_tr_stored_block:Er,_tr_flush_block:xr,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Jn[n]+Bn+1)]++,e.dyn_dtree[2*sr(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{cr(e,2,3),dr(e,256,Wn),(e=>{16===e.bi_valid?(lr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Tr=(e,t,n,r)=>{let i=65535&e|0,a=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};const Sr=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Ar=(e,t,n,r)=>{const i=Sr,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return-1^e},Cr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Nr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ir,_tr_stored_block:Mr,_tr_flush_block:zr,_tr_tally:Dr,_tr_align:Rr}=kr,{Z_NO_FLUSH:Ur,Z_PARTIAL_FLUSH:Or,Z_FULL_FLUSH:$r,Z_FINISH:Pr,Z_BLOCK:Fr,Z_OK:Lr,Z_STREAM_END:Vr,Z_STREAM_ERROR:Br,Z_DATA_ERROR:Hr,Z_BUF_ERROR:jr,Z_DEFAULT_COMPRESSION:Zr,Z_FILTERED:qr,Z_HUFFMAN_ONLY:Gr,Z_RLE:Yr,Z_FIXED:Kr,Z_DEFAULT_STRATEGY:Wr,Z_UNKNOWN:Qr,Z_DEFLATED:Xr}=Nr,Jr=286,ei=30,ti=19,ni=2*Jr+1,ri=15,ii=258,ai=262,oi=42,si=113,li=666,ci=(e,t)=>(e.msg=Cr[t],t),di=e=>2*e-(e>4?9:0),ui=e=>{let t=e.length;for(;--t>=0;)e[t]=0},hi=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let fi=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const pi=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},mi=(e,t)=>{zr(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,pi(e.strm)},gi=(e,t)=>{e.pending_buf[e.pending++]=t},wi=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},bi=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Tr(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Ar(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},_i=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-ai?e.strstart-(e.w_size-ai):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+ii;let f=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+o]===p&&c[n+o-1]===f&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(r=ii-(h-a),a=h-ii,r>o){if(e.match_start=t,o=r,r>=s)break;f=c[a+o-1],p=c[a+o]}}}while((t=u[t&d])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},yi=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ai)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),hi(e),r+=t),0===e.strm.avail_in)break;if(n=bi(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=fi(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=fi(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ai&&0!==e.strm.avail_in)},vi=(e,t)=>{let n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==Pr||t===Ur||n!==r+e.strm.avail_in))break;o=t===Pr&&n===r+e.strm.avail_in?1:0,Mr(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,pi(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(bi(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Ur&&t!==Pr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(bi(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||t===Pr)&&t!==Ur&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Pr&&0===e.strm.avail_in&&n===r?1:0,Mr(e,e.block_start,n,o),e.block_start+=n,pi(e.strm)),o?3:1)},Ei=(e,t)=>{let n,r;for(;;){if(e.lookahead<ai){if(yi(e),e.lookahead<ai&&t===Ur)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=fi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ai&&(e.match_length=_i(e,n)),e.match_length>=3)if(r=Dr(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=fi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=fi(e,e.ins_h,e.window[e.strstart+1]);else r=Dr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(mi(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Pr?(mi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(mi(e,!1),0===e.strm.avail_out)?1:2},xi=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ai){if(yi(e),e.lookahead<ai&&t===Ur)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=fi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ai&&(e.match_length=_i(e,n),e.match_length<=5&&(e.strategy===qr||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Dr(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=fi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(mi(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Dr(e,0,e.window[e.strstart-1]),r&&mi(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Dr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Pr?(mi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(mi(e,!1),0===e.strm.avail_out)?1:2};function ki(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Ti=[new ki(0,0,0,0,vi),new ki(4,4,8,4,Ei),new ki(4,5,16,8,Ei),new ki(4,6,32,32,Ei),new ki(4,4,16,16,xi),new ki(8,16,32,32,xi),new ki(8,16,128,128,xi),new ki(8,32,128,256,xi),new ki(32,128,258,1024,xi),new ki(32,258,258,4096,xi)];function Si(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ni),this.dyn_dtree=new Uint16Array(2*(2*ei+1)),this.bl_tree=new Uint16Array(2*(2*ti+1)),ui(this.dyn_ltree),ui(this.dyn_dtree),ui(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ri+1),this.heap=new Uint16Array(2*Jr+1),ui(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Jr+1),ui(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ai=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==oi&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==si&&t.status!==li?1:0},Ci=e=>{if(Ai(e))return ci(e,Br);e.total_in=e.total_out=0,e.data_type=Qr;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?oi:si,e.adler=2===t.wrap?0:1,t.last_flush=-2,Ir(t),Lr},Ni=e=>{const t=Ci(e);var n;return t===Lr&&((n=e.state).window_size=2*n.w_size,ui(n.head),n.max_lazy_match=Ti[n.level].max_lazy,n.good_match=Ti[n.level].good_length,n.nice_match=Ti[n.level].nice_length,n.max_chain_length=Ti[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Ii=(e,t,n,r,i,a)=>{if(!e)return Br;let o=1;if(t===Zr&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Xr||r<8||r>15||t<0||t>9||a<0||a>Kr||8===r&&1!==o)return ci(e,Br);8===r&&(r=9);const s=new Si;return e.state=s,s.strm=e,s.status=oi,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=n,Ni(e)};var Mi=(e,t)=>{if(Ai(e)||t>Fr||t<0)return e?ci(e,Br):Br;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===li&&t!==Pr)return ci(e,0===e.avail_out?jr:Br);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(pi(e),0===e.avail_out)return n.last_flush=-1,Lr}else if(0===e.avail_in&&di(t)<=di(r)&&t!==Pr)return ci(e,jr);if(n.status===li&&0!==e.avail_in)return ci(e,jr);if(n.status===oi&&0===n.wrap&&(n.status=si),n.status===oi){let t=Xr+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Gr||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,wi(n,t),0!==n.strstart&&(wi(n,e.adler>>>16),wi(n,65535&e.adler)),e.adler=1,n.status=si,pi(e),0!==n.pending)return n.last_flush=-1,Lr}if(57===n.status)if(e.adler=0,gi(n,31),gi(n,139),gi(n,8),n.gzhead)gi(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),gi(n,255&n.gzhead.time),gi(n,n.gzhead.time>>8&255),gi(n,n.gzhead.time>>16&255),gi(n,n.gzhead.time>>24&255),gi(n,9===n.level?2:n.strategy>=Gr||n.level<2?4:0),gi(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(gi(n,255&n.gzhead.extra.length),gi(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Ar(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(gi(n,0),gi(n,0),gi(n,0),gi(n,0),gi(n,0),gi(n,9===n.level?2:n.strategy>=Gr||n.level<2?4:0),gi(n,3),n.status=si,pi(e),0!==n.pending)return n.last_flush=-1,Lr;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ar(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,pi(e),0!==n.pending)return n.last_flush=-1,Lr;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ar(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Ar(e.adler,n.pending_buf,n.pending-r,r)),pi(e),0!==n.pending)return n.last_flush=-1,Lr;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,gi(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Ar(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Ar(e.adler,n.pending_buf,n.pending-r,r)),pi(e),0!==n.pending)return n.last_flush=-1,Lr;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,gi(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Ar(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(pi(e),0!==n.pending))return n.last_flush=-1,Lr;gi(n,255&e.adler),gi(n,e.adler>>8&255),e.adler=0}if(n.status=si,pi(e),0!==n.pending)return n.last_flush=-1,Lr}if(0!==e.avail_in||0!==n.lookahead||t!==Ur&&n.status!==li){let r=0===n.level?vi(n,t):n.strategy===Gr?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(yi(e),0===e.lookahead)){if(t===Ur)return 1;break}if(e.match_length=0,n=Dr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(mi(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Pr?(mi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(mi(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Yr?((e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=ii){if(yi(e),e.lookahead<=ii&&t===Ur)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+ii;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=ii-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Dr(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Dr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(mi(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Pr?(mi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(mi(e,!1),0===e.strm.avail_out)?1:2})(n,t):Ti[n.level].func(n,t);if(3!==r&&4!==r||(n.status=li),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Lr;if(2===r&&(t===Or?Rr(n):t!==Fr&&(Mr(n,0,0,!1),t===$r&&(ui(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),pi(e),0===e.avail_out))return n.last_flush=-1,Lr}return t!==Pr?Lr:n.wrap<=0?Vr:(2===n.wrap?(gi(n,255&e.adler),gi(n,e.adler>>8&255),gi(n,e.adler>>16&255),gi(n,e.adler>>24&255),gi(n,255&e.total_in),gi(n,e.total_in>>8&255),gi(n,e.total_in>>16&255),gi(n,e.total_in>>24&255)):(wi(n,e.adler>>>16),wi(n,65535&e.adler)),pi(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Lr:Vr)},zi={deflateInit:(e,t)=>Ii(e,t,Xr,15,8,Wr),deflateInit2:Ii,deflateReset:Ni,deflateResetKeep:Ci,deflateSetHeader:(e,t)=>Ai(e)||2!==e.state.wrap?Br:(e.state.gzhead=t,Lr),deflate:Mi,deflateEnd:e=>{if(Ai(e))return Br;const t=e.state.status;return e.state=null,t===si?ci(e,Hr):Lr},deflateSetDictionary:(e,t)=>{let n=t.length;if(Ai(e))return Br;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==oi||r.lookahead)return Br;if(1===i&&(e.adler=Tr(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(ui(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,yi(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=fi(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,yi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Lr},deflateInfo:"pako deflate (from Nodeca project)"};const Di=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ri={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Di(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}};let Ui=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ui=!1}const Oi=new Uint8Array(256);for(let e=0;e<256;e++)Oi[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Oi[254]=Oi[254]=1;var $i={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=Oi[t];if(o>4)a[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ui)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Oi[e[n]]>t?n:t}};var Pi=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Fi=Object.prototype.toString,{Z_NO_FLUSH:Li,Z_SYNC_FLUSH:Vi,Z_FULL_FLUSH:Bi,Z_FINISH:Hi,Z_OK:ji,Z_STREAM_END:Zi,Z_DEFAULT_COMPRESSION:qi,Z_DEFAULT_STRATEGY:Gi,Z_DEFLATED:Yi}=Nr;function Ki(e){this.options=Ri.assign({level:qi,method:Yi,chunkSize:16384,windowBits:15,memLevel:8,strategy:Gi},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pi,this.strm.avail_out=0;let n=zi.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ji)throw new Error(Cr[n]);if(t.header&&zi.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?$i.string2buf(t.dictionary):"[object ArrayBuffer]"===Fi.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=zi.deflateSetDictionary(this.strm,e),n!==ji)throw new Error(Cr[n]);this._dict_set=!0}}function Wi(e,t){const n=new Ki(t);if(n.push(e,!0),n.err)throw n.msg||Cr[n.err];return n.result}Ki.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Hi:Li,"string"==typeof e?n.input=$i.string2buf(e):"[object ArrayBuffer]"===Fi.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Vi||a===Bi)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=zi.deflate(n,a),i===Zi)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=zi.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ji;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Ki.prototype.onData=function(e){this.chunks.push(e)},Ki.prototype.onEnd=function(e){e===ji&&(this.result=Ri.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Qi={Deflate:Ki,deflate:Wi,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Wi(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Wi(e,t)},constants:Nr};const Xi=16209;var Ji=function(e,t){let n,r,i,a,o,s,l,c,d,u,h,f,p,m,g,w,b,_,y,v,E,x,k,T;const S=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=S.dmax,l=S.wsize,c=S.whave,d=S.wnext,u=S.window,h=S.hold,f=S.bits,p=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,w=(1<<S.distbits)-1;e:do{f<15&&(h+=k[n++]<<f,f+=8,h+=k[n++]<<f,f+=8),b=p[h&g];t:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,0===_)T[i++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=p[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=Xi;break e}y=65535&b,_&=15,_&&(f<_&&(h+=k[n++]<<f,f+=8),y+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=k[n++]<<f,f+=8,h+=k[n++]<<f,f+=8),b=m[h&w];n:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,!(16&_)){if(0==(64&_)){b=m[(65535&b)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",S.mode=Xi;break e}if(v=65535&b,_&=15,f<_&&(h+=k[n++]<<f,f+=8,f<_&&(h+=k[n++]<<f,f+=8)),v+=h&(1<<_)-1,v>s){e.msg="invalid distance too far back",S.mode=Xi;break e}if(h>>>=_,f-=_,_=i-a,v>_){if(_=v-_,_>c&&S.sane){e.msg="invalid distance too far back",S.mode=Xi;break e}if(E=0,x=u,0===d){if(E+=l-_,_<y){y-=_;do{T[i++]=u[E++]}while(--_);E=i-v,x=T}}else if(d<_){if(E+=l+d-_,_-=d,_<y){y-=_;do{T[i++]=u[E++]}while(--_);if(E=0,d<y){_=d,y-=_;do{T[i++]=u[E++]}while(--_);E=i-v,x=T}}}else if(E+=d-_,_<y){y-=_;do{T[i++]=u[E++]}while(--_);E=i-v,x=T}for(;y>2;)T[i++]=x[E++],T[i++]=x[E++],T[i++]=x[E++],y-=3;y&&(T[i++]=x[E++],y>1&&(T[i++]=x[E++]))}else{E=i-v;do{T[i++]=T[E++],T[i++]=T[E++],T[i++]=T[E++],y-=3}while(y>2);y&&(T[i++]=T[E++],y>1&&(T[i++]=T[E++]))}break}}break}}while(n<r&&i<o);y=f>>3,n-=y,f-=y<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),S.hold=h,S.bits=f};const ea=15,ta=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),na=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ra=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ia=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var aa=(e,t,n,r,i,a,o,s)=>{const l=s.bits;let c,d,u,h,f,p,m=0,g=0,w=0,b=0,_=0,y=0,v=0,E=0,x=0,k=0,T=null;const S=new Uint16Array(16),A=new Uint16Array(16);let C,N,I,M=null;for(m=0;m<=ea;m++)S[m]=0;for(g=0;g<r;g++)S[t[n+g]]++;for(_=l,b=ea;b>=1&&0===S[b];b--);if(_>b&&(_=b),0===b)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(w=1;w<b&&0===S[w];w++);for(_<w&&(_=w),E=1,m=1;m<=ea;m++)if(E<<=1,E-=S[m],E<0)return-1;if(E>0&&(0===e||1!==b))return-1;for(A[1]=0,m=1;m<ea;m++)A[m+1]=A[m]+S[m];for(g=0;g<r;g++)0!==t[n+g]&&(o[A[t[n+g]]++]=g);if(0===e?(T=M=o,p=20):1===e?(T=ta,M=na,p=257):(T=ra,M=ia,p=0),k=0,g=0,m=w,f=a,y=_,v=0,u=-1,x=1<<_,h=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){C=m-v,o[g]+1<p?(N=0,I=o[g]):o[g]>=p?(N=M[o[g]-p],I=T[o[g]-p]):(N=96,I=0),c=1<<m-v,d=1<<y,w=d;do{d-=c,i[f+(k>>v)+d]=C<<24|N<<16|I|0}while(0!==d);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,g++,0==--S[m]){if(m===b)break;m=t[n+o[g]]}if(m>_&&(k&h)!==u){for(0===v&&(v=_),f+=w,y=m-v,E=1<<y;y+v<b&&(E-=S[y+v],!(E<=0));)y++,E<<=1;if(x+=1<<y,1===e&&x>852||2===e&&x>592)return 1;u=k&h,i[u]=_<<24|y<<16|f-a|0}}return 0!==k&&(i[f+k]=m-v<<24|64<<16|0),s.bits=_,0};const{Z_FINISH:oa,Z_BLOCK:sa,Z_TREES:la,Z_OK:ca,Z_STREAM_END:da,Z_NEED_DICT:ua,Z_STREAM_ERROR:ha,Z_DATA_ERROR:fa,Z_MEM_ERROR:pa,Z_BUF_ERROR:ma,Z_DEFLATED:ga}=Nr,wa=16180,ba=16190,_a=16191,ya=16192,va=16194,Ea=16199,xa=16200,ka=16206,Ta=16209,Sa=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Aa(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ca=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<wa||t.mode>16211?1:0},Na=e=>{if(Ca(e))return ha;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=wa,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ca},Ia=e=>{if(Ca(e))return ha;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Na(e)},Ma=(e,t)=>{let n;if(Ca(e))return ha;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ha:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Ia(e))},za=(e,t)=>{if(!e)return ha;const n=new Aa;e.state=n,n.strm=e,n.window=null,n.mode=wa;const r=Ma(e,t);return r!==ca&&(e.state=null),r};let Da,Ra,Ua=!0;const Oa=e=>{if(Ua){Da=new Int32Array(512),Ra=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(aa(1,e.lens,0,288,Da,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;aa(2,e.lens,0,32,Ra,0,e.work,{bits:5}),Ua=!1}e.lencode=Da,e.lenbits=9,e.distcode=Ra,e.distbits=5},$a=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Pa=(e,t)=>{let n,r,i,a,o,s,l,c,d,u,h,f,p,m,g,w,b,_,y,v,E,x,k=0;const T=new Uint8Array(4);let S,A;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ca(e)||!e.output||!e.input&&0!==e.avail_in)return ha;n=e.state,n.mode===_a&&(n.mode=ya),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,d=n.bits,u=s,h=l,x=ca;e:for(;;)switch(n.mode){case wa:if(0===n.wrap){n.mode=ya;break}for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=Ar(n.check,T,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Ta;break}if((15&c)!==ga){e.msg="unknown compression method",n.mode=Ta;break}if(c>>>=4,d-=4,E=8+(15&c),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=Ta;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:_a,c=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==ga){e.msg="unknown compression method",n.mode=Ta;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Ta;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Ar(n.check,T,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=Ar(n.check,T,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Ar(n.check,T,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Ar(n.check,T,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>s&&(f=s),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),E)),512&n.flags&&4&n.wrap&&(n.check=Ar(n.check,r,f,a)),s-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;f=0;do{E=r[a+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Ar(n.check,r,f,a)),s-=f,a+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;f=0;do{E=r[a+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Ar(n.check,r,f,a)),s-=f,a+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Ta;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=_a;break;case 16189:for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}e.adler=n.check=Sa(c),c=0,d=0,n.mode=ba;case ba:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,ua;e.adler=n.check=1,n.mode=_a;case _a:if(t===sa||t===la)break e;case ya:if(n.last){c>>>=7&d,d-=7&d,n.mode=ka;break}for(;d<3;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(Oa(n),n.mode=Ea,t===la){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Ta}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ta;break}if(n.length=65535&c,c=0,d=0,n.mode=va,t===la)break e;case va:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;i.set(r.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,n.length-=f;break}n.mode=_a;break;case 16196:for(;d<14;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ta;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.lens[C[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},x=aa(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,x){e.msg="invalid code lengths set",n.mode=Ta;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,w=k>>>16&255,b=65535&k,!(g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(b<16)c>>>=g,d-=g,n.lens[n.have++]=b;else{if(16===b){for(A=g+2;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(c>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=Ta;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===b){for(A=g+3;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,E=0,f=3+(7&c),c>>>=3,d-=3}else{for(A=g+7;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,E=0,f=11+(127&c),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ta;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===Ta)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Ta;break}if(n.lenbits=9,S={bits:n.lenbits},x=aa(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,x){e.msg="invalid literal/lengths set",n.mode=Ta;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},x=aa(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,x){e.msg="invalid distances set",n.mode=Ta;break}if(n.mode=Ea,t===la)break e;case Ea:n.mode=xa;case xa:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,Ji(e,h),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,d=n.bits,n.mode===_a&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,w=k>>>16&255,b=65535&k,!(g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(w&&0==(240&w)){for(_=g,y=w,v=b;k=n.lencode[v+((c&(1<<_+y)-1)>>_)],g=k>>>24,w=k>>>16&255,b=65535&k,!(_+g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=_,d-=_,n.back+=_}if(c>>>=g,d-=g,n.back+=g,n.length=b,0===w){n.mode=16205;break}if(32&w){n.back=-1,n.mode=_a;break}if(64&w){e.msg="invalid literal/length code",n.mode=Ta;break}n.extra=15&w,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;k=n.distcode[c&(1<<n.distbits)-1],g=k>>>24,w=k>>>16&255,b=65535&k,!(g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(0==(240&w)){for(_=g,y=w,v=b;k=n.distcode[v+((c&(1<<_+y)-1)>>_)],g=k>>>24,w=k>>>16&255,b=65535&k,!(_+g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=_,d-=_,n.back+=_}if(c>>>=g,d-=g,n.back+=g,64&w){e.msg="invalid distance code",n.mode=Ta;break}n.offset=b,n.extra=15&w,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ta;break}n.mode=16204;case 16204:if(0===l)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ta;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[o++]=m[p++]}while(--f);0===n.length&&(n.mode=xa);break;case 16205:if(0===l)break e;i[o++]=n.length,l--,n.mode=xa;break;case ka:if(n.wrap){for(;d<32;){if(0===s)break e;s--,c|=r[a++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Ar(n.check,i,h,o-h):Tr(n.check,i,h,o-h)),h=l,4&n.wrap&&(n.flags?c:Sa(c))!==n.check){e.msg="incorrect data check",n.mode=Ta;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Ta;break}c=0,d=0}n.mode=16208;case 16208:x=da;break e;case Ta:x=fa;break e;case 16210:return pa;default:return ha}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<Ta&&(n.mode<ka||t!==oa))&&$a(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Ar(n.check,i,h,e.next_out-h):Tr(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===_a?128:0)+(n.mode===Ea||n.mode===va?256:0),(0===u&&0===h||t===oa)&&x===ca&&(x=ma),x},Fa={inflateReset:Ia,inflateReset2:Ma,inflateResetKeep:Na,inflateInit:e=>za(e,15),inflateInit2:za,inflate:Pa,inflateEnd:e=>{if(Ca(e))return ha;let t=e.state;return t.window&&(t.window=null),e.state=null,ca},inflateGetHeader:(e,t)=>{if(Ca(e))return ha;const n=e.state;return 0==(2&n.wrap)?ha:(n.head=t,t.done=!1,ca)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return Ca(e)?ha:(r=e.state,0!==r.wrap&&r.mode!==ba?ha:r.mode===ba&&(i=1,i=Tr(i,t,n,0),i!==r.check)?fa:(a=$a(e,t,n,n),a?(r.mode=16210,pa):(r.havedict=1,ca)))},inflateInfo:"pako inflate (from Nodeca project)"};var La=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Va=Object.prototype.toString,{Z_NO_FLUSH:Ba,Z_FINISH:Ha,Z_OK:ja,Z_STREAM_END:Za,Z_NEED_DICT:qa,Z_STREAM_ERROR:Ga,Z_DATA_ERROR:Ya,Z_MEM_ERROR:Ka}=Nr;function Wa(e){this.options=Ri.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pi,this.strm.avail_out=0;let n=Fa.inflateInit2(this.strm,t.windowBits);if(n!==ja)throw new Error(Cr[n]);if(this.header=new La,Fa.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=$i.string2buf(t.dictionary):"[object ArrayBuffer]"===Va.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Fa.inflateSetDictionary(this.strm,t.dictionary),n!==ja)))throw new Error(Cr[n])}function Qa(e,t){const n=new Wa(t);if(n.push(e),n.err)throw n.msg||Cr[n.err];return n.result}Wa.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Ha:Ba,"[object ArrayBuffer]"===Va.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Fa.inflate(n,o),a===qa&&i&&(a=Fa.inflateSetDictionary(n,i),a===ja?a=Fa.inflate(n,o):a===Ya&&(a=qa));n.avail_in>0&&a===Za&&n.state.wrap>0&&0!==e[n.next_in];)Fa.inflateReset(n),a=Fa.inflate(n,o);switch(a){case Ga:case Ya:case qa:case Ka:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===Za))if("string"===this.options.to){let e=$i.utf8border(n.output,n.next_out),t=n.next_out-e,i=$i.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==ja||0!==s){if(a===Za)return a=Fa.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Wa.prototype.onData=function(e){this.chunks.push(e)},Wa.prototype.onEnd=function(e){e===ja&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ri.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Xa={Inflate:Wa,inflate:Qa,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Qa(e,t)},ungzip:Qa,constants:Nr};const{Deflate:Ja,deflate:eo,deflateRaw:to,gzip:no}=Qi,{Inflate:ro,inflate:io,inflateRaw:ao,ungzip:oo}=Xa;var so={Deflate:Ja,deflate:eo,deflateRaw:to,gzip:no,Inflate:ro,inflate:io,inflateRaw:ao,ungzip:oo,constants:Nr};const lo="pieces";async function co(e){return so.deflate(JSON.stringify(e),{level:9})}function uo(e){return JSON.parse(so.inflate(e,{to:"string"}),{level:9})}function ho(){let e,t=0;for(let n in localStorage)localStorage.hasOwnProperty(n)&&(e=localStorage[n].length+n.length,t+=e);return(t/1024).toFixed(2)}const fo={getAll:()=>{let e=JSON.parse(localStorage.getItem(lo));return e||(e=[]),e},add:async(e,t,n,r=!1)=>{let i=fo.getAll().filter((t=>t.name!=e));i.unshift(await async function(e,t,n,r=!1){return console.log(r),{name:e,settings:t,updated:Date.now(),data:r?n:await co(n)}}(e,t,n,r));try{localStorage.setItem(lo,JSON.stringify(i))}catch({error:a,message:o}){"QuotaExceededError"==a||"The quota has been exceeded."==o?(console.log("Quota exceeded, dropping: ",i.pop()),i.shift(),localStorage.setItem(lo,JSON.stringify(i)),fo.add(e,t,n,r)):console.error(a,o)}},export:async e=>fo.getAll().filter((t=>t.name===e))[0],delete:e=>{let t=fo.getAll().filter((t=>t.name!=e));localStorage.setItem(lo,JSON.stringify(t))}};function po(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}const mo=6048e5,go=864e5,wo=6e4,bo=36e5,_o=3600,yo=60,vo=24*_o,Eo=7*vo,xo=365.2425*vo,ko=xo/12,To=3*ko;let So={};function Ao(){return So}function Co(e,t){const n=Ao(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=po(e),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function No(e){const t=po(e);return t.setHours(0,0,0,0),t}function Io(e){const t=po(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Mo(e,t){const n=No(e),r=No(t),i=+n-Io(n),a=+r-Io(r);return Math.round((i-a)/go)}function zo(e,t){const n=po(e),r=po(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function Do(e){const t=po(e);return Math.trunc(t.getMonth()/3)+1}function Ro(e,t){const n=po(e),r=po(t);return 4*(n.getFullYear()-r.getFullYear())+(Do(n)-Do(r))}function Uo(e,t,n){const r=Co(e,n),i=Co(t,n),a=+r-Io(r),o=+i-Io(i);return Math.round((a-o)/mo)}function Oo(e,t){const n=po(e),r=po(t);return n.getFullYear()-r.getFullYear()}function $o(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function Po(e,t){return+po(e)-+po(t)}function Fo(e,t,n){const r=Po(e,t)/bo;return $o(n?.roundingMethod)(r)}function Lo(e,t,n){const r=Po(e,t)/wo;return $o(n?.roundingMethod)(r)}function Vo(e,t,n){const r=Po(e,t)/1e3;return $o(n?.roundingMethod)(r)}function Bo(e,t,n){let r,i=0;const a=po(e),o=po(t);if(n?.unit)r=n?.unit,"second"===r?i=Vo(a,o):"minute"===r?i=Lo(a,o):"hour"===r?i=Fo(a,o):"day"===r?i=Mo(a,o):"week"===r?i=Uo(a,o):"month"===r?i=zo(a,o):"quarter"===r?i=Ro(a,o):"year"===r&&(i=Oo(a,o));else{const e=Vo(a,o);Math.abs(e)<yo?(i=Vo(a,o),r="second"):Math.abs(e)<_o?(i=Lo(a,o),r="minute"):Math.abs(e)<vo&&Math.abs(Mo(a,o))<1?(i=Fo(a,o),r="hour"):Math.abs(e)<Eo&&(i=Mo(a,o))&&Math.abs(i)<7?r="day":Math.abs(e)<ko?(i=Uo(a,o),r="week"):Math.abs(e)<To?(i=zo(a,o),r="month"):Math.abs(e)<xo&&Ro(a,o)<4?(i=Ro(a,o),r="quarter"):(i=Oo(a,o),r="year")}return new Intl.RelativeTimeFormat(n?.locale,{localeMatcher:n?.localeMatcher,numeric:n?.numeric||"auto",style:n?.style}).format(i,r)}function Ho(t){let n,i,a,c,f,g,w,_,v,x,k,T,S,A,C,N,I,M,z,D,R,U,O,$=t[0].name+"",P=t[0].name+"",F=Bo(t[0].updated,Date.now())+"",L=Math.round(11.2*Object.keys(t[0].data).length/1024)+"";return{c(){n=d("dialog"),i=d("form"),a=d("p"),c=u("Are you sure that you'd like to delete "),f=u($),g=u(" from your history?"),w=h(),_=d("div"),_.innerHTML='<button formmethod="dialog" class="p-1" value="cancel">Cancel</button> \n            <button formmethod="dialog" class="p-1" value="export-and-delete">Export and Delete</button> \n            <button formmethod="dialog" class="p-1" value="delete">Delete</button>',v=h(),x=d("button"),k=d("div"),T=u(P),S=h(),A=d("hr"),C=h(),N=d("div"),I=u(F),M=u(" - "),z=u(L),D=u(" kb"),b(a,"class","p-3 text-center"),b(_,"class","mx-2 mb-2 flex gap-2 w-full justify-center"),b(n,"class","rounded-lg overflow-hidden"),E(k,"white-space","nowrap"),E(k,"text-overflow","ellipsis"),E(k,"overflow","hidden"),E(A,"border-top","1px solid dimgrey",1),E(A,"width","100%"),b(A,"class","m-1"),b(N,"class","italic"),b(x,"title",R=t[0].name),b(x,"class","max-w-64 text-dimgrey justify-center align-middle text-nowrap text-ellipsis overflow-hidden"),E(x,"background","none",1),E(x,"border","1px solid dimgrey")},m(e,r){s(e,n,r),o(n,i),o(i,a),o(a,c),o(a,f),o(a,g),o(i,w),o(i,_),t[6](n),s(e,v,r),s(e,x,r),o(x,k),o(k,T),t[7](k),o(x,S),o(x,A),o(x,C),o(x,N),o(N,I),o(N,M),o(N,z),o(N,D),U||(O=[p(n,"close",t[5]),p(x,"click",t[3]),p(x,"contextmenu",m(t[4]))],U=!0)},p(e,[t]){1&t&&$!==($=e[0].name+"")&&y(f,$),1&t&&P!==(P=e[0].name+"")&&y(T,P),1&t&&F!==(F=Bo(e[0].updated,Date.now())+"")&&y(I,F),1&t&&L!==(L=Math.round(11.2*Object.keys(e[0].data).length/1024)+"")&&y(z,L),1&t&&R!==(R=e[0].name)&&b(x,"title",R)},i:e,o:e,d(e){e&&l(n),t[6](null),e&&l(v),e&&l(x),t[7](null),U=!1,r(O)}}}function jo(e,t,n){let r,i,a=N(),{piece:o}=t;return e.$$set=e=>{"piece"in e&&n(0,o=e.piece)},[o,r,i,()=>{a("load",{project:o})},()=>{i.showModal()},()=>{"export-and-delete"==i.returnValue?(a("export"),fo.delete(o.name),a("refresh")):"delete"==i.returnValue&&(fo.delete(o.name),a("refresh"))},function(e){z[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},function(e){z[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Zo extends ne{constructor(e){super(),te(this,e,jo,Ho,a,{piece:0})}}function qo(e){let t;return{c(){t=u("Download Image")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function Go(e){let t;return{c(){t=u("Please Wait...")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function Yo(e){let t;return{c(){t=u("Copy Image")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function Ko(e){let t;return{c(){t=u("Please Wait...")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function Wo(t){let n,i,a,c,u,f,m,g,w,_,y,v;function E(e,t){return e[0].capturingImage?Go:qo}let x=E(t),k=x(t),T="undefined"!=typeof ClipboardItem&&function(e){let t,n,r,i;function a(e,t){return e[0].capturingImage?Ko:Yo}let o=a(e),c=o(e);return{c(){t=d("button"),c.c(),t.disabled=n=e[0].capturingImage},m(n,a){s(n,t,a),c.m(t,null),r||(i=p(t,"click",e[4]),r=!0)},p(e,r){o!==(o=a(e))&&(c.d(1),c=o(e),c&&(c.c(),c.m(t,null))),1&r&&n!==(n=e[0].capturingImage)&&(t.disabled=n)},d(e){e&&l(t),c.d(),r=!1,i()}}}(t);return{c(){n=d("div"),i=d("button"),i.textContent="Copy Text",a=h(),c=d("button"),k.c(),f=h(),T&&T.c(),m=h(),g=d("button"),g.textContent="Copy Transposes",w=h(),_=d("button"),_.textContent="Export",c.disabled=u=t[0].capturingImage,b(n,"class","flex flex-row gap-1")},m(e,r){s(e,n,r),o(n,i),o(n,a),o(n,c),k.m(c,null),o(n,f),T&&T.m(n,null),o(n,m),o(n,g),o(n,w),o(n,_),y||(v=[p(i,"click",t[2]),p(c,"click",t[3]),p(g,"click",t[5]),p(_,"click",t[6])],y=!0)},p(e,[t]){x!==(x=E(e))&&(k.d(1),k=x(e),k&&(k.c(),k.m(c,null))),1&t&&u!==(u=e[0].capturingImage)&&(c.disabled=u),"undefined"!=typeof ClipboardItem&&T.p(e,t)},i:e,o:e,d(e){e&&l(n),k.d(),T&&T.d(),y=!1,r(v)}}}function Qo(e,t,n){let{settings:r}=t,i=N();return e.$$set=e=>{"settings"in e&&n(0,r=e.settings)},[r,i,()=>i("copyText"),()=>i("captureSheetAsImage",{mode:"download"}),()=>i("captureSheetAsImage",{mode:"copy"}),()=>i("copyTransposes"),()=>i("export")]}class Xo extends ne{constructor(e){super(),te(this,e,Qo,Wo,a,{settings:0})}}On("/*\n! tailwindcss v3.4.3 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}.container {\n  width: 100%;\n}@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}.absolute {\n  position: absolute;\n}.relative {\n  position: relative;\n}.sticky {\n  position: sticky;\n}.top-0 {\n  top: 0px;\n}.z-40 {\n  z-index: 40;\n}.z-50 {\n  z-index: 50;\n}.row-auto {\n  grid-row: auto;\n}.m-1 {\n  margin: 0.25rem;\n}.mx-1 {\n  margin-left: 0.25rem;\n  margin-right: 0.25rem;\n}.mx-2 {\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n}.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}.mb-2 {\n  margin-bottom: 0.5rem;\n}.mt-3 {\n  margin-top: 0.75rem;\n}.box-border {\n  box-sizing: border-box;\n}.block {\n  display: block;\n}.flex {\n  display: flex;\n}.inline-flex {\n  display: inline-flex;\n}.hidden {\n  display: none;\n}.h-full {\n  height: 100%;\n}.w-16 {\n  width: 4rem;\n}.w-3\\/4 {\n  width: 75%;\n}.w-32 {\n  width: 8rem;\n}.w-\\[58em\\] {\n  width: 58em;\n}.w-full {\n  width: 100%;\n}.max-w-64 {\n  max-width: 16rem;\n}.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}.cursor-pointer {\n  cursor: pointer;\n}.flex-row {\n  flex-direction: row;\n}.flex-col {\n  flex-direction: column;\n}.flex-wrap {\n  flex-wrap: wrap;\n}.content-center {\n  align-content: center;\n}.items-start {\n  align-items: flex-start;\n}.items-center {\n  align-items: center;\n}.items-stretch {\n  align-items: stretch;\n}.justify-center {\n  justify-content: center;\n}.justify-around {\n  justify-content: space-around;\n}.gap-1 {\n  gap: 0.25rem;\n}.gap-12 {\n  gap: 3rem;\n}.gap-2 {\n  gap: 0.5rem;\n}.gap-4 {\n  gap: 1rem;\n}.gap-6 {\n  gap: 1.5rem;\n}.overflow-hidden {\n  overflow: hidden;\n}.overflow-clip {\n  overflow: clip;\n}.overflow-y-auto {\n  overflow-y: auto;\n}.text-ellipsis {\n  text-overflow: ellipsis;\n}.text-nowrap {\n  text-wrap: nowrap;\n}.rounded-lg {\n  border-radius: 0.5rem;\n}.rounded-xl {\n  border-radius: 0.75rem;\n}.border {\n  border-width: 1px;\n}.p-1 {\n  padding: 0.25rem;\n}.p-3 {\n  padding: 0.75rem;\n}.p-4 {\n  padding: 1rem;\n}.text-center {\n  text-align: center;\n}.align-middle {\n  vertical-align: middle;\n}.text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}.text-3xl {\n  font-size: 1.875rem;\n  line-height: 2.25rem;\n}.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}.lowercase {\n  text-transform: lowercase;\n}.italic {\n  font-style: italic;\n}.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity));\n}.underline {\n  text-decoration-line: underline;\n}.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}.transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}");const{document:Jo}=K;function es(e,t,n){const r=e.slice();return r[78]=t[n][0],r[79]=t[n][1],r}function ts(e,t,n){const r=e.slice();return r[84]=t[n],r[85]=t,r[86]=n,r}function ns(e,t,n){const r=e.slice();return r[87]=t[n],r}function rs(e){let t,n,r,i,a,f,p,m,g,w,_,v,x;function k(e,t){return 32768&t[0]&&(i=null),null==i&&(i=!(1!=e[15].length||!e[15][0].name.endsWith("(sample)"))),i?as:is}let T=k(e,[-1,-1,-1]),S=T(e),A=e[15],C=[];for(let t=0;t<A.length;t+=1)C[t]=os(ns(e,A,t));const N=e=>Y(C[e],1,1,(()=>{C[e]=null}));return{c(){t=d("hr"),n=h(),r=d("div"),S.c(),a=h(),f=d("div");for(let e=0;e<C.length;e+=1)C[e].c();p=h(),m=d("div"),g=u("Used ~"),w=u(e[6]),_=u(" / 5000 kB\n            "),v=d("span"),v.textContent="ⓘ",b(t,"class","w-[58em]"),E(t,"border","1px solid #a0a0a0"),b(f,"class","w-3/4 flex flex-wrap justify-center gap-2 overflow-clip text-ellipsis"),b(r,"class","flex flex-col items-center gap-6"),b(v,"title","The last entry (or multiple) will automatically be dropped if an autosave fails.\nYou can also right-click a saved sheet to manually delete it.\nIndividual sizes are an estimation, the total is correct.")},m(e,i){s(e,t,i),s(e,n,i),s(e,r,i),S.m(r,null),o(r,a),o(r,f);for(let e=0;e<C.length;e+=1)C[e].m(f,null);s(e,p,i),s(e,m,i),o(m,g),o(m,w),o(m,_),o(m,v),x=!0},p(e,t){if(T!==(T=k(e,t))&&(S.d(1),S=T(e),S&&(S.c(),S.m(r,a))),134250593&t[0]){let n;for(A=e[15],n=0;n<A.length;n+=1){const r=ns(e,A,n);C[n]?(C[n].p(r,t),G(C[n],1)):(C[n]=os(r),C[n].c(),G(C[n],1),C[n].m(f,null))}for(Z(),n=A.length;n<C.length;n+=1)N(n);q()}(!x||64&t[0])&&y(w,e[6])},i(e){if(!x){for(let e=0;e<A.length;e+=1)G(C[e]);x=!0}},o(e){C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)Y(C[e]);x=!1},d(e){e&&l(t),e&&l(n),e&&l(r),S.d(),c(C,e),e&&l(p),e&&l(m)}}}function is(e){let t;return{c(){t=d("p"),t.textContent="Or, continue one of your previous projects:",b(t,"class","text-white text-3xl")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function as(e){let t;return{c(){t=d("p"),t.textContent="Or, try this sample piece:",b(t,"class","text-white text-3xl")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function os(e){let t,n;return t=new Zo({props:{piece:e[87]}}),t.$on("load",e[45]),t.$on("refresh",e[46]),t.$on("export",(function(){return e[47](e[87])})),{c(){Q(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(n,r){e=n;const i={};32768&r[0]&&(i.piece=e[87]),t.$set(i)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function ss(e){let t,n,r,i,a,c,f,m,g;return{c(){t=d("p"),n=u("You are currently editing: "),r=u(e[7]),i=h(),a=d("button"),a.textContent="Import another MIDI/JSON file",c=h(),f=d("hr"),b(t,"class","mb-2"),b(f,"class","my-2 mx-1")},m(l,d){s(l,t,d),o(t,n),o(t,r),s(l,i,d),s(l,a,d),s(l,c,d),s(l,f,d),m||(g=p(a,"click",e[49]),m=!0)},p(e,t){128&t[0]&&y(r,e[7])},d(e){e&&l(t),e&&l(i),e&&l(a),e&&l(c),e&&l(f),m=!1,g()}}}function ls(t){let n,i,a,c,u,f,m,g,w,_,y,v,E,x,k,T,S;return{c(){n=d("div"),i=d("button"),i.textContent="Transpose selection down",a=h(),c=d("button"),c.textContent="Transpose selection up",u=h(),f=d("button"),f.textContent="Auto-transpose (single)",m=h(),g=d("button"),g.textContent="Auto-transpose (multi)",w=h(),_=d("div"),y=d("button"),y.textContent="Split selection",v=h(),E=d("button"),E.textContent="Join selection",x=h(),k=d("button"),k.textContent="Add a comment",b(i,"class","w-full block"),b(c,"class","w-full block"),b(n,"class","flex flex-row justify-around items-center gap-2"),b(y,"class","w-full block"),b(E,"class","w-full block"),b(_,"class","flex flex-row justify-around items-stretch gap-2")},m(e,r){s(e,n,r),o(n,i),o(n,a),o(n,c),s(e,u,r),s(e,f,r),s(e,m,r),s(e,g,r),s(e,w,r),s(e,_,r),o(_,y),o(_,v),o(_,E),s(e,x,r),s(e,k,r),T||(S=[p(i,"click",t[50]),p(c,"click",t[51]),p(f,"click",t[52]),p(g,"click",t[53]),p(y,"click",t[54]),p(E,"click",t[55]),p(k,"click",t[56])],T=!0)},p:e,d(e){e&&l(n),e&&l(u),e&&l(f),e&&l(m),e&&l(g),e&&l(w),e&&l(_),e&&l(x),e&&l(k),T=!1,r(S)}}}function cs(e){let t,n,r=e[10],i=[];for(let t=0;t<r.length;t+=1)i[t]=ds(ts(e,r,t));const a=e=>Y(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=f()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);s(e,t,r),n=!0},p(e,n){if(5120&n[0]){let o;for(r=e[10],o=0;o<r.length;o+=1){const a=ts(e,r,o);i[o]?(i[o].p(a,n),G(i[o],1)):(i[o]=ds(a),i[o].c(),G(i[o],1),i[o].m(t.parentNode,t))}for(Z(),o=r.length;o<i.length;o+=1)a(o);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)G(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Y(i[e]);n=!1},d(e){c(i,e),e&&l(t)}}}function ds(e){let t,n,r;function i(t){e[58](t,e[86])}let a={track:e[84],idx:e[86]+1};return void 0!==e[12][e[86]]&&(a.selected=e[12][e[86]]),t=new Dn({props:a}),z.push((()=>W(t,"selected",i))),{c(){Q(t.$$.fragment)},m(e,n){X(t,e,n),r=!0},p(r,i){e=r;const a={};1024&i[0]&&(a.track=e[84]),!n&&4096&i[0]&&(n=!0,a.selected=e[12][e[86]],P((()=>n=!1))),t.$set(a)},i(e){r||(G(t.$$.fragment,e),r=!0)},o(e){Y(t.$$.fragment,e),r=!1},d(e){J(t,e)}}}function us(t){let n,i,c,u,f,g,w,_,y,v=t[11];i=new Xo({props:{settings:t[3]}}),i.$on("captureSheetAsImage",t[61]),i.$on("copyText",t[62]),i.$on("copyTransposes",t[63]),i.$on("export",t[64]);let x=vs(t);return{c(){n=d("div"),Q(i.$$.fragment),c=h(),u=d("div"),f=d("div"),x.c(),E(f,"width","max-content"),$((()=>t[67].call(f))),E(u,"background","#2D2A32"),E(u,"user-select","none"),b(n,"class","flex flex-col items-start")},m(e,r){s(e,n,r),X(i,n,null),o(n,c),o(n,u),o(u,f),x.m(f,null),g=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=d("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=A();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=p(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{i=p(n.contentWindow,"resize",t)}),o(e,n),()=>{(r||i&&n.contentWindow)&&i(),l(n)}}(f,t[67].bind(f)),t[68](u),w=!0,_||(y=[p(n,"contextmenu",m(t[36])),p(n,"click",t[30]),p(n,"keypress",t[30])],_=!0)},p(t,n){const r={};8&n[0]&&(r.settings=t[3]),i.$set(r),2048&n[0]&&a(v,v=t[11])?(Z(),Y(x,1,1,e),q(),x=vs(t),x.c(),G(x,1),x.m(f,null)):x.p(t,n)},i(e){w||(G(i.$$.fragment,e),G(x),w=!0)},o(e){Y(i.$$.fragment,e),Y(x),w=!1},d(e){e&&l(n),J(i),x.d(e),g(),t[68](null),_=!1,r(y)}}}function hs(e){let t,n;return t=new Ln({props:{chord:e[79],selected:e[79].selected,index:e[79].index,next:xs(e[11],ln,+e[78]+1)??void 0,settings:e[3]}}),t.$on("select",e[66]),{c(){Q(t.$$.fragment)},m(e,r){X(t,e,r),n=!0},p(e,n){const r={};2048&n[0]&&(r.chord=e[79]),2048&n[0]&&(r.selected=e[79].selected),2048&n[0]&&(r.index=e[79].index),2048&n[0]&&(r.next=xs(e[11],ln,+e[78]+1)??void 0),8&n[0]&&(r.settings=e[3]),t.$set(r)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function fs(t){let n;function r(e,t){return"break"===e[79].type?ms:"comment"===e[79].type?ps:void 0}let i=r(t),a=i&&i(t);return{c(){a&&a.c(),n=f()},m(e,t){a&&a.m(e,t),s(e,n,t)},p(e,t){i===(i=r(e))&&a?a.p(e,t):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(n.parentNode,n)))},i:e,o:e,d(e){a&&a.d(e),e&&l(n)}}}function ps(e){let t,n,r,i="comment"!=e[83]?.type&&1!=e[79].notop&&gs();function a(e,t){return"custom"==e[79].kind||"tempo"==e[79].kind?bs:ws}let o=a(e),c=o(e);return{c(){i&&i.c(),t=h(),c.c(),n=h(),r=d("br")},m(e,a){i&&i.m(e,a),s(e,t,a),c.m(e,a),s(e,n,a),s(e,r,a)},p(e,r){"comment"!=e[83]?.type&&1!=e[79].notop?i||(i=gs(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),o===(o=a(e))&&c?c.p(e,r):(c.d(1),c=o(e),c&&(c.c(),c.m(n.parentNode,n)))},d(e){i&&i.d(e),e&&l(t),c.d(e),e&&l(n),e&&l(r)}}}function ms(e){let t,n="comment"!=e[82]?.type&&_s();return{c(){n&&n.c(),t=f()},m(e,r){n&&n.m(e,r),s(e,t,r)},p(e,r){"comment"!=e[82]?.type?n||(n=_s(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&l(t)}}}function gs(e){let t;return{c(){t=d("br")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function ws(e){let t,n,r,i,a=e[79].text+"";return{c(){t=d("span"),n=u(a),b(t,"class","comment")},m(a,l){s(a,t,l),o(t,n),r||(i=p(t,"contextmenu",m(e[40])),r=!0)},p(e,t){2048&t[0]&&a!==(a=e[79].text+"")&&y(n,a)},d(e){e&&l(t),r=!1,i()}}}function bs(e){let t,n,i,a,c=e[79].text+"";function h(...t){return e[65](e[78],...t)}return{c(){t=d("span"),n=u(c),b(t,"class","comment"),b(t,"contenteditable","true")},m(r,l){s(r,t,l),o(t,n),i||(a=[p(t,"click",g(e[37])),p(t,"keypress",g(e[38])),p(t,"contextmenu",m(e[39])),p(t,"focusout",h)],i=!0)},p(t,r){e=t,2048&r[0]&&c!==(c=e[79].text+"")&&y(n,c)},d(e){e&&l(t),i=!1,r(a)}}}function _s(e){let t;return{c(){t=d("br")},m(e,n){s(e,t,n)},d(e){e&&l(t)}}}function ys(e){let t,n,r,i;const a=[fs,hs],o=[];function c(e,t){return e[79].type?0:1}function d(e,t){return 0===t?function(e){const t=e.slice(),n=t[11][+t[78]+1];t[82]=n;const r=t[11][+t[78]-1];return t[83]=r,t}(e):e}return t=c(e),n=o[t]=a[t](d(e,t)),{c(){n.c(),r=f()},m(e,n){o[t].m(e,n),s(e,r,n),i=!0},p(e,i){let s=t;t=c(e),t===s?o[t].p(d(e,t),i):(Z(),Y(o[s],1,1,(()=>{o[s]=null})),q(),n=o[t],n?n.p(d(e,t),i):(n=o[t]=a[t](d(e,t)),n.c()),G(n,1),n.m(r.parentNode,r))},i(e){i||(G(n),i=!0)},o(e){Y(n),i=!1},d(e){o[t].d(e),e&&l(r)}}}function vs(e){let t,n,r=Object.entries(e[11]),i=[];for(let t=0;t<r.length;t+=1)i[t]=ys(es(e,r,t));const a=e=>Y(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=f()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);s(e,t,r),n=!0},p(e,n){if(1050632&n[0]|2&n[1]){let o;for(r=Object.entries(e[11]),o=0;o<r.length;o+=1){const a=es(e,r,o);i[o]?(i[o].p(a,n),G(i[o],1)):(i[o]=ys(a),i[o].c(),G(i[o],1),i[o].m(t.parentNode,t))}for(Z(),o=r.length;o<i.length;o+=1)a(o);q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)G(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Y(i[e]);n=!1},d(e){c(i,e),e&&l(t)}}}function Es(e){let t,n,i,a,c,f,g,_,y,v,x,k,T,S,A,C,N,I,M,D,R,U,O,$,F,L,V,B,H,j,K,ee,te,ne,re,ie,ae,oe,se,le,ce,de,ue,he,fe,pe,me,ge,we,be,_e,ye,ve,Ee,xe,ke,Te,Se,Ae,Ce,Ne,Ie,Me,ze,De,Re,Ue,Oe,$e,Pe,Fe,Le,Ve=e[15].length>0&&rs(e),Be=e[9]&&ss(e),He=e[16]&&ls(e);function je(t){e[57](t)}let Ze={show:e[9],hasMIDI:!!e[2]};void 0!==e[3]&&(Ze.settings=e[3]),R=new In({props:Ze}),z.push((()=>W(R,"settings",je)));let qe=e[10]&&cs(e),Ge=1==e[9]&&us(e);return{c(){t=h(),n=d("dialog"),n.innerHTML='<form class="flex flex-col row-auto items-center"><p class="p-3 text-center">Careful, you&#39;ve previously edited this sheet!\n            <br/>\n            Loading it again will overwrite your progress.</p> \n        <div class="mx-2 mb-2 flex gap-2 w-full justify-center"><button formmethod="dialog" class="p-1" value="load">Load saved</button> \n            <button formmethod="dialog" class="p-1" value="export-and-restart">Export and Start over</button> \n            <button formmethod="dialog" class="p-1" value="new">Start over</button></div></form>',i=h(),a=d("div"),c=d("div"),f=d("p"),f.textContent="Import a MIDI/JSON file to get started:",g=h(),_=d("label"),_.textContent="Click or drop a MIDI/JSON file here!",y=h(),v=d("input"),x=h(),Ve&&Ve.c(),k=h(),T=d("div"),S=d("div"),A=d("div"),Be&&Be.c(),C=h(),N=d("div"),I=d("button"),I.textContent="Select all",M=h(),He&&He.c(),D=h(),Q(R.$$.fragment),O=h(),$=d("div"),F=u("Click on a note to set selection beginning/ending"),L=d("br"),V=u("\n            Double-click on a note to select the whole line\n            "),B=d("hr"),H=u("\n            Timing:"),j=d("br"),K=h(),ee=d("span"),te=u("Whole note"),ne=d("br"),re=h(),ie=d("span"),ae=u("Half note"),oe=d("br"),se=h(),le=d("span"),ce=u("Quarter note"),de=d("br"),ue=h(),he=d("span"),fe=u("Eighth note"),pe=d("br"),me=h(),ge=d("span"),we=u("Sixteenth note"),be=d("br"),_e=h(),ye=d("span"),ve=u("Thirty-second note"),Ee=d("br"),xe=d("br"),ke=h(),Te=d("span"),Se=u("Longer than whole"),Ae=d("br"),Ce=h(),Ne=d("span"),Ie=u("Shorter than thirty-second"),Me=d("br"),ze=h(),De=d("section"),Re=d("div"),qe&&qe.c(),Ue=h(),Oe=d("button"),Oe.textContent="Import selected tracks",$e=h(),Ge&&Ge.c(),Jo.title="MIDI Converter",b(n,"class","rounded-lg overflow-hidden"),b(f,"class","text-white text-3xl"),b(_,"for","drop"),b(_,"class","cursor-pointer rounded-xl text-xl p-4"),E(_,"border","2px solid dimgrey"),b(v,"id","drop"),b(v,"class","hidden"),b(v,"type","file"),b(v,"accept",".mid,.midi,.json"),b(c,"class","flex flex-col items-center gap-6"),b(a,"class","flex flex-col gap-12 w-full h-full items-center align-center justify-center content-center absolute top-0 z-50"),E(a,"height","100%"),E(a,"background","rgb(45,42,50)"),E(a,"background","linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%)"),E(a,"transition","all 0.6s ease-in-out"),b(N,"class","flex flex-col gap-2"),b(B,"class","my-2 mx-1"),E(ee,"color",Rn.whole),E(ie,"color",Rn.half),E(le,"color",Rn.quarter),E(he,"color",Rn.eighth),E(ge,"color",Rn.sixteenth),E(ye,"color",Rn.thirtysecond),E(Te,"color",Rn.quadruple),E(Ne,"color",Rn.sixtyfourth),b($,"id","guide"),b(S,"id","sidebar"),b(S,"class","m-1 flex flex-col sticky overflow-y-auto top-0"),E(S,"min-width","25em"),E(S,"max-width","25em"),E(S,"max-height","99vh"),b(Re,"id","tracks"),b(Re,"class","flex flex-col gap-2"),b(De,"id","track-chooser"),b(De,"class","z-40 w-full absolute flex flex-col gap-4 justify-center items-center content-center text-2xl"),E(De,"top","-110vh"),E(De,"height","100vh"),E(De,"background","rgb(45,42,50)"),E(De,"background","linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%)"),E(De,"transition","all 0.6s ease-in-out"),b(T,"class","flex flex-row")},m(r,l){s(r,t,l),s(r,n,l),e[42](n),s(r,i,l),s(r,a,l),o(a,c),o(c,f),o(c,g),o(c,_),o(c,y),o(c,v),e[44](v),o(a,x),Ve&&Ve.m(a,null),e[48](a),s(r,k,l),s(r,T,l),o(T,S),o(S,A),Be&&Be.m(A,null),o(A,C),o(A,N),o(N,I),o(N,M),He&&He.m(N,null),o(A,D),X(R,A,null),o(S,O),o(S,$),o($,F),o($,L),o($,V),o($,B),o($,H),o($,j),o($,K),o($,ee),o(ee,te),o($,ne),o($,re),o($,ie),o(ie,ae),o($,oe),o($,se),o($,le),o(le,ce),o($,de),o($,ue),o($,he),o(he,fe),o($,pe),o($,me),o($,ge),o(ge,we),o($,be),o($,_e),o($,ye),o(ye,ve),o($,Ee),o($,xe),o($,ke),o($,Te),o(Te,Se),o($,Ae),o($,Ce),o($,Ne),o(Ne,Ie),o($,Me),o(T,ze),o(T,De),o(De,Re),qe&&qe.m(Re,null),o(De,Ue),o(De,Oe),e[60](De),o(T,$e),Ge&&Ge.m(T,null),Pe=!0,Fe||(Le=[p(n,"close",e[43]),p(_,"drop",m(e[28])),p(_,"dragover",m(e[41])),p(v,"change",e[17]),p(I,"click",e[31]),p(Oe,"click",e[59]),p(T,"click",w(e[30])),p(T,"keypress",w(e[30]))],Fe=!0)},p(e,t){e[15].length>0?Ve?(Ve.p(e,t),32768&t[0]&&G(Ve,1)):(Ve=rs(e),Ve.c(),G(Ve,1),Ve.m(a,null)):Ve&&(Z(),Y(Ve,1,1,(()=>{Ve=null})),q()),e[9]?Be?Be.p(e,t):(Be=ss(e),Be.c(),Be.m(A,C)):Be&&(Be.d(1),Be=null),e[16]?He?He.p(e,t):(He=ls(e),He.c(),He.m(N,null)):He&&(He.d(1),He=null);const n={};512&t[0]&&(n.show=e[9]),4&t[0]&&(n.hasMIDI=!!e[2]),!U&&8&t[0]&&(U=!0,n.settings=e[3],P((()=>U=!1))),R.$set(n),e[10]?qe?(qe.p(e,t),1024&t[0]&&G(qe,1)):(qe=cs(e),qe.c(),G(qe,1),qe.m(Re,null)):qe&&(Z(),Y(qe,1,1,(()=>{qe=null})),q()),1==e[9]?Ge?(Ge.p(e,t),512&t[0]&&G(Ge,1)):(Ge=us(e),Ge.c(),G(Ge,1),Ge.m(T,null)):Ge&&(Z(),Y(Ge,1,1,(()=>{Ge=null})),q())},i(e){Pe||(G(Ve),G(R.$$.fragment,e),G(qe),G(Ge),Pe=!0)},o(e){Y(Ve),Y(R.$$.fragment,e),Y(qe),Y(Ge),Pe=!1},d(o){o&&l(t),o&&l(n),e[42](null),o&&l(i),o&&l(a),e[44](null),Ve&&Ve.d(),e[48](null),o&&l(k),o&&l(T),Be&&Be.d(),He&&He.d(),J(R),qe&&qe.d(),e[60](null),Ge&&Ge.d(),Fe=!1,r(Le)}}}function xs(e,t,n=0){let r=n;for(;e[r]&&t(e[r]);)r++;return e[r]}function ks(e,t,n){let r={element:void 0,hide:()=>{n(5,r.element.style.top="-110vh",r),L()},show:()=>{n(5,r.element.style.top="0px",r)}},i=ho();let a,o,s,l,c,d,u,h,f={element:void 0,name:void 0,data:void 0,set:(e,t=!1)=>{n(2,s=t?s:void 0),n(0,f.name=a??e.name,f),n(0,f.data=uo(e.data),f)},setAndProceed:(e,t=!1)=>{n(2,s=t?s:void 0),n(0,f.name=a??e.name,f),n(0,f.data=uo(e.data),f),f.proceed(!0)},proceed:e=>{let t=f.element?.returnValue;if(e&&(t="load"),t){if("load"==t||"existing"==t){console.log("Loading",f.name),n(9,g=!0),n(11,c=f.data);for(let e=0;e<c.length;e++){let t=c[e];if(cn(t)){let r=[];for(let e of t.notes)r.push(new dn(e.value,e.playTime,e.tempo,e.BPM,e.delta));let i=new un(r,t.classicChordOrder,t.sequentialQuantize);i.index=t.index,n(11,c[e]=i,c)}}console.log(c)}else"export-and-restart"==t?fo.export(f.name).then((e=>{D(e),b()})):"new"==t&&b();r.hide()}}},p=e=>{if(e)return e.split(".").slice(0,-1).join(".")},m={element:void 0,hide:()=>{n(8,m.element.style.top="-110vh",m)},show:()=>{n(8,m.element.style.top="0px",m)}},g=!1;async function w(){n(7,a=p(o.files[0].name));let e=U.find((e=>e.name==a))??!1;e?(n(0,f.name=a,f),n(0,f.data=uo(e.data),f),f.element.showModal()):(b(),r.hide())}async function b(e=undefined){e&&n(1,o.files=e.files,o);if("json"===o.files[0].type.split("/")[1]){let e=await o.files[0].text();return f.set(JSON.parse(e)),n(9,g=!0),void n(11,c=f.data)}await o.files[0].arrayBuffer().then((e=>{n(2,s=new on(e)),function(e){return e.header.getTimeDivision()===on.Header.TICKS_PER_BEAT?{ticksPerBeat:e.header.getTicksPerBeat()}:{SMPTEFrames:e.header.getSMPTEFrames(),ticksPerFrame:e.header.getTicksPerFrame()}}(s).ticksPerBeat||console.error("No ticksPerBeat in this midi file"),n(10,l=s.tracks),n(12,d=l.map((()=>!0))),n(9,g=!1),m.show()}))}let _,y,v=()=>{if(!s)return void console.log("no midiobject");let e=function(e,t){let n=[];return e.getEvents().forEach((e=>{e.subtype==Qt.EVENT_META_SET_TEMPO&&n.push(e),e.subtype==Qt.EVENT_MIDI_NOTE_ON&&(e.track||!0!==t[0]?!0===t[e.track]&&n.push(e):n.push(e))})),n}(s,d);n(11,c=hn(e,y,c)),S(),n(9,g=!0)};try{y=JSON.parse(localStorage.getItem("preferences")),y.beats=4}catch(e){y=void 0}let E=e=>{let t=F(e);c.splice(t,0,{type:"comment",kind:"custom",text:"Add a comment..."}),V()},x=(e,t)=>{""==t?c.splice(F(e),1):n(11,c[e].text=t,c),V(),O()},k=(e,t,n,r=undefined)=>{let i=r?.relative??!1;for(let r=e;r<=c.length;r++){let e=c.find((e=>e.index==r));if(!ln(e)){if(e.index>t)break;A(r,n,i)}}V(),!0!==r?.skipSave&&O()},T=(e,t,r=undefined)=>{let i=r?.stickTo??"same",a=r?.skipSave??!1,o=[];for(let n=e;n<=t;n++){let e=c[F(n)];o.push(e)}"same"==i&&(i=o[0].notes[0].transposition());let s=wn(o,11,i);return k(e,t,s,{relative:!1,skipSave:!0}),n(11,c),S(),a||O(),s},S=()=>{n(11,c=c.filter((e=>"transpose"!=e.kind)));let e=xs(c,ln,0).notes[0].transposition();c.splice(0,0,{type:"comment",kind:"transpose",text:"Transpose by: "+-e,notop:!0});let t=e;for(let e=0;e<c.length;e++){let n=c[e];if(ln(n))continue;let r=n.notes[0].transposition(),i=r-t;if(0!=i){let n=`Transpose by: ${-r>0?"+":""}${-r}`;n+=` (${-i>0?"+":""}${-i})`,c.splice(e,0,{type:"comment",kind:"transpose",text:n}),t=r}}n(11,c)},A=(e,t,r=!1)=>{let i=c.find((t=>t.index==e));ln(i)||(i.transpose(t,r,!0),n(11,c))},C=(e,t)=>{let n=[];for(let r=c.findIndex((t=>t.index==e));r<c.length;r++){let i=c[r]??void 0;if(i.index>=t){n.push({left:e,right:i.index});break}if("break"==i.type){let t=xs(c,ln,r);n.push({left:e,right:t.index}),e=t.index}}let r=F(n[0].left);r=c[r];let i=r.notes[0]?.transposition()??0;for(let e of n){i=T(e.left,e.right,{stickTo:i,skipSave:!0})}S(),O()},N=()=>c.filter((e=>"transpose"==e.kind)).map((e=>-parseInt(e.text.match(/\d+/)))).join(" ");function M(e){n(3,y.capturingImage=!0,y),n(13,u.firstChild.style.width=`${h+1}px`,u),setTimeout((()=>function(e,t){return pe(this,null,(function*(){const n=yield mt(e,t),{log:r,type:i,quality:a,dpi:o}=n,s=yield Zt(n);r.time("canvas to blob");const l=yield at(s,i,a);if(["image/png","image/jpeg"].includes(i)&&o){const e=yield lt(l.slice(0,33));let t=new Uint8Array(e);return"image/png"===i?t=ve(t,o):"image/jpeg"===i&&(t=function(e,t){return e[13]=1,e[14]=t>>8,e[15]=255&t,e[16]=t>>8,e[17]=255&t,e}(t,o)),r.timeEnd("canvas to blob"),new Blob([t,l.slice(33)],{type:i})}return r.timeEnd("canvas to blob"),l}))}(u,{width:h,scale:2}).then((t=>{"copy"===e?function(e){try{navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(e){console.error(e)}}(t):function(e){R(e,"png")}(t),n(3,y.capturingImage=!1,y),n(13,u.firstChild.style.width="max-content",u)}))),250)}function D(e){n(7,a=e.name),R(new Blob([JSON.stringify(e)],{type:"text/json"}),"json")}function R(e,t){const n=URL.createObjectURL(e);let r=`${a}.${t}`,i=document.createElement("a");i.href=n,i.download=r,document.body.appendChild(i),i.click(),URL.revokeObjectURL(n),document.body.removeChild(i)}let U=fo.getAll();function O(){a&&fo.add(a,y,c).then((()=>n(15,U=fo.getAll()))),n(6,i=ho()),console.log("saving",c)}0!=U.length||localStorage.getItem("hadSample")||(localStorage.setItem("hadSample",!0),fetch("https://gist.githubusercontent.com/ArijanJ/f381c78375cfad2e9a707c6da7a5b304/raw/c4ccc665d368402980dede2943fea25cdd02f440/Mariage_dAmour_(sample).json").then((e=>e.json())).then((e=>{fo.add(e.name,e.settings,e.data,!0),setTimeout((()=>{n(15,U=fo.getAll(n(6,i=ho())))}),0)})));let $=!1,P={left:void 0,right:void 0},F=e=>c.findIndex((t=>t.index==e));function L(e){if(g&&!e?.shiftKey){n(4,P.left=void 0,P),n(4,P.right=void 0,P);for(let e of c)cn(e)&&(e.selected=void 0);n(11,c)}}function V(e){if(c){for(let e=0;e<c.length;e++)ln(c[e])||n(11,c[e].selected=void 0,c);for(let e=P.left;e<=P.right;e++){let t=c.find((t=>t.index==e));t&&(t.selected=!0)}n(11,c)}}function B(e){if(P.left===e&&P.right===e){let t=F(e);for(;cn(c[t]);)t--;t++;let r=t;for(;cn(c[r]);)r++;r--,n(4,P.left=c[t].index,P),n(4,P.right=c[r].index,P)}else e<P.left||void 0===P.left?(n(4,P.right=P.left??e,P),n(4,P.left=e,P)):n(4,P.right=e,P);V()}function H(e){let t=F(e);c.splice(t,0,{type:"break"}),n(11,c)}function j(e,t){for(let n=F(e);n<c.length&&("break"==c[n]?.type&&(c.splice(n,1),n--),!(n>F(t)));n++);n(11,c)}return e.$$.update=()=>{if(3&e.$$.dirty[0]&&o&&n(7,a=p(o.files[0]?.name)??f.name),12&e.$$.dirty[0]|16&e.$$.dirty[1]){_?(["beats","classicChordOrder","quantize","sequentialQuantize","minSpeedChange","bpmChanges","bpm"].some((e=>y[e]!=_[e]))&&v(),n(35,_={...y}),s&&localStorage.setItem("preferences",JSON.stringify(y)),V()):n(35,_={...y})}16&e.$$.dirty[0]&&n(16,$=null!=P.left&&null!=P.right)},[f,o,s,y,P,r,i,a,m,g,l,c,d,u,h,U,$,w,v,E,x,k,T,S,C,N,M,D,function(e){e.preventDefault();let t=e?.dataTransfer?.items?.[0];t&&t.getAsFile?(n(1,o.files=e.dataTransfer.files,o),w()):console.error("bad file dropped")},O,L,function(e){n(4,P.left=0,P),n(4,P.right=c.length-1,P),V()},B,H,j,_,function(t){I.call(this,e,t)},function(t){I.call(this,e,t)},function(t){I.call(this,e,t)},function(t){I.call(this,e,t)},function(t){I.call(this,e,t)},function(t){I.call(this,e,t)},function(e){z[e?"unshift":"push"]((()=>{f.element=e,n(0,f)}))},()=>{f.proceed()},function(e){z[e?"unshift":"push"]((()=>{o=e,n(1,o)}))},e=>{f.setAndProceed(e.detail.project),r.hide()},()=>{n(15,U=fo.getAll()),n(6,i=ho())},e=>D(e),function(e){z[e?"unshift":"push"]((()=>{r.element=e,n(5,r)}))},()=>{r.show(),setTimeout((()=>{n(9,g=!1),n(7,a=null),document.getElementById("drop").value=""}),600)},()=>{k(P.left,P.right,1,{relative:!0}),S()},()=>{k(P.left,P.right,-1,{relative:!0}),S()},()=>{T(P.left,P.right)},()=>{C(P.left,P.right)},()=>{H(P.left)},()=>{j(P.left,P.right)},()=>{E(P.left)},function(e){y=e,n(3,y)},function(t,r){e.$$.not_equal(d[r],t)&&(d[r]=t,n(12,d))},()=>{v(),m.hide()},function(e){z[e?"unshift":"push"]((()=>{m.element=e,n(8,m)}))},e=>{M(e.detail.mode)},()=>{n(3,y.tempoMarks=!0,y),setTimeout((()=>{navigator.clipboard.writeText(u.firstChild.innerText)}),0)},()=>{navigator.clipboard.writeText(N())},()=>{O(),setTimeout((()=>{if(void 0===f?.data){let e=fo.getAll().filter((e=>e.name===a))[0];f.setAndProceed(e,!0)}fo.export(f.name).then((e=>D(e)))}),0)},(e,t)=>{x(e,t.target.innerText)},e=>{B(e.detail.index)},function(){h=this.clientWidth,n(14,h)},function(e){z[e?"unshift":"push"]((()=>{u=e,n(13,u)}))}]}return new class extends ne{constructor(e){super(),te(this,e,ks,Es,a,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
