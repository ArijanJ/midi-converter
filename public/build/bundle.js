var app=function(){"use strict";"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const e=1,t=2,n=4,r=8,i=16,a=64,o=1,s=2,l=4,c=8,d=Symbol();let u=!1;const f=2,h=4,p=8,g=16,m=32,w=64,b=128,_=256,v=512,y=1024,E=2048,x=4096,k=8192,T=16384,S=32768,A=65536,N=1<<18,C=Symbol("$state"),I=Symbol("$state.frozen"),M=Symbol("");var z=Array.isArray,D=Object.isFrozen,R=Object.defineProperty,O=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyDescriptors,P=Object.getPrototypeOf;const F=()=>{};function L(e){return e()}function V(e){for(var t=0;t<e.length;t++)e[t]()}let B=!1,$=[];function H(){B=!1;const e=$.slice();$=[],V(e)}function j(e){B||(B=!0,queueMicrotask(H)),$.push(e)}function Z(e){return e===this.v}function q(e,t){return e!=e?t==t:e!==t||null!==e&&"object"==typeof e||"function"==typeof e}function G(e){return!q(e,this.v)}function Y(e){return{f:0,v:e,reactions:null,equals:Z,version:0}}function W(e){const t=Y(e);return t.equals=G,null!==ye&&null!==ye.l&&(ye.l.s??=[]).push(t),t}function K(e,t){return Q(e,Pe((()=>Oe(e)))),t}function Q(e,t){return null!==ue&&xe()&&ue.f&f&&function(){throw new Error("state_unsafe_mutation")}(),e.equals(t)||(e.v=t,e.version=Ee(),X(e,y),xe()&&null!==he&&he.f&v&&!(he.f&m)&&(null!==pe&&pe.includes(e)?(Le(he,y),De(he)):null===me?function(e){me=e}([e]):me.push(e))),t}function X(e,t){var n=e.reactions;if(null!==n)for(var r=xe(),i=n.length,a=0;a<i;a++){var o=n[a],s=o.f;s&y||(r||o!==he)&&(Le(o,t),s&(v|b)&&(s&f?X(o,E):De(o)))}}function J(e){let t=f|y;null===he&&(t|=b);const n={deps:null,deriveds:null,equals:Z,f:t,first:null,fn:e,last:null,reactions:null,v:null,version:0};if(null!==ue&&ue.f&f){var r=ue;null===r.deriveds?r.deriveds=[n]:r.deriveds.push(n)}return n}function ee(e){const t=J(e);return t.equals=G,t}function te(e){Ne(e);var t=e.deriveds;if(null!==t){e.deriveds=null;for(var n=0;n<t.length;n+=1)re(t[n])}}function ne(e){te(e);var t=Te(e);Le(e,(be||e.f&b)&&null!==e.deps?E:v),e.equals(t)||(e.v=t,e.version=Ee())}function re(e){te(e),Ae(e,0),Le(e,k),e.first=e.last=e.deps=e.reactions=e.fn=null}let ie=!1,ae=!1,oe=!1;function se(e){ae=e}function le(e){oe=e}let ce=[],de=0,ue=null;function fe(e){ue=e}let he=null,pe=null,ge=0,me=null;let we=0,be=!1,_e=!1,ve=new Set,ye=null;function Ee(){return we++}function xe(){return null!==ye&&null===ye.l}function ke(e){var t=e.f;if(t&y)return!0;if(t&E){var n=e.deps;if(null!==n){var r,i=!!(t&b);if(t&_){for(r=0;r<n.length;r++)(n[r].reactions??=[]).push(e);e.f^=_}for(r=0;r<n.length;r++){var a=n[r];if(ke(a)&&ne(a),a.version>e.version)return!0;i&&(be||a?.reactions?.includes(e)||(a.reactions??=[]).push(e))}}Le(e,v)}return!1}function Te(e){var t=pe,n=ge,r=me,i=ue,a=be;pe=null,ge=0,me=null,ue=e.f&(m|w)?null:e,be=!ae&&!!(e.f&b);try{var o=(0,e.fn)(),s=e.deps;if(null!==pe){var l,c;if(null!==s){var d=0===ge?pe:s.slice(0,ge).concat(pe),u=d.length>16?new Set(d):null;for(c=ge;c<s.length;c++)l=s[c],(null!==u?u.has(l):d.includes(l))||Se(e,l)}if(null!==s&&ge>0)for(s.length=ge+pe.length,c=0;c<pe.length;c++)s[ge+c]=pe[c];else e.deps=s=pe;if(!be)for(c=ge;c<s.length;c++){var f=(l=s[c]).reactions;null===f?l.reactions=[e]:f[f.length-1]===e||f.includes(e)||f.push(e)}}else null!==s&&ge<s.length&&(Ae(e,ge),s.length=ge);return o}finally{pe=t,ge=n,me=r,ue=i,be=a}}function Se(e,t){const n=t.reactions;let r=0;if(null!==n){r=n.length-1;const i=n.indexOf(e);-1!==i&&(0===r?t.reactions=null:(n[i]=n[r],n.pop()))}0===r&&t.f&f&&(Le(t,E),t.f&(b|_)||(t.f^=_),Ae(t,0))}function Ae(e,t){var n=e.deps;if(null!==n)for(var r=0===t?null:n.slice(0,t),i=new Set,a=t;a<n.length;a++){var o=n[a];i.has(o)||(i.add(o),null!==r&&r.includes(o)||Se(e,o))}}function Ne(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){var r=n.next;tt(n,t),n=r}}function Ce(e){var t=e.f;if(!(t&k)){Le(e,v);var n=e.ctx,r=he,i=ye;he=e,ye=n;try{t&g||Ne(e),et(e);var a=Te(e);e.teardown="function"==typeof a?a:null,e.version=we}catch(e){!function(e){throw e}(e)}finally{he=r,ye=i}}}function Ie(){de>1e3&&(de=0,function(){throw new Error("effect_update_depth_exceeded")}()),de++}function Me(e){var t=e.length;if(0!==t)for(var n=0;n<t;n++){var r=e[n];r.f&(k|x)||!ke(r)||(Ce(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown?nt(r):r.fn=null))}}function ze(){if(ie=!1,de>1001)return;const e=ce;ce=[],function(e){var t=e.length;if(0!==t){Ie();var n=ae;ae=!0;try{for(var r=0;r<t;r++){var i=e[r];if(null!==i.first||i.f&m){var a=[];Re(i,a),Me(a)}else Me([i])}}finally{ae=n}}}(e),ie||(de=0)}function De(e){ie||(ie=!0,queueMicrotask(ze));for(var t=e;null!==t.parent;){var n=(t=t.parent).f;if(n&m){if(!(n&v))return;Le(t,E)}}ce.push(t)}function Re(e,t){var n=e.first,r=[];e:for(;null!==n;){var i=n.f,a=!(i&(k|x)),o=i&m,s=!!(i&v),l=n.first;if(a&&(!o||!s))if(o&&Le(n,v),i&p){if(!o&&ke(n)&&(Ce(n),l=n.first),null!==l){n=l;continue}}else if(i&h)if(o||s){if(null!==l){n=l;continue}}else r.push(n);var c=n.next;if(null===c){let t=n.parent;for(;null!==t;){if(e===t)break e;var d=t.next;if(null!==d){n=d;continue e}t=t.parent}}n=c}for(var u=0;u<r.length;u++)l=r[u],t.push(l),Re(l,t)}function Oe(e){var t=e.f;if(t&k)return e.v;if(_e&&ve.add(e),null!==ue){var n=ue.deps;null===pe&&null!==n&&n[ge]===e?ge++:null!==n&&0!==ge&&n[ge-1]===e||(null===pe?pe=[e]:pe[pe.length-1]!==e&&pe.push(e)),null!==me&&null!==he&&he.f&v&&!(he.f&m)&&me.includes(e)&&(Le(he,y),De(he))}if(t&f){var r=e;ke(r)&&ne(r)}return e.v}function Ue(e){var t=_e,n=ve;_e=!0,ve=new Set;var r,i=ve;try{Pe(e)}finally{if(_e=t,_e)for(r of ve)n.add(r);ve=n}for(r of i)if(r.f&A)for(const e of r.deps||[])e.f&f||K(e,null);else K(r,null)}function Pe(e){const t=ue;try{return ue=null,e()}finally{ue=t}}const Fe=~(y|E|v);function Le(e,t){e.f=e.f&Fe|t}function Ve(e,t=!1,n){ye={p:ye,c:null,e:null,m:!1,s:e,x:null,l:null},t||(ye.l={s:null,u:null,r1:[],r2:Y(!1)})}function Be(e){const t=ye;if(null!==t){void 0!==e&&(t.x=e);const r=t.e;if(null!==r){t.e=null;for(var n=0;n<r.length;n++)Ye(r[n])}ye=t.p,t.m=!0}return e||{}}function $e(e,t=new Set){if(!("object"!=typeof e||null===e||e instanceof EventTarget||t.has(e))){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{$e(e[n],t)}catch(e){}const n=P(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const t=U(n);for(let n in t){const r=t[n].get;if(r)try{r.call(e)}catch(e){}}}}}function He(e){return"object"==typeof(t=e)&&null!==t&&"number"==typeof t.f?Oe(e):e;var t}function je(e){null===he&&null===ue&&function(){throw new Error("effect_orphan")}(),null!==ue&&ue.f&b&&function(){throw new Error("effect_in_unowned_derived")}(),oe&&function(){throw new Error("effect_in_teardown")}()}function Ze(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function qe(e,t,n,r=!0){var i=!!(e&w),a={ctx:ye,deps:null,nodes:null,f:e|y,first:null,fn:t,last:null,next:null,parent:i?null:he,prev:null,teardown:null,transitions:null,version:0};if(n){var o=ae;try{se(!0),Ce(a),a.f|=T}catch(e){throw tt(a),e}finally{se(o)}}else null!==t&&De(a);return n&&null===a.deps&&null===a.first&&null===a.nodes&&null===a.teardown||i||!r||(null!==he&&Ze(a,he),null!==ue&&ue.f&f&&Ze(a,ue)),a}function Ge(e){if(je(),!(null!==he&&!!(he.f&p)&&null!==ye&&!ye.m))return Ye(e);var t=ye;(t.e??=[]).push(e)}function Ye(e){return qe(h,e,!1)}function We(e,t){var n=ye,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=Ke((()=>{e(),r.ran||(r.ran=!0,Q(n.l.r2,!0),Pe(t))}))}function Ke(e){return qe(p,e,!0)}function Qe(e){return Ke(e)}function Xe(e,t=0){return qe(p|g|t,e,!0)}function Je(e,t=!0){return qe(p|m,e,!0,t)}function et(e){var t=e.teardown;if(null!==t){const e=oe,n=ue;le(!0),fe(null);try{t.call(null)}finally{le(e),fe(n)}}}function tt(e,t=!0){var n=!1;if((t||e.f&N)&&null!==e.nodes){for(var r=e.nodes.start,i=e.nodes.end;null!==r;){var a=r===i?null:r.nextSibling;r.remove(),r=a}n=!0}if(Ne(e,t&&!n),Ae(e,0),Le(e,k),e.transitions)for(const t of e.transitions)t.stop();et(e);var o=e.parent;null!==o&&e.f&m&&null!==o.first&&nt(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes=null}function nt(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function rt(e,t){var n=[];at(e,n,!0),it(n,(()=>{tt(e),t&&t()}))}function it(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function at(e,t,n){if(!(e.f&x)){if(e.f^=x,null!==e.transitions)for(const r of e.transitions)(r.is_global||n)&&t.push(r);for(var r=e.first;null!==r;){var i=r.next;at(r,t,!!(!!(r.f&S)||!!(r.f&m))&&n),r=i}}}function ot(e){st(e,!0)}function st(e,t){if(e.f&x){e.f^=x,ke(e)&&Ce(e);for(var n=e.first;null!==n;){var r=n.next;st(n,!!(!!(n.f&S)||!!(n.f&m))&&t),n=r}if(null!==e.transitions)for(const n of e.transitions)(n.is_global||t)&&n.in()}}function lt(e){if(null!==e&&"object"==typeof e&&C in e){var t=e[C];if(t)return t.p}return e}function ct(){return document.createTextNode("")}function dt(e){return e.firstChild}function ut(e,t){var n=e.firstChild;return n instanceof Comment&&""===n.data?n.nextSibling:n}function ft(e,t=!1){return e.nextSibling}function ht(e,t,n,r){function i(e){if(r.capture||gt.call(t,e),!e.cancelBubble)return n.call(this,e)}return e.startsWith("pointer")||"wheel"===e?j((()=>{t.addEventListener(e,i,r)})):t.addEventListener(e,i,r),i}function pt(e,t,n,r,i){var a={capture:r,passive:i},o=ht(e,t,n,a);t!==document.body&&t!==window&&t!==document||function(e){const t=qe(p,null,!1);Le(t,v),t.teardown=e}((()=>{t.removeEventListener(e,o,a)}))}function gt(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],a=i[0]||e.target,o=0,s=e.__root;if(s){var l=i.indexOf(s);if(-1!==l&&(t===document||t===window))return void(e.__root=t);var c=i.indexOf(t);if(-1===c)return;l<=c&&(o=l)}if((a=i[o]||e.target)!==t){R(e,"currentTarget",{configurable:!0,get:()=>a||n});try{for(var d,u=[];null!==a;){var f=a.parentNode||a.host||null;try{var h=a["__"+r];if(void 0!==h&&!a.disabled)if(z(h)){var[p,...g]=h;p.apply(a,[e,...g])}else h.call(a,e)}catch(e){d?u.push(e):d=e}if(e.cancelBubble||f===t||null===f)break;a=f}if(d){for(let e of u)queueMicrotask((()=>{throw e}));throw d}}finally{e.__root=t,a=t}}}const mt=Symbol.for("svelte.snippet");function wt(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function bt(e,t){he.nodes??={start:e,end:t}}function _t(e,t){var n,r=!!(1&t),i=!!(2&t),a=!e.startsWith("<!>");return()=>{n||(n=wt(a?e:"<!>"+e),r||(n=n.firstChild));var t=i?document.importNode(n,!0):n.cloneNode(!0);r?bt(t.firstChild,t.lastChild):bt(t,t);return t}}function vt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ct();return e.append(t,n),bt(t,n),e}function yt(e,t){null!==e&&e.before(t)}function Et(e,t){(e.__t??=e.nodeValue)!==t&&(e.nodeValue=e.__t=t)}function xt(e,t,n,r=null,i=!1){var a=e,o=null,s=null,l=null;Xe((()=>{l!==(l=!!t())&&(l?(o?ot(o):o=Je((()=>n(a))),s&&rt(s,(()=>{s=null}))):(s?ot(s):r&&(s=Je((()=>r(a)))),o&&rt(o,(()=>{o=null}))))}),i?S:0)}let kt=null;function Tt(e,t){return t}function St(o,s,l,c,d,u=null){var f=o,h={flags:s,items:new Map,first:null};!(s&r)||(f=o.appendChild(ct()));var p=null;Xe((()=>{var o=l(),s=z(o)?o:null==o?[]:Array.from(o),g=s.length,m=h.flags;m&a&&!D(s)&&!(I in s)&&!(C in s)&&(m^=a)&n&&!(m&e)&&(m^=e),function(n,a,o,s,l,c){var d,u,f,h,p=!!(l&i),g=!!(l&(e|t)),m=n.length,w=a.items,b=a.first,_=b,v=new Set,y=null,E=new Set,k=[],T=[];if(p)for(h=0;h<m;h+=1)u=c(d=n[h],h),void 0!==(f=w.get(u))&&(f.a?.measure(),E.add(f));for(h=0;h<m;h+=1)if(u=c(d=n[h],h),void 0!==(f=w.get(u))){if(g&&At(f,d,h,l),f.e.f&x&&(ot(f.e),p&&(f.a?.unfix(),E.delete(f))),f!==_){if(v.has(f)){if(k.length<T.length){var S,A=T[0];y=A.prev;var N=k[0],C=k[k.length-1];for(S=0;S<k.length;S+=1)Ct(k[S],A,o);for(S=0;S<T.length;S+=1)v.delete(T[S]);It(a,N.prev,C.next),It(a,y,N),It(a,C,A),_=A,y=C,h-=1,k=[],T=[]}else v.delete(f),Ct(f,_,o),It(a,f.prev,f.next),It(a,f,null===y?a.first:y.next),It(a,y,f),y=f;continue}for(k=[],T=[];null!==_&&_.k!==u;)v.add(_),T.push(_),_=_.next;if(null===_)continue;f=_}k.push(f),y=f,_=f.next}else{y=Nt(_?_.e.nodes.start:o,a,y,null===y?a.first:y.next,d,u,h,s,l),w.set(u,y),k=[],T=[],_=y.next}const I=Array.from(v);for(;null!==_;)I.push(_),_=_.next;var M=I.length;if(M>0){var z=l&r&&0===m?o:null;if(p){for(h=0;h<M;h+=1)I[h].a?.measure();for(h=0;h<M;h+=1)I[h].a?.fix()}!function(e,t,n,r){for(var i=[],a=t.length,o=0;o<a;o++)at(t[o].e,i,!0);var s=a>0&&0===i.length&&null!==n;if(s){var l=n.parentNode;l.textContent="",l.append(n),r.clear(),It(e,t[0].prev,t[a-1].next)}it(i,(()=>{for(var n=0;n<a;n++){var i=t[n];s||(r.delete(i.k),It(e,i.prev,i.next)),tt(i.e,!s)}}))}(a,I,z,w)}p&&j((()=>{for(f of E)f.a?.apply()}));he.first=a.first&&a.first.e,he.last=y&&y.e}(s,h,f,d,m,c),null!==u&&(0===g?p?ot(p):p=Je((()=>u(f))):null!==p&&rt(p,(()=>{p=null})))}))}function At(n,r,i,a){a&e&&Q(n.v,r),a&t?Q(n.i,i):n.i=i}function Nt(n,r,i,o,s,l,c,d,f){var h=kt;try{var p=!!(f&e)?!(f&a)?W(s):Y(s):s,g=f&t?Y(c):c,m={i:g,v:p,k:l,a:null,e:null,prev:i,next:o};return kt=m,m.e=Je((()=>d(n,p,g)),u),m.e.prev=i&&i.e,m.e.next=o&&o.e,null===i?r.first=m:(i.next=m,i.e.next=m.e),null!==o&&(o.prev=m,o.e.prev=m.e),m}finally{kt=h}}function Ct(e,t,n){for(var r=e.next?e.next.e.nodes.start:n,i=t?t.e.nodes.start:n,a=e.e.nodes.start;a!==r;){var o=a.nextSibling;i.before(a),a=o}}function It(e,t,n){null===t?e.first=n:(t.next=n,t.e.next=n&&n.e),null!==n&&(n.prev=t,n.e.prev=t&&t.e)}let Mt=!1;function zt(e,t,n){n=null==n?null:n+"";var r=e.__attributes??={};r[t]!==(r[t]=n)&&("loading"===t&&(e[M]=n),null===n?e.removeAttribute(t):e.setAttribute(t,n))}function Dt(e,t,n,r=n){e.addEventListener(t,n);const i=e.__on_r;e.__on_r=i?()=>{i(),r()}:r,Mt||(Mt=!0,document.addEventListener("reset",(e=>{Promise.resolve().then((()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()}))}),{capture:!0}))}function Rt(e,t,n){Dt(e,"input",(()=>{n(Ut(e)?Pt(e.value):e.value)})),Ke((()=>{var n=t();Ut(e)&&n===Pt(e.value)||("date"!==e.type||n||e.value)&&(e.value=n??"")}))}function Ot(e,t,n){Dt(e,"change",(()=>{var t=e.checked;n(t)})),null==t()&&n(!1),Ke((()=>{var n=t();e.checked=Boolean(n)}))}function Ut(e){var t=e.type;return"number"===t||"range"===t}function Pt(e){return""===e?null:+e}function Ft(e,t,n){if(e.multiple)return function(e,t){for(var n of e.options)n.selected=~t.indexOf(Vt(n))}(e,t);for(var r of e.options){var i=Vt(r);if(a=i,o=t,Object.is(lt(a),lt(o)))return void(r.selected=!0)}var a,o;n&&void 0===t||(e.selectedIndex=-1)}function Lt(e,t,n){var r=!0;Dt(e,"change",(()=>{var t;if(e.multiple)t=[].map.call(e.querySelectorAll(":checked"),Vt);else{var r=e.querySelector(":checked");t=r&&Vt(r)}n(t)})),Ye((()=>{var i=t();if(Ft(e,i,r),r&&void 0===i){var a=e.querySelector(":checked");null!==a&&(i=Vt(a),n(i))}e.__value=i,r=!1})),function(e,t){let n=!0;Ye((()=>{t&&Ft(e,Pe(t),n),n=!1;var r=new MutationObserver((()=>{var t=e.__value;Ft(e,t)}));return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}}))}(e)}function Vt(e){return"__value"in e?e.__value:e.value}class Bt{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,t){var n=this.#e.get(e)||new Set;return n.add(t),this.#e.set(e,n),this.#r().observe(e,this.#n),()=>{var n=this.#e.get(e);n.delete(t),0===n.size&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver((e=>{for(var t of e)for(var n of(Bt.entries.set(t.target,t),this.#e.get(t.target)||[]))n(t)})))}}var $t=new Bt({box:"border-box"});function Ht(e,t){var n=e&&e[C]?.t;return e===t||n===t}function jt(e={},t,n,r){return Ye((()=>{var i,a;return Ke((()=>{i=a,a=r?.()||[],Pe((()=>{e!==n(...a)&&(t(e,...a),i&&Ht(n(...i),e)&&t(null,...i))}))})),()=>{j((()=>{a&&Ht(n(...a),e)&&t(null,...a)}))}})),e}function Zt(e){return function(...t){t[0].target===this&&e.apply(this,t)}}function qt(e){return function(...t){return t[0].stopPropagation(),e.apply(this,t)}}function Gt(e){return function(...t){return t[0].preventDefault(),e.apply(this,t)}}function Yt(){const e=ye,t=e.l.u;t&&(t.b.length&&function(e){je(),Ke(e)}((()=>{Wt(e),V(t.b)})),Ge((()=>{const e=Pe((()=>t.m.map(L)));return()=>{for(const t of e)"function"==typeof t&&t()}})),t.a.length&&Ge((()=>{Wt(e),V(t.a)})))}function Wt(e){if(e.l.s)for(const t of e.l.s)Oe(t);!function(e){if("object"==typeof e&&e&&!(e instanceof EventTarget))if(C in e)$e(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];"object"==typeof n&&n&&C in n&&$e(n)}}(e.s)}function Kt(e,t){var n=e.$$events?.[t.type],r=z(n)?n.slice():null==n?[]:[n];for(var i of r)i.call(this,t)}function Qt(e,t,n,r){var i,a=!!(n&o),d=!!(n&s),u=!!(n&c),f=e[t],h=O(e,t)?.set,p=r,g=!0,m=()=>(u&&g&&(g=!1,p=Pe(r)),p);if(void 0===f&&void 0!==r&&(h&&d&&function(){throw new Error("props_invalid_value")}(),f=m(),h&&h(f)),d)i=()=>{var n=e[t];return void 0===n?m():(g=!0,n)};else{var w=(a?J:ee)((()=>e[t]));w.f|=A,i=()=>{var e=Oe(w);return void 0!==e&&(p=void 0),void 0===e?p:e}}if(!(n&l))return i;if(h){var b=e.$$legacy;return function(e,t){return arguments.length>0?(d&&t&&!b||h(t?i():e),e):i()}}var _=!1,v=!1,y=W(f),E=J((()=>{var e=i(),t=Oe(y);return _?(_=!1,v=!0,t):(v=!1,y.v=e)}));return a||(E.equals=G),function(e,t){var n=Oe(E);if(_e&&(_=v,i(),Oe(y)),arguments.length>0){const n=t?Oe(E):e;return E.equals(n)||(_=!0,Q(y,n),Oe(E)),e}return n}}var Xt=Object.defineProperty,Jt=Object.defineProperties,en=Object.getOwnPropertyDescriptors,tn=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,an=Math.pow,on=(e,t,n)=>t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t)=>{for(var n in t||(t={}))nn.call(t,n)&&on(e,n,t[n]);if(tn)for(var n of tn(t))rn.call(t,n)&&on(e,n,t[n]);return e},ln=(e,t)=>Jt(e,en(t)),cn=(e,t)=>{var n={};for(var r in e)nn.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&tn)for(var r of tn(e))t.indexOf(r)<0&&rn.call(e,r)&&(n[r]=e[r]);return n},dn=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},o=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);s((n=n.apply(e,t)).next())}));const un="p".charCodeAt(0),fn="H".charCodeAt(0),hn="Y".charCodeAt(0),pn="s".charCodeAt(0);let gn;function mn(e){let t=-1;gn||(gn=function(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}());for(let n=0;n<e.length;n++)t=gn[255&(t^e[n])]^t>>>8;return~t}function wn(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=un,r[1]=fn,r[2]=hn,r[3]=pn,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=255&t,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const i=mn(r),a=new Uint8Array(4);if(a[0]=i>>>24,a[1]=i>>>16,a[2]=i>>>8,a[3]=255&i,n){const t=function(e){for(let t=e.length-1;t>=4;t--)if(9===e[t-4]&&e[t-3]===un&&e[t-2]===fn&&e[t-1]===hn&&e[t]===pn)return t-3;return 0}(e);return e.set(r,t),e.set(a,t+13),e}{const t=new Uint8Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=9;const n=new Uint8Array(54);return n.set(e,0),n.set(t,33),n.set(r,37),n.set(a,50),n}}const bn="[modern-screenshot]",_n="undefined"!=typeof window,vn=_n&&"Worker"in window,yn=_n&&"atob"in window;var En;const xn=_n?null==(En=window.navigator)?void 0:En.userAgent:"",kn=xn.includes("Chrome"),Tn=xn.includes("AppleWebKit")&&!kn,Sn=xn.includes("Firefox"),An=e=>e&&"__CONTEXT__"in e,Nn=e=>"CSSFontFaceRule"===e.constructor.name,Cn=e=>"CSSImportRule"===e.constructor.name,In=e=>1===e.nodeType,Mn=e=>"object"==typeof e.className,zn=e=>"image"===e.tagName,Dn=e=>"use"===e.tagName,Rn=e=>In(e)&&void 0!==e.style&&!Mn(e),On=e=>8===e.nodeType,Un=e=>3===e.nodeType,Pn=e=>"IMG"===e.tagName,Fn=e=>"VIDEO"===e.tagName,Ln=e=>"CANVAS"===e.tagName,Vn=e=>"TEXTAREA"===e.tagName,Bn=e=>"INPUT"===e.tagName,$n=e=>"STYLE"===e.tagName,Hn=e=>"SCRIPT"===e.tagName,jn=e=>"SELECT"===e.tagName,Zn=e=>"SLOT"===e.tagName,qn=e=>"IFRAME"===e.tagName,Gn=(...e)=>console.warn(bn,...e),Yn=e=>console.time(`${bn} ${e}`),Wn=e=>console.timeEnd(`${bn} ${e}`),Kn=e=>{var t;const n=null==(t=null==e?void 0:e.createElement)?void 0:t.call(e,"canvas");return n&&(n.height=n.width=1),n&&"toDataURL"in n&&Boolean(n.toDataURL("image/webp").includes("image/webp"))},Qn=e=>e.startsWith("data:");function Xn(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(_n&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!_n)return e;const n=Jn().implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}function Jn(e){var t;return null!=(t=e&&In(e)?null==e?void 0:e.ownerDocument:e)?t:window.document}const er="http://www.w3.org/2000/svg";function tr(e,t="image/png",n=1){return dn(this,null,(function*(){try{return yield new Promise(((r,i)=>{e.toBlob((e=>{e?r(e):i(new Error("Blob is null"))}),t,n)}))}catch(r){if(yn)return Gn("Failed canvas to blob",{type:t,quality:n},r),function(e){var t,n;const[r,i]=e.split(","),a=null!=(n=null==(t=r.match(/data:(.+);/))?void 0:t[1])?n:void 0,o=window.atob(i),s=o.length,l=new Uint8Array(s);for(let e=0;e<s;e+=1)l[e]=o.charCodeAt(e);return new Blob([l],{type:a})}(e.toDataURL(t,n));throw r}}))}function nr(e,t){return new Promise(((n,r)=>{const i=new FileReader;i.onload=()=>n(i.result),i.onerror=()=>r(i.error),i.onabort=()=>r(new Error(`Failed read blob to ${t}`)),"dataUrl"===t?i.readAsDataURL(e):"arrayBuffer"===t&&i.readAsArrayBuffer(e)}))}const rr=e=>nr(e,"dataUrl"),ir=e=>nr(e,"arrayBuffer");function ar(e,t){const n=Jn(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function or(e,t){return new Promise((n=>{const{timeout:r,ownerDocument:i,onError:a}=null!=t?t:{},o="string"==typeof e?ar(e,Jn(i)):e;let s=null,l=null;function c(){n(o),s&&clearTimeout(s),null==l||l()}if(r&&(s=setTimeout(c,r)),Fn(o)){const e=o.currentSrc||o.src;if(!e)return o.poster?or(o.poster,t).then(n):c();if(o.readyState>=2)return c();const r=c,i=t=>{Gn("Failed video load",e,t),null==a||a(t),c()};l=()=>{o.removeEventListener("loadeddata",r),o.removeEventListener("error",i)},o.addEventListener("loadeddata",r,{once:!0}),o.addEventListener("error",i,{once:!0})}else{const e=zn(o)?o.href.baseVal:o.currentSrc||o.src;if(!e)return c();const t=()=>dn(this,null,(function*(){if(Pn(o)&&"decode"in o)try{yield o.decode()}catch(t){Gn("Failed to decode image, trying to render anyway",o.dataset.originalSrc||e,t)}c()})),n=t=>{Gn("Failed image load",o.dataset.originalSrc||e,t),c()};if(Pn(o)&&o.complete)return t();l=()=>{o.removeEventListener("load",t),o.removeEventListener("error",n)},o.addEventListener("load",t,{once:!0}),o.addEventListener("error",n,{once:!0})}}))}const sr=function(){let e=0;return()=>(e+=1,`u${`0000${(Math.random()*an(36,4)|0).toString(36)}`.slice(-4)}${e}`)}();function lr(e){return null==e?void 0:e.split(",").map((e=>e.trim().replace(/"|'/g,"").toLowerCase())).filter(Boolean)}function cr(e){return{time:t=>e&&Yn(t),timeEnd:t=>e&&Wn(t),warn:(...t)=>e&&Gn(...t)}}function dr(e){return{cache:e?"no-cache":"force-cache"}}function ur(e,t){return dn(this,null,(function*(){return An(e)?e:function(e,t){return dn(this,null,(function*(){var n,r,i,a,o;const{scale:s=1,workerUrl:l,workerNumber:c=1}=t||{},d=Boolean(null==t?void 0:t.debug),u=null==(n=null==t?void 0:t.features)||n,f=null!=(r=e.ownerDocument)?r:_n?window.document:void 0,h=null!=(a=null==(i=e.ownerDocument)?void 0:i.defaultView)?a:_n?window:void 0,p=new Map,g=ln(sn({width:0,height:0,quality:1,type:"image/png",scale:s,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:d,fetch:sn({requestInit:dr(null==(o=null==t?void 0:t.fetch)?void 0:o.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},null==t?void 0:t.fetch),fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:c,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1},t),{__CONTEXT__:!0,log:cr(d),node:e,ownerDocument:f,ownerWindow:h,dpi:1===s?null:96*s,svgStyleElement:fr(f),svgDefsElement:null==f?void 0:f.createElementNS(er,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...new Array(vn&&l&&c?c:0)].map((()=>{try{const e=new Worker(l);return e.onmessage=e=>dn(this,null,(function*(){var t,n,r,i;const{url:a,result:o}=e.data;o?null==(n=null==(t=p.get(a))?void 0:t.resolve)||n.call(t,o):null==(i=null==(r=p.get(a))?void 0:r.reject)||i.call(r,new Error(`Error receiving message from worker: ${a}`))})),e.onmessageerror=e=>{var t,n;const{url:r}=e.data;null==(n=null==(t=p.get(r))?void 0:t.reject)||n.call(t,new Error(`Error receiving message from worker: ${r}`))},e}catch(e){return Gn("Failed to new Worker",e),null}})).filter(Boolean),fontFamilies:new Set,fontCssTexts:new Map,acceptOfImage:`${[Kn(f)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:p,drawImageCount:0,tasks:[],features:u,isEnable:e=>{var t,n;return"restoreScrollPosition"===e?"boolean"!=typeof u&&(null!=(t=u[e])&&t):"boolean"==typeof u?u:null==(n=u[e])||n}});g.log.time("wait until load"),yield function(e,t){return dn(this,null,(function*(){Rn(e)&&(Pn(e)||Fn(e)?yield or(e,{timeout:t}):yield Promise.all(["img","video"].flatMap((n=>Array.from(e.querySelectorAll(n)).map((e=>or(e,{timeout:t})))))))}))}(e,g.timeout),g.log.timeEnd("wait until load");const{width:m,height:w}=function(e,t){let{width:n,height:r}=t;if(In(e)&&(!n||!r)){const t=e.getBoundingClientRect();n=n||t.width||Number(e.getAttribute("width"))||0,r=r||t.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}(e,g);return g.width=m,g.height=w,g}))}(e,ln(sn({},t),{autoDestruct:!0}))}))}function fr(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode("\n.______background-clip--text {\n  background-clip: text;\n  -webkit-background-clip: text;\n}\n");return t.appendChild(n),t}function hr(e,t){return dn(this,null,(function*(){const{log:n,timeout:r,drawImageCount:i,drawImageInterval:a}=t;n.time("image to canvas");const o=yield or(e,{timeout:r}),{canvas:s,context2d:l}=function(e,t){const{width:n,height:r,scale:i,backgroundColor:a,maximumCanvasSize:o}=t,s=e.createElement("canvas");s.width=Math.floor(n*i),s.height=Math.floor(r*i),s.style.width=`${n}px`,s.style.height=`${r}px`,o&&(s.width>o||s.height>o)&&(s.width>o&&s.height>o?s.width>s.height?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o):s.width>o?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o));const l=s.getContext("2d");return l&&a&&(l.fillStyle=a,l.fillRect(0,0,s.width,s.height)),{canvas:s,context2d:l}}(e.ownerDocument,t),c=()=>{try{null==l||l.drawImage(o,0,0,s.width,s.height)}catch(e){Gn("Failed to drawImage",e)}};if(c(),t.isEnable("fixSvgXmlDecode"))for(let e=0;e<i;e++)yield new Promise((t=>{setTimeout((()=>{c(),t()}),e+a)}));return t.drawImageCount=0,n.timeEnd("image to canvas"),s}))}const pr=["width","height","-webkit-text-fill-color"],gr=["stroke","fill"];function mr(e,t,n){var r;const{defaultComputedStyles:i,ownerDocument:a}=n,o=e.nodeName.toLowerCase(),s=Mn(e)&&"svg"!==o,l=s?gr.map((t=>[t,e.getAttribute(t)])).filter((([,e])=>null!==e)):[],c=[s&&"svg",o,l.map(((e,t)=>`${e}=${t}`)).join(","),t].filter(Boolean).join(":");if(i.has(c))return i.get(c);let d=n.sandbox;if(!d)try{a&&(d=a.createElement("iframe"),d.id=`__SANDBOX__-${sr()}`,d.width="0",d.height="0",d.style.visibility="hidden",d.style.position="fixed",a.body.appendChild(d),null==(r=d.contentWindow)||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),n.sandbox=d)}catch(e){Gn("Failed to create iframe sandbox",e)}if(!d)return new Map;const u=d.contentWindow;if(!u)return new Map;const f=u.document;let h,p;s?(h=f.createElementNS(er,"svg"),p=h.ownerDocument.createElementNS(h.namespaceURI,o),l.forEach((([e,t])=>{p.setAttributeNS(null,e,t)})),h.appendChild(p)):h=p=f.createElement(o),p.textContent=" ",f.body.appendChild(h);const g=u.getComputedStyle(p,t),m=new Map;for(let e=g.length,t=0;t<e;t++){const e=g.item(t);pr.includes(e)||m.set(e,g.getPropertyValue(e))}return f.body.removeChild(h),i.set(c,m),m}function wr(e,t,n){var r;const i=new Map,a=[],o=new Map;if(n)for(const e of n)s(e);else for(let t=e.length,n=0;n<t;n++){s(e.item(n))}for(let e=a.length,t=0;t<e;t++)null==(r=o.get(a[t]))||r.forEach(((e,t)=>i.set(t,e)));function s(n){const r=e.getPropertyValue(n),s=e.getPropertyPriority(n),l=n.lastIndexOf("-"),c=l>-1?n.substring(0,l):void 0;if(c){let e=o.get(c);e||(e=new Map,o.set(c,e)),e.set(n,[r,s])}t.get(n)===r&&!s||(c?a.push(c):i.set(n,[r,s]))}return i}const br=[":before",":after"],_r=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function vr(e){if(e.ownerDocument)try{const t=e.toDataURL();if("data:,"!==t)return ar(t,e.ownerDocument)}catch(e){}const t=e.cloneNode(!1),n=e.getContext("2d"),r=t.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(e){Gn("Failed to clone canvas",e)}return t}function yr(e,t){return Ln(e)?vr(e):qn(e)?function(e,t){var n;try{if(null!=(n=null==e?void 0:e.contentDocument)&&n.body)return Sr(e.contentDocument.body,t)}catch(e){Gn("Failed to clone iframe",e)}return e.cloneNode(!1)}(e,t):Pn(e)?function(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager"),t}(e):Fn(e)?function(e){return dn(this,null,(function*(){if(e.ownerDocument&&!e.currentSrc&&e.poster)return ar(e.poster,e.ownerDocument);const t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);const n=t.ownerDocument;if(n){let r=!0;if(yield or(t,{onError:()=>r=!1}),!r)return e.poster?ar(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,yield new Promise((e=>{t.addEventListener("seeked",e,{once:!0})}));const i=n.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;try{const e=i.getContext("2d");e&&e.drawImage(t,0,0,i.width,i.height)}catch(n){return Gn("Failed to clone video",n),e.poster?ar(e.poster,e.ownerDocument):t}return vr(i)}return t}))}(e):e.cloneNode(!1)}const Er=new Set(["symbol"]);function xr(e,t,n,r){return dn(this,null,(function*(){if(In(n)&&($n(n)||Hn(n))||r.filter&&!r.filter(n))return;Er.has(t.nodeName)||Er.has(n.nodeName)?r.currentParentNodeStyle=void 0:r.currentParentNodeStyle=r.currentNodeStyle;const i=yield Sr(n,r);r.isEnable("restoreScrollPosition")&&function(e,t){if(!Rn(e)||!Rn(t))return;const{scrollTop:n,scrollLeft:r}=e;if(!n&&!r)return;const{transform:i}=t.style,a=new DOMMatrix(i),{a:o,b:s,c:l,d:c}=a;a.a=1,a.b=0,a.c=0,a.d=1,a.translateSelf(-r,-n),a.a=o,a.b=s,a.c=l,a.d=c,t.style.transform=a.toString()}(e,i),t.appendChild(i)}))}function kr(e,t,n){return dn(this,null,(function*(){var r,i;for(let a=null!=(i=In(e)?null==(r=e.shadowRoot)?void 0:r.firstChild:void 0)?i:e.firstChild;a;a=a.nextSibling)if(!On(a))if(In(a)&&Zn(a)&&"function"==typeof a.assignedNodes){const r=a.assignedNodes();for(let i=0;i<r.length;i++)yield xr(e,t,r[i],n)}else yield xr(e,t,a,n)}))}const Tr=/^[\w-:]+$/;function Sr(e,t,n=!1){return dn(this,null,(function*(){var r,i,a,o;const{ownerDocument:s,ownerWindow:l,fontFamilies:c}=t;if(s&&Un(e))return s.createTextNode(e.data);if(s&&l&&In(e)&&(Rn(e)||Mn(e))){const s=yield yr(e,t);if(t.isEnable("removeAbnormalAttributes")){const e=s.getAttributeNames();for(let t=e.length,n=0;n<t;n++){const t=e[n];Tr.test(t)||s.removeAttribute(t)}}const l=t.currentNodeStyle=function(e,t,n,r){var i,a,o,s;const{ownerWindow:l,includeStyleProperties:c,currentParentNodeStyle:d}=r,u=t.style,f=l.getComputedStyle(e),h=mr(e,null,r);null==d||d.forEach(((e,t)=>{h.delete(t)}));const p=wr(f,h,c);return p.delete("transition-property"),p.delete("all"),p.delete("d"),p.delete("content"),n&&(p.delete("margin-top"),p.delete("margin-right"),p.delete("margin-bottom"),p.delete("margin-left"),p.delete("margin-block-start"),p.delete("margin-block-end"),p.delete("margin-inline-start"),p.delete("margin-inline-end"),p.set("box-sizing",["border-box",""])),"text"===(null==(i=p.get("background-clip"))?void 0:i[0])&&t.classList.add("______background-clip--text"),kn&&(p.has("font-kerning")||p.set("font-kerning",["normal",""]),("hidden"===(null==(a=p.get("overflow-x"))?void 0:a[0])||"hidden"===(null==(o=p.get("overflow-y"))?void 0:o[0]))&&"ellipsis"===(null==(s=p.get("text-overflow"))?void 0:s[0])&&e.scrollWidth===e.clientWidth&&p.set("text-overflow",["clip",""])),p.forEach((([e,t],n)=>{u.setProperty(n,e,t)})),p}(e,s,n,t);n&&function(e,t){const{backgroundColor:n,width:r,height:i,style:a}=t,o=e.style;if(n&&o.setProperty("background-color",n,"important"),r&&o.setProperty("width",`${r}px`,"important"),i&&o.setProperty("height",`${i}px`,"important"),a)for(const e in a)o[e]=a[e]}(s,t);let d=!1;if(t.isEnable("copyScrollbar")){const t=[null==(r=l.get("overflow-x"))?void 0:r[0],null==(i=l.get("overflow-y"))?void 0:i[1]];d=t.includes("scroll")||(t.includes("auto")||t.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}return function(e,t,n,r){const{ownerWindow:i,svgStyleElement:a,svgStyles:o,currentNodeStyle:s}=r;function l(n){var a;const l=i.getComputedStyle(e,n);let c=l.getPropertyValue("content");if(!c||"none"===c)return;c=c.replace(/(')|(")|(counter\(.+\))/g,"");const d=[sr()],u=mr(e,n,r);null==s||s.forEach(((e,t)=>{u.delete(t)}));const f=wr(l,u,r.includeStyleProperties);f.delete("content"),f.delete("-webkit-locale"),"text"===(null==(a=f.get("background-clip"))?void 0:a[0])&&t.classList.add("______background-clip--text");const h=[`content: '${c}';`];if(f.forEach((([e,t],n)=>{h.push(`${n}: ${e}${t?" !important":""};`)})),1===h.length)return;try{t.className=[t.className,...d].join(" ")}catch(e){return}const p=h.join("\n  ");let g=o.get(p);g||(g=[],o.set(p,g)),g.push(`.${d[0]}:${n}`)}a&&i&&(br.forEach(l),n&&_r.forEach(l))}(e,s,d,t),function(e,t){Vn(e)&&(t.innerHTML=e.value),(Vn(e)||Bn(e)||jn(e))&&t.setAttribute("value",e.value)}(e,s),null==(o=lr(null==(a=l.get("font-family"))?void 0:a[0]))||o.forEach((e=>c.add(e))),Fn(e)||(yield kr(e,s,t)),s}const d=e.cloneNode(!1);return yield kr(e,d,t),d}))}function Ar(e,t){const{url:n,requestType:r="text",responseType:i="text",imageDom:a}=t;let o=n;const{timeout:s,acceptOfImage:l,requests:c,fetchFn:d,fetch:{requestInit:u,bypassingCache:f,placeholderImage:h},workers:p}=e;"image"===r&&(Tn||Sn)&&e.drawImageCount++;let g=c.get(n);if(!g){f&&f instanceof RegExp&&f.test(o)&&(o+=(/\?/.test(o)?"&":"?")+(new Date).getTime());const e=sn({url:o,timeout:s,responseType:i,headers:"image"===r?{accept:l}:void 0},u);g={type:r,resolve:void 0,reject:void 0,response:null},g.response=(()=>dn(this,null,(function*(){if(d&&"image"===r){const e=yield d(n);if(e)return e}return!Tn&&n.startsWith("http")&&p.length?new Promise(((t,r)=>{p[c.size&p.length-1].postMessage(sn({rawUrl:n},e)),g.resolve=t,g.reject=r})):function(e){const t=e,{url:n,timeout:r,responseType:i}=t,a=cn(t,["url","timeout","responseType"]),o=new AbortController,s=r?setTimeout((()=>o.abort()),r):void 0;return fetch(n,sn({signal:o.signal},a)).then((e=>{if(!e.ok)throw new Error("Failed fetch, not 2xx response",{cause:e});return"dataUrl"===i?e.blob().then(rr):e.text()})).finally((()=>clearTimeout(s)))}(e)})))().catch((e=>{if(c.delete(n),"image"===r&&h)return Gn("Failed to fetch image base64, trying to use placeholder image",o),"string"==typeof h?h:h(a);throw e})),c.set(n,g)}return g.response}function Nr(e,t,n,r){return dn(this,null,(function*(){if(!Cr(e))return e;for(const[i,a]of function(e,t){const n=[];return e.replace(Ir,((e,r,i)=>(n.push([i,Xn(i,t)]),e))),n.filter((([e])=>!Qn(e)))}(e,t))try{const t=yield Ar(n,{url:a,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(Mr(i),`$1${t}$3`)}catch(e){Gn("Failed to fetch css data url",i,e)}return e}))}function Cr(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const Ir=/url\((['"]?)([^'"]+?)\1\)/g;function Mr(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function zr(e,t){return dn(this,null,(function*(){const{ownerDocument:e,svgStyleElement:n,fontFamilies:r,fontCssTexts:i,tasks:a,font:o}=t;if(e&&n&&r.size)if(o&&o.cssText){const r=Pr(o.cssText,t);n.appendChild(e.createTextNode(`${r}\n`))}else{const o=Array.from(e.styleSheets).filter((e=>{try{return"cssRules"in e&&Boolean(e.cssRules.length)}catch(t){return Gn(`Error while reading CSS rules from ${e.href}`,t),!1}}));yield Promise.all(o.flatMap((e=>Array.from(e.cssRules).map(((n,r)=>dn(this,null,(function*(){if(Cn(n)){let i=r+1;const a=n.href;let o="";try{o=yield Ar(t,{url:a,requestType:"text",responseType:"text"})}catch(e){Gn(`Error fetch remote css import from ${a}`,e)}const s=o.replace(Ir,((e,t,n)=>e.replace(n,Xn(n,a))));for(const t of function(e){if(null==e)return[];const t=[];let n=e.replace(Dr,"");for(;;){const e=Rr.exec(n);if(!e)break;t.push(e[0])}n=n.replace(Rr,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(e)i.lastIndex=r.lastIndex;else{if(e=i.exec(n),!e)break;r.lastIndex=i.lastIndex}t.push(e[0])}return t}(s))try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(e){Gn("Error inserting rule from remote css import",{rule:t,error:e})}}}))))))),o.flatMap((e=>Array.from(e.cssRules))).filter((e=>{var t;return Nn(e)&&Cr(e.style.getPropertyValue("src"))&&(null==(t=lr(e.style.getPropertyValue("font-family")))?void 0:t.some((e=>r.has(e))))})).forEach((r=>{const o=r,s=i.get(o.cssText);s?n.appendChild(e.createTextNode(`${s}\n`)):a.push(Nr(o.cssText,o.parentStyleSheet?o.parentStyleSheet.href:null,t).then((r=>{r=Pr(r,t),i.set(o.cssText,r),n.appendChild(e.createTextNode(`${r}\n`))})))}))}}))}const Dr=/(\/\*[\s\S]*?\*\/)/gi,Rr=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;const Or=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ur=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Pr(e,t){const{font:n}=t,r=n?null==n?void 0:n.preferredFormat:void 0;return r?e.replace(Ur,(e=>{for(;;){const[t,,n]=Or.exec(e)||[];if(!n)return"";if(n===r)return`src: ${t};`}})):e}const Fr=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Lr(e,t){const{tasks:n}=t;In(e)&&((Pn(e)||zn(e))&&n.push(...function(e,t){if(Pn(e)){const n=e.currentSrc||e.src;if(!Qn(n))return[Ar(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then((t=>{t&&(e.srcset="",e.dataset.originalSrc=n,e.src=t||"")}))];(Tn||Sn)&&t.drawImageCount++}else if(Mn(e)&&!Qn(e.href.baseVal)){const n=e.href.baseVal;return[Ar(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then((t=>{t&&(e.dataset.originalSrc=n,e.href.baseVal=t||"")}))]}return[]}(e,t)),Dn(e)&&n.push(...function(e,t){var n;const{ownerDocument:r,svgDefsElement:i}=t,a=null!=(n=e.getAttribute("href"))?n:e.getAttribute("xlink:href");if(!a)return[];const[o,s]=a.split("#");if(s){const n=`#${s}`,a=null==r?void 0:r.querySelector(`svg ${n}`);if(o&&e.setAttribute("href",n),null!=i&&i.querySelector(n))return[];if(a)return null==i||i.appendChild(a.cloneNode(!0)),[];if(o)return[Ar(t,{url:o,responseType:"text"}).then((e=>{null==i||i.insertAdjacentHTML("beforeend",e)}))]}return[]}(e,t))),Rn(e)&&n.push(...function(e,t){return Fr.map((n=>{const r=e.getPropertyValue(n);return r&&"none"!==r?((Tn||Sn)&&t.drawImageCount++,Nr(r,null,t,!0).then((t=>{!t||r===t||e.setProperty(n,t,e.getPropertyPriority(n))}))):null})).filter(Boolean)}(e.style,t)),e.childNodes.forEach((e=>{Lr(e,t)}))}function Vr(e,t){return dn(this,null,(function*(){const n=yield ur(e,t);if(In(n.node)&&Mn(n.node))return n.node;const{ownerDocument:r,log:i,tasks:a,svgStyleElement:o,svgDefsElement:s,svgStyles:l,font:c,progress:d,autoDestruct:u,onCloneNode:f,onEmbedNode:h,onCreateForeignObjectSvg:p}=n;i.time("clone node");const g=yield Sr(n.node,n,!0);if(o&&r){let e="";l.forEach(((t,n)=>{e+=`${t.join(",\n")} {\n  ${n}\n}\n`})),o.appendChild(r.createTextNode(e))}i.timeEnd("clone node"),null==f||f(g),!1!==c&&In(g)&&(i.time("embed web font"),yield zr(0,n),i.timeEnd("embed web font")),i.time("embed node"),Lr(g,n);const m=a.length;let w=0;null==d||d(w,m),yield Promise.all([...Array(4)].map((()=>dn(this,null,(function*(){for(;;){const e=a.pop();if(!e)break;try{yield e}catch(e){Gn("Failed to run task",e)}null==d||d(++w,m)}}))))),i.timeEnd("embed node"),null==h||h(g);const b=function(e,t){const{width:n,height:r}=t,i=function(e,t,n){const r=Jn(n).createElementNS(er,"svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}(n,r,e.ownerDocument),a=i.ownerDocument.createElementNS(i.namespaceURI,"foreignObject");return a.setAttributeNS(null,"x","0%"),a.setAttributeNS(null,"y","0%"),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.append(e),i.appendChild(a),i}(g,n);return s&&b.insertBefore(s,b.children[0]),o&&b.insertBefore(o,b.children[0]),u&&function(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(e){}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}(n),null==p||p(b),b}))}function Br(e,t){return dn(this,null,(function*(){var n;const r=yield ur(e,t),i=yield Vr(r),a=function(e,t){let n=(new XMLSerializer).serializeToString(e);return t&&(n=n.replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}(i,r.isEnable("removeControlCharacter"));r.autoDestruct||(r.svgStyleElement=fr(r.ownerDocument),r.svgDefsElement=null==(n=r.ownerDocument)?void 0:n.createElementNS(er,"defs"),r.svgStyles.clear());const o=ar(a,i.ownerDocument);return yield hr(o,r)}))}function $r(e){let t;if(e){if(!(e instanceof ArrayBuffer))throw Error("Invalid buffer received.");if(this.datas=new DataView(e,0,$r.HEADER_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"h"!==String.fromCharCode(this.datas.getUint8(2))||"d"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileHeader : MThd prefix not found");if(6!==this.datas.getUint32(4))throw new Error("Invalid MIDIFileHeader : Chunk length must be 6")}else t=new Uint8Array($r.HEADER_LENGTH),t[0]=77,t[1]=84,t[2]=104,t[3]=100,t[4]=0,t[5]=0,t[6]=0,t[7]=6,t[8]=0,t[9]=1,t[10]=0,t[11]=1,t[12]=0,t[13]=192,this.datas=new DataView(t.buffer,0,$r.HEADER_LENGTH)}$r.HEADER_LENGTH=14,$r.FRAMES_PER_SECONDS=1,$r.TICKS_PER_BEAT=2,$r.prototype.getFormat=function(){const e=this.datas.getUint16(8);if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI file : MIDI format ("+e+"), format can be 0, 1 or 2 only.");return e},$r.prototype.setFormat=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI format given ("+e+"), format can be 0, 1 or 2 only.");this.datas.setUint16(8,e)},$r.prototype.getTracksCount=function(){return this.datas.getUint16(10)},$r.prototype.setTracksCount=function(e){return this.datas.setUint16(10,e)},$r.prototype.getTickResolution=function(e){return 32768&this.datas.getUint16(12)?1e6/(this.getSMPTEFrames()*this.getTicksPerFrame()):(e=e||5e5)/this.getTicksPerBeat()},$r.prototype.getTimeDivision=function(){return 32768&this.datas.getUint16(12)?$r.FRAMES_PER_SECONDS:$r.TICKS_PER_BEAT},$r.prototype.getTicksPerBeat=function(){var e=this.datas.getUint16(12);if(32768&e)throw new Error("Time division is not expressed as ticks per beat.");return e},$r.prototype.setTicksPerBeat=function(e){this.datas.setUint16(12,32767&e)},$r.prototype.getSMPTEFrames=function(){const e=this.datas.getUint16(12);let t;if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");if(t=32512&e,-1===[24,25,29,30].indexOf(t))throw new Error("Invalid SMPTE frames value ("+t+").");return 29===t?29.97:t},$r.prototype.getTicksPerFrame=function(){const e=this.datas.getUint16(12);if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");return 255&e},$r.prototype.setSMTPEDivision=function(e,t){if(29.97===e&&(e=29),-1===[24,25,29,30].indexOf(e))throw new Error("Invalid SMPTE frames value given ("+e+").");if(0>t||255<t)throw new Error("Invalid ticks per frame value given ("+e+").");this.datas.setUint8(12,128|e),this.datas.setUint8(13,t)};var Hr=$r;function jr(e,t){let n,r;if(e){if(!(e instanceof ArrayBuffer))throw new Error("Invalid buffer received.");if(12>e.byteLength-t)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : Buffer length must size at least 12bytes");if(this.datas=new DataView(e,t,jr.HDR_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"r"!==String.fromCharCode(this.datas.getUint8(2))||"k"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : MTrk prefix not found");if(r=this.getTrackLength(),e.byteLength-t<r)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : The track size exceed the buffer length.");if(this.datas=new DataView(e,t,jr.HDR_LENGTH+r),255!==this.datas.getUint8(jr.HDR_LENGTH+(r-3))||47!==this.datas.getUint8(jr.HDR_LENGTH+(r-2))||0!==this.datas.getUint8(jr.HDR_LENGTH+(r-1)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : No track end event found at the expected index ("+(jr.HDR_LENGTH+(r-1)).toString(16)+").")}else n=new Uint8Array(12),n[0]=77,n[1]=84,n[2]=114,n[3]=107,n[4]=0,n[5]=0,n[6]=0,n[7]=4,n[8]=0,n[9]=255,n[10]=47,n[11]=0,this.datas=new DataView(n.buffer,0,jr.HDR_LENGTH+4)}jr.HDR_LENGTH=8,jr.prototype.getTrackLength=function(){return this.datas.getUint32(4)},jr.prototype.setTrackLength=function(e){return this.datas.setUint32(4,e)},jr.prototype.getTrackContent=function(){return new DataView(this.datas.buffer,this.datas.byteOffset+jr.HDR_LENGTH,this.datas.byteLength-jr.HDR_LENGTH)},jr.prototype.setTrackContent=function(e){let t,n,r,i;const a=e.byteLength-e.byteOffset;if(4>a)throw new Error("Invalid track length, must size at least 4bytes");for(this.datas=new DataView(new Uint8Array(jr.HDR_LENGTH+a).buffer),this.datas.setUint8(0,77),this.datas.setUint8(1,84),this.datas.setUint8(2,114),this.datas.setUint8(3,107),this.datas.setUint32(4,a),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=new Uint8Array(this.datas.buffer,jr.HDR_LENGTH,a),r=0,i=t.length;r<i;r++)n[r]=t[r]};var Zr=jr;function qr(){throw new Error("MIDIEvents function not intended to be run.")}qr.EVENT_META=255,qr.EVENT_SYSEX=240,qr.EVENT_DIVSYSEX=247,qr.EVENT_MIDI=8,qr.EVENT_META_SEQUENCE_NUMBER=0,qr.EVENT_META_TEXT=1,qr.EVENT_META_COPYRIGHT_NOTICE=2,qr.EVENT_META_TRACK_NAME=3,qr.EVENT_META_INSTRUMENT_NAME=4,qr.EVENT_META_LYRICS=5,qr.EVENT_META_MARKER=6,qr.EVENT_META_CUE_POINT=7,qr.EVENT_META_MIDI_CHANNEL_PREFIX=32,qr.EVENT_META_END_OF_TRACK=47,qr.EVENT_META_SET_TEMPO=81,qr.EVENT_META_SMTPE_OFFSET=84,qr.EVENT_META_TIME_SIGNATURE=88,qr.EVENT_META_KEY_SIGNATURE=89,qr.EVENT_META_SEQUENCER_SPECIFIC=127,qr.EVENT_MIDI_NOTE_OFF=8,qr.EVENT_MIDI_NOTE_ON=9,qr.EVENT_MIDI_NOTE_AFTERTOUCH=10,qr.EVENT_MIDI_CONTROLLER=11,qr.EVENT_MIDI_PROGRAM_CHANGE=12,qr.EVENT_MIDI_CHANNEL_AFTERTOUCH=13,qr.EVENT_MIDI_PITCH_BEND=14,qr.MIDI_1PARAM_EVENTS=[qr.EVENT_MIDI_PROGRAM_CHANGE,qr.EVENT_MIDI_CHANNEL_AFTERTOUCH],qr.MIDI_2PARAMS_EVENTS=[qr.EVENT_MIDI_NOTE_OFF,qr.EVENT_MIDI_NOTE_ON,qr.EVENT_MIDI_NOTE_AFTERTOUCH,qr.EVENT_MIDI_CONTROLLER,qr.EVENT_MIDI_PITCH_BEND],qr.createParser=function(e,t,n){var r,i,a,o,s;if(e instanceof DataView&&(e={position:t||0,buffer:e,readUint8:function(){return this.buffer.getUint8(this.position++)},readUint16:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readUint32:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readVarInt:function(){for(var e,t=0,n=0;4>n++;){if(!(128&(e=this.readUint8())))return t+e;t+=127&e,t<<=7}throw new Error("0x"+this.position.toString(16)+": Variable integer length cannot exceed 4 bytes")},readBytes:function(e){for(var t=[];0<e;e--)t.push(this.readUint8());return t},pos:function(){return"0x"+(this.buffer.byteOffset+this.position).toString(16)},end:function(){return this.position===this.buffer.byteLength}},t=0),0<t)for(;t--;)e.readUint8();return{next:function(){if(e.end())return null;if(i={index:e.pos(),delta:e.readVarInt()},240&~(r=e.readUint8())){if(128&r)a=r>>4,o=15&r,s=e.readUint8();else{if(!a)throw new Error(e.pos()+" Running status without previous event");s=r}switch(i.type=qr.EVENT_MIDI,i.subtype=a,i.channel=o,i.param1=s,a){case qr.EVENT_MIDI_NOTE_OFF:return i.param2=e.readUint8(),i;case qr.EVENT_MIDI_NOTE_ON:return i.param2=e.readUint8(),i.param2||(i.subtype=qr.EVENT_MIDI_NOTE_OFF,i.param2=127),i;case qr.EVENT_MIDI_NOTE_AFTERTOUCH:case qr.EVENT_MIDI_CONTROLLER:return i.param2=e.readUint8(),i;case qr.EVENT_MIDI_PROGRAM_CHANGE:case qr.EVENT_MIDI_CHANNEL_AFTERTOUCH:return i;case qr.EVENT_MIDI_PITCH_BEND:return i.param2=e.readUint8(),i;default:if(n)throw new Error(e.pos()+" Unknown MIDI event type ("+a.toString(16)+").");return i}}else{if(r!==qr.EVENT_META){if(r===qr.EVENT_SYSEX||r===qr.EVENT_DIVSYSEX)return i.type=r,i.length=e.readVarInt(),i.data=e.readBytes(i.length),i;if(n)throw new Error(e.pos()+" Unknown event type "+r.toString(16)+", Delta: "+i.delta+".");return i.type=r,i.badsubtype=e.readVarInt(),i.length=e.readUint8(),i.data=e.readBytes(i.length),i}switch(i.type=qr.EVENT_META,i.subtype=e.readUint8(),i.length=e.readVarInt(),i.subtype){case qr.EVENT_META_SEQUENCE_NUMBER:if(n&&2!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.msb=e.readUint8(),i.lsb=e.readUint8(),i;case qr.EVENT_META_TEXT:case qr.EVENT_META_COPYRIGHT_NOTICE:case qr.EVENT_META_TRACK_NAME:case qr.EVENT_META_INSTRUMENT_NAME:case qr.EVENT_META_LYRICS:case qr.EVENT_META_MARKER:case qr.EVENT_META_CUE_POINT:return i.data=e.readBytes(i.length),i;case qr.EVENT_META_MIDI_CHANNEL_PREFIX:if(n&&1!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.prefix=e.readUint8(),i;case qr.EVENT_META_END_OF_TRACK:if(n&&0!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i;case qr.EVENT_META_SET_TEMPO:if(n&&3!==i.length)throw new Error(e.pos()+" Tempo meta event length must be 3.");return i.tempo=(e.readUint8()<<16)+(e.readUint8()<<8)+e.readUint8(),i.tempoBPM=6e7/i.tempo,i;case qr.EVENT_META_SMTPE_OFFSET:if(n&&5!==i.length)throw new Error(e.pos()+" Bad metaevent length.");if(i.hour=e.readUint8(),n&&23<i.hour)throw new Error(e.pos()+" SMTPE offset hour value must be part of 0-23.");if(i.minutes=e.readUint8(),n&&59<i.minutes)throw new Error(e.pos()+" SMTPE offset minutes value must be part of 0-59.");if(i.seconds=e.readUint8(),n&&59<i.seconds)throw new Error(e.pos()+" SMTPE offset seconds value must be part of 0-59.");if(i.frames=e.readUint8(),n&&30<i.frames)throw new Error(e.pos()+" SMTPE offset frames value must be part of 0-30.");if(i.subframes=e.readUint8(),n&&99<i.subframes)throw new Error(e.pos()+" SMTPE offset subframes value must be part of 0-99.");return i;case qr.EVENT_META_KEY_SIGNATURE:if(n&&2!==i.length)throw new Error(e.pos()+" Bad metaevent length.");if(i.key=e.readUint8(),n&&(-7>i.key||7<i.key))throw new Error(e.pos()+" Bad metaevent length.");if(i.scale=e.readUint8(),n&&0!==i.scale&&1!==i.scale)throw new Error(e.pos()+" Key signature scale value must be 0 or 1.");return i;case qr.EVENT_META_TIME_SIGNATURE:if(n&&4!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.data=e.readBytes(i.length),i.param1=i.data[0],i.param2=i.data[1],i.param3=i.data[2],i.param4=i.data[3],i;case qr.EVENT_META_SEQUENCER_SPECIFIC:return i.data=e.readBytes(i.length),i;default:if(n)throw new Error(e.pos()+" Unknown meta event type ("+i.subtype.toString(16)+").");return i.data=e.readBytes(i.length),i}}}}},qr.writeToTrack=function(e,t,n){var r,i,a,o,s=0;for(r=0,i=e.length;r<i;r++){if(e[r].delta>>>28)throw Error("Event #"+r+": Maximum delta time value reached ("+e[r].delta+"/134217728 max)");if(e[r].delta>>>21&&(t[s++]=e[r].delta>>>21&127|128),e[r].delta>>>14&&(t[s++]=e[r].delta>>>14&127|128),e[r].delta>>>7&&(t[s++]=e[r].delta>>>7&127|128),t[s++]=127&e[r].delta,e[r].type===qr.EVENT_MIDI)t[s++]=(e[r].subtype<<4)+e[r].channel,t[s++]=e[r].param1,-1!==qr.MIDI_2PARAMS_EVENTS.indexOf(e[r].subtype)&&(t[s++]=e[r].param2);else{if(t[s++]=e[r].type,e[r].type===qr.EVENT_META&&(t[s++]=e[r].subtype),e[r].length>>>28)throw Error("Event #"+r+": Maximum length reached ("+e[r].length+"/134217728 max)");if(e[r].length>>>21&&(t[s++]=e[r].length>>>21&127|128),e[r].length>>>14&&(t[s++]=e[r].length>>>14&127|128),e[r].length>>>7&&(t[s++]=e[r].length>>>7&127|128),t[s++]=127&e[r].length,e[r].type===qr.EVENT_META)switch(e[r].subtype){case qr.EVENT_META_SEQUENCE_NUMBER:t[s++]=e[r].msb,t[s++]=e[r].lsb;break;case qr.EVENT_META_TEXT:case qr.EVENT_META_COPYRIGHT_NOTICE:case qr.EVENT_META_TRACK_NAME:case qr.EVENT_META_INSTRUMENT_NAME:case qr.EVENT_META_LYRICS:case qr.EVENT_META_MARKER:case qr.EVENT_META_CUE_POINT:for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a];break;case qr.EVENT_META_MIDI_CHANNEL_PREFIX:t[s++]=e[r].prefix;break;case qr.EVENT_META_END_OF_TRACK:break;case qr.EVENT_META_SET_TEMPO:t[s++]=e[r].tempo>>16,t[s++]=e[r].tempo>>8&255,t[s++]=255&e[r].tempo;break;case qr.EVENT_META_SMTPE_OFFSET:if(n&&23<e[r].hour)throw new Error("Event #"+r+": SMTPE offset hour value must be part of 0-23.");if(t[s++]=e[r].hour,n&&59<e[r].minutes)throw new Error("Event #"+r+": SMTPE offset minutes value must be part of 0-59.");if(t[s++]=e[r].minutes,n&&59<e[r].seconds)throw new Error("Event #"+r+": SMTPE offset seconds value must be part of 0-59.");if(t[s++]=e[r].seconds,n&&30<e[r].frames)throw new Error("Event #"+r+": SMTPE offset frames amount must be part of 0-30.");if(t[s++]=e[r].frames,n&&99<e[r].subframes)throw new Error("Event #"+r+": SMTPE offset subframes amount must be part of 0-99.");t[s++]=e[r].subframes;break;case qr.EVENT_META_KEY_SIGNATURE:if("number"!=typeof e[r].key||-7>e[r].key||7<e[r].scale)throw new Error("Event #"+r+":The key signature key must be between -7 and 7");if("number"!=typeof e[r].scale||0>e[r].scale||1<e[r].scale)throw new Error("Event #"+r+":The key signature scale must be 0 or 1");t[s++]=e[r].key,t[s++]=e[r].scale;break;case qr.EVENT_META_TIME_SIGNATURE:case qr.EVENT_META_SEQUENCER_SPECIFIC:default:for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a]}else for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a]}}},qr.getRequiredBufferLength=function(e){var t,n=0,r=0;for(r=0,t=e.length;r<t;r++)n+=e[r].delta>>>21?4:e[r].delta>>>14?3:e[r].delta>>>7?2:1,e[r].type===qr.EVENT_MIDI?(n++,n++,-1!==qr.MIDI_2PARAMS_EVENTS.indexOf(e[r].subtype)&&n++):(n++,e[r].type===qr.EVENT_META&&n++,n+=e[r].length>>>21?4:e[r].length>>>14?3:e[r].length>>>7?2:1,n+=e[r].length);return n};var Gr=qr,Yr={isNotUTF8:function(e,t,n){try{Qr(e,t,n,!0)}catch(e){return!0}return!1},getCharLength:Wr,getCharCode:Kr,getStringFromBytes:Qr,getBytesForCharCode:Xr,setBytesFromCharCode:Jr,setBytesFromString:function(e,t,n,r,i){e=e||"",t=t||[],n|=0,r="number"==typeof r?r:t.byteLength||1/0;for(var a=0,o=e.length;a<o;a++){var s=Xr(e[a].codePointAt(0));if(i&&n+s>r)throw new Error('Not enought bytes to encode the char "'+e[a]+'" at the offset "'+n+'".');Jr(e[a].codePointAt(0),t,n,s),n+=s}return t}};function Wr(e){return 240&~e?224&~e?192&~e?e==(127&e)?1:0:2:3:4}function Kr(e,t,n){var r=0,i="";if(t=t||0,e.length-t<=0)throw new Error("No more characters remaining in array.");if(0==(n=n||Wr(e[t])))throw new Error(e[t].toString(2)+" is not a significative byte (offset:"+t+").");if(1===n)return e[t];if(e.length-t<n)throw new Error("Expected at least "+n+" bytes remaining in array.");if(i="00000000".slice(0,n)+1+"00000000".slice(n+1),e[t]&parseInt(i,2))throw Error("Index "+t+": A "+n+" bytes encoded char cannot encode the "+(n+1)+"th rank bit to 1.");for(i="0000".slice(0,n+1)+"11111111".slice(n+1),r+=(e[t]&parseInt(i,2))<<6*--n;n;){if(128&~e[t+1]||!(64&~e[t+1]))throw Error("Index "+(t+1)+': Next bytes of encoded char must begin with a "10" bit sequence.');r+=(63&e[++t])<<6*--n}return r}function Qr(e,t,n,r){var i,a=[];for(t|=0,n="number"==typeof n?n:e.byteLength||e.length;t<n;t++){if(t+(i=Wr(e[t]))>n){if(r)throw Error("Index "+t+": Found a "+i+" bytes encoded char declaration but only "+(n-t)+" bytes are available.")}else a.push(String.fromCodePoint(Kr(e,t,i)));t+=i-1}return a.join("")}function Xr(e){if(e<128)return 1;if(e<2048)return 2;if(e<65536)return 3;if(e<2097152)return 4;throw new Error("CharCode "+e+" cannot be encoded with UTF8.")}function Jr(e,t,n,r){if(e|=0,t=t||[],n|=0,1==(r=r||Xr(e)))t[n]=e;else for(t[n++]=(parseInt("1111".slice(0,r),2)<<8-r)+(e>>>6*--r);r>0;)t[n++]=e>>>6*--r&63|128;return t}function ei(e,t){var n,r,i,a;if(e){if(25>(e=function(e){if(e){if(e instanceof ArrayBuffer)return e;if(e instanceof Uint8Array)return new Uint8Array(e).buffer}throw new Error("Unsupported buffer type, need ArrayBuffer or Uint8Array")}(e)).byteLength)throw new Error("A buffer of a valid MIDI file must have, at least, a size of 25bytes.");for(this.header=new Hr(e),this.tracks=[],r=Hr.HEADER_LENGTH,i=0,a=this.header.getTracksCount();i<a;i++){if(t&&r>=e.byteLength-1)throw new Error("Couldn't find datas corresponding to the track #"+i+".");n=new Zr(e,r),this.tracks.push(n),r+=n.getTrackLength()+8}if(t&&r!==e.byteLength)throw new Error("It seems that the buffer contains too much datas.")}else this.header=new Hr,this.tracks=[new Zr]}ei.prototype.getEvents=function(e,t){var n,r,i,a,o,s,l=0,c=[],d=this.header.getFormat(),u=this.header.getTickResolution();if(1!==d||1===this.tracks.length)for(i=0,a=this.tracks.length;i<a;i++)for(l=2===d&&l?l:0,r=(n=Gr.createParser(this.tracks[i].getTrackContent(),0,!1)).next();r;)l+=r.delta?r.delta*u/1e3:0,r.type===Gr.EVENT_META&&r.subtype===Gr.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),e&&r.type!==e||t&&(!r.subtype||r.subtype!==t)||(r.playTime=l,c.push(r)),r=n.next();else{for(o=[],s=-1,i=0,a=this.tracks.length;i<a;i++)o[i]={},o[i].parser=Gr.createParser(this.tracks[i].getTrackContent(),0,!1),o[i].curEvent=o[i].parser.next();do{for(s=-1,i=0,a=o.length;i<a;i++)o[i].curEvent&&(-1===s||o[i].curEvent.delta<o[s].curEvent.delta)&&(s=i);if(-1!==s){for(i=0,a=o.length;i<a;i++)i!==s&&o[i].curEvent&&(o[i].curEvent.delta-=o[s].curEvent.delta);l+=(r=o[s].curEvent).delta?r.delta*u/1e3:0,r.type===Gr.EVENT_META&&r.subtype===Gr.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),e&&r.type!==e||t&&(!r.subtype||r.subtype!==t)||(r.playTime=l,r.track=s,c.push(r)),o[s].curEvent=o[s].parser.next()}}while(-1!==s)}return c},ei.prototype.getMidiEvents=function(){return this.getEvents(Gr.EVENT_MIDI)},ei.prototype.getLyrics=function(){var e,t,n,r=this.getEvents(Gr.EVENT_META),i=[],a=[];for(t=0,n=r.length;t<n;t++)(e=r[t]).subtype===Gr.EVENT_META_LYRICS?a.push(e):e.subtype===Gr.EVENT_META_TEXT&&("@"===String.fromCharCode(e.data[0])?"T"===String.fromCharCode(e.data[1])||"I"===String.fromCharCode(e.data[1])||String.fromCharCode(e.data[1]):0===String.fromCharCode.apply(String,e.data).indexOf("words")?i.length=0:0!==e.playTime&&i.push(e));2<a.length?i=a:i.length||(i=[]);try{i.forEach((function(e){e.text=Yr.getStringFromBytes(e.data,0,e.length,!0)}))}catch(e){i.forEach((function(e){e.text=e.data.map((function(e){return String.fromCharCode(e)})).join("")}))}return i},ei.prototype.getTrackEvents=function(e){var t,n,r=[];if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=(n=Gr.createParser(this.tracks[e].getTrackContent(),0,!1)).next();do{r.push(t),t=n.next()}while(t);return r},ei.prototype.setTrackEvents=function(e,t){var n,r;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");if(!t||!t.length)throw Error("A track must contain at least one event, none given.");n=Gr.getRequiredBufferLength(t),r=new Uint8Array(n),Gr.writeToTrack(t,r),this.tracks[e].setTrackContent(r)},ei.prototype.deleteTrack=function(e){if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");this.tracks.splice(e,1),this.header.setTracksCount(this.tracks.length)},ei.prototype.addTrack=function(e){var t;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=new Zr,e===this.tracks.length?this.tracks.push(t):this.tracks.splice(e,0,t),this.header.setTracksCount(this.tracks.length)},ei.prototype.getContent=function(){var e,t,n,r,i,a,o,s,l;for(e=Hr.HEADER_LENGTH,r=0,i=this.tracks.length;r<i;r++)e+=this.tracks[r].getTrackLength()+8;for(t=new Uint8Array(e),n=new Uint8Array(this.header.datas.buffer,this.header.datas.byteOffset,Hr.HEADER_LENGTH),r=0,i=Hr.HEADER_LENGTH;r<i;r++)t[r]=n[r];for(a=0,o=this.tracks.length;a<o;a++)for(n=new Uint8Array(this.tracks[a].datas.buffer,this.tracks[a].datas.byteOffset,this.tracks[a].datas.byteLength),s=0,l=this.tracks[a].datas.byteLength;s<l;s++)t[r++]=n[s];return t.buffer},ei.Header=Hr,ei.Track=Zr;var ti=ei;const ni="!@#$%^&*()QWERTYUIOPASDFGHJKLZXCBVNM";let ri=e=>"index"in e,ii=e=>{try{return!ri(e)}catch{return!0}};class ai{constructor(e,t,n,r,i,a="keep",o="keep"){this.original=e,this.value=e,this.playTime=t,this.delta=i,this.char=li[e-21],this.tempo=n,this.BPM=r,this.transposition=()=>this.value-this.original,this.valid=e>=21&&e<=108,this.outOfRange=e<=35||e>=97,ni.includes(this.char)?"Start"===a?this.displayValue=e-108:"End"==a&&(this.displayValue=e+108):this.outOfRange?"Start"===o?this.displayValue=e-1024:"End"==o?this.displayValue=e+1024:di.includes(this.char)?this.displayValue=e-1024:this.displayValue=e+1024:this.displayValue=e}new_with_saved_original(e){let t=new ai(e,this.playTime,this.tempo,this.BPM,this.delta,this.shifts,this.oors);return t.original=this.original,t}}class oi{constructor(e,t=!0,n=!0){let r=!1,i=e[0];this.classicChordOrder=t,this.sequentialQuantize=n;for(let t of e){if(t.playTime!=i.playTime){r=!0;break}i=t}if(this.is_quantized=r,r)r&&(this.notes=n?e:this.#i(e,t));else{let n=[],r=[];e.forEach((e=>{n.includes(e.value)||(n.push(e.value),r.push(e))})),this.notes=this.#i(r,t)}}transpose=(e,t=!1,n=!1)=>{t&&(e=this.notes[0].transposition()+e);let r=new oi(this.notes,this.classicChordOrder,this.sequentialQuantize);for(let t=0;t<r.notes.length;t++){let t=n?this:r,i=t.notes.map((t=>t.new_with_saved_original(t.original+e)));r=new oi(i,this.classicChordOrder,this.sequentialQuantize),t.notes=r.notes}return r};display=()=>{if(this.notes[0]?.char){if(1==this.notes.length)return this.notes[0].char;{let e=[];for(let t of this.notes)e.push(t.char??"?");return"["+e.join("")+"]"}}return"?"};#i(e,t){return t?this.#a(e):e.sort(((e,t)=>e.displayValue-t.displayValue))}#a(e){let t,n=[],r=[],i=[],a=[],o=[],s=[];e=e.sort(((e,t)=>e.value-t.value));for(const n of e)n.outOfRange?n.value-1024===n.displayValue?o.push(n):n.value+1024===n.displayValue&&s.push(n):(isNaN(n.char)?ni.includes(n.char)?i.push(n):a.push(n):r.push(n),t=n);return t&&(n=ni.includes(t.char)?[...r,...a,...i]:[...i,...r,...a]),[...o,...n,...s]}}function si(e,t,n=void 0){let r=0;let i,a,o,s=t.quantize,l=t.pShifts,c=t.pOors,d=t.classicChordOrder,u=t.sequentialQuantize,f=t.bpm,h=[],p=[],g=f,m=4166.66*f;let w=0;e.forEach((e=>{if(81==e.subtype&&function(e){return e.tempo&&e.tempoBPM&&0!==e.tempo&&0!==e.tempoBPM}(e)){if(m=e.tempo,g=e.tempoBPM,null==o)t.bpmChanges&&h.push({type:"comment",kind:"tempo",text:`Tempo: ${Math.round(e.tempoBPM)} BPM`});else if(null!=o&&o!=e.tempo&&a!=e.tempoBPM&&t.bpmChanges){let n=Math.round(e.tempoBPM),r=n<a?n:a,i=((n>a?n:a)-r)/r*100;if(i<t.minSpeedChange)return;h.push({type:"comment",kind:"tempo",text:`${Math.round(i)}% ${n>a?"faster":"slower"} - BPM changed to ${Math.round(e.tempoBPM)}`})}return a=e.tempoBPM,void(o=e.tempo)}const f=e.param1,b=e.playTime,_=e.delta;if(!f)return;if(null==i&&(i=b),Math.abs(b-i)<s)p.push(new ai(f,b,m,g,_,l,c)),i=b;else{if(0==p.length)return void(i=b);let e=new oi(p,d,u);e.index=w;let t=n?.find((e=>e.index===w));t&&0!=t.notes[0].transposition()&&e.transpose(t.notes[0].transposition(),!1,!0),h.push(e),w++,p=[],p.push(new ai(f,b,m,g,_,l,c)),i=b}const{doBreak:v,newPenalty:y}=function(e,n){if(!e)return!1;let r=e.tempo/1e3*t.beats,i=e.playTime-n;return i+.5>=r?{doBreak:!0,newPenalty:n+i}:{doBreak:!1,newPenalty:n}}(p[0],r);r=y,v&&h.push({type:"break"})}));let b=new oi(p,d,u);b.index=w;let _=n?.find((e=>e.index===w));return _&&0!=_.notes[0].transposition()&&b.transpose(_.notes[0].transposition(),!1,!0),h.push(b),w++,o||console.log(`No tempo found in sheet, set to ${g}/${m}`),h}const li="1234567890qwert1!2@34$5%6^78*9(0qQwWeErtTyYuiIoOpPasSdDfgGhHjJklLzZxcCvVbBnmyuiopasdfghj",ci="1234567890qwertyuiopasdfghjklzxcvbnm",di=ci.slice(0,15);function ui(e){let t=e.notes.filter((e=>!1===e.outOfRange&&!0===e.valid)),n=t.filter((e=>ci.includes(e.char))),r=t.filter((e=>!ci.includes(e.char)));return 2*t.length+Math.abs(r.length-n.length)}function fi(e,t,n=0,r=4){let i=e.map((e=>function(e,t,n=0,r=0){if(!e)return;if(ii(e))return n;let i=[n];e.notes.filter((e=>!1===e.outOfRange&&!0===e.valid)).length;let a=ui(e.transpose(n)),o=t=>{let n=ui(e.transpose(t));if(n>a+r)a=n,i=[t];else if(n==a){if(0==t&&i.includes(0))return n;i.push(t)}return n};for(let e=+n;e<=t;e++)o(+e),o(-e);return i}(e,t,n,r))),a=0,o=0,s=[];i=i.flat();for(let e of i){if(s.includes(e))continue;s.push(e);let t=i.filter((t=>t==e)),n=t.length;n>a&&(a=n,o=e)}return o}function hi(){return F}var pi=_t('<div class="beats"><label class="slider-label" for="beats-for-newline">Break lines:</label> <input type="range" id="beats-for-newline" min="1" max="32"> <span> </span></div>'),gi=_t("<i>Some settings are not available because the original MIDI data is missing.</i>"),mi=_t('<div class="tempo"><label class="slider-label" for="tempo" title="You\'re able to change this because your MIDI file doesn\'t have tempo/BPM.">BPM (?):</label> <input type="range" id="tempo" min="1" max="300"> <input type="number" class="w-16 box-border" min="1" max="300"></div>'),wi=_t('<div class="beats"><label class="slider-label" for="quantize-prompt">Quantize:</label> <input type="range" id="quantize-prompt" min="1" max="250"> <span> </span></div> <label for="classic-chord-order"><input type="checkbox" id="classic-chord-order"> Classic chord order</label> <label for="order-quantizes"><input type="checkbox" id="order-quantizes"> Sequential quantizes</label>',1),bi=_t('<label class="slider-label" for="min-speed-change">Min. % speed change:</label> <input type="range" id="min-speed-change" min="0" max="100"> <span> </span>',1),_i=_t('<label for="bpm-changes"><input type="checkbox" id="bpm-changes"> Show BPM changes as comments</label> <div class="beats"><!></div>',1),vi=_t('<div><label title="Helps tell you if notes are out-of-range, certain characters are restricted from use!" for="oor-separator">Out-of-range separator (?):</label> <div style="display: inline-flex"><input type="text" id="oor-separator"></div></div>'),yi=_t("<option> </option>"),Ei=_t('<hr class="my-2 mx-1"> <div class="flex flex-col items-start align-middle"><div class="flex flex-row mt-3"><label class="flex flex-row items-center" title="Controls how much better a transposition should be than the previous transposition for line-based auto-transpose to act (higher = less transposing)" for="atleast">Resilience (?):</label> <input class="w-32" id="atleast" type="range" min="0" max="12"> <span style="display:flex; align-items: center"> </span></div></div> <hr class="my-2 mx-1"> <div><div class="select-div"><label for="shifts-position">Place shifted notes at:</label> <select name="shifts-position" id="shifts-position"><option>Start</option><option>End</option></select></div> <div class="select-div"><label for="oors-position">Place out of range notes at:</label> <select name="oors-position" id="oors-position"><option>Inorder</option><option>Start</option><option>End</option></select></div> <hr class="my-2 mx-1"> <!> <!> <!> <label for="curly-quantizes"><input type="checkbox" id="curly-quantizes"> Curly braces for quantized chords</label> <div></div> <label for="out-of-range"><input type="checkbox" id="out-of-range"> Include out of range (ctrl) notes</label> <label for="tempo-checkbox"><input type="checkbox" id="tempo-checkbox"> Show tempo and out-of-range marks</label> <!> <!> <hr class="my-2 mx-1"> <div class="select-div"><label for="font">Font:</label> <select name="font" id="font"></select></div> <hr class="my-2 mx-1"></div> <style>* {\n        user-select: none;\n    }\n\n    label {\n        max-width: fit-content;\n        text-align: center;\n    }\n\n    .select-div {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        text-align: center;\n    }\n\n    select {\n        height: auto;\n        margin-left: 0.4em;\n        margin-top: 0.2em;\n        margin-bottom: 0;\n    }\n    \n    select option {\n        background: #2D2A32;\n    }\n\n    input[type="checkbox"] {\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    input[type="range"] {\n        margin-left: 0.4em;\n        margin-right: 0.4em;\n        margin-bottom: 0;\n    }\n\n    input[type="file"] {\n        margin-bottom: 0;\n    }\n\n    input[type="text"] {\n        margin-bottom: 0;\n    }\n    \n    .beats, .select-label, .tempo {\n        display: flex;\n        flex-direction: row;\n    }</style>',1);var xi=_t('<div id="track" class="flex flex-row align-middle"><input type="checkbox" style="transform: scale(1.5)"> <label class="mx-2"> </label></div>');const ki={long:"white",quadruple:"#a3f0a3",whole:"#74da74",half:"#9ada5a",quarter:"#c0c05a",eighth:"#da7e5a",sixteenth:"#daa6a6",thirtysecond:"#ff1900",sixtyfourth:"#9c0f00"};function Ti(e,t,n,r){let i,a=e?.notes?.[0],o=t?.notes?.[0];if(!a)return"";let s=0,l=0;o?(s=a.tempo/1e3,l=o?.playTime-a.playTime-.5,i=function(e,t){t-=.5;let n=ki.long;return t<e/16?n=ki.sixtyfourth:t<e/8?n=ki.thirtysecond:t<e/4?n=ki.sixteenth:t<e/2?n=ki.eighth:t<e?n=ki.quarter:t<2*e?n=ki.half:t<4*e?n=ki.whole:t<8*e?n=ki.quadruple:t<16*e&&(n=ki.long),n}(s,l)):i=ki.long;let c=`<span style="color:${i}; ${r?"background-color: rgba(97, 97, 97, 50);":""}">`,d=e.notes.length>1&&e.notes.find((e=>!0===e.valid));!1===n.oors&&e.notes.filter((e=>!1===e.outOfRange)).length<=1&&(d=!1),d&&(e.is_quantized&&!0===n.curlyQuantizes?c+="{":c+="[");for(const t of e.notes){if(!t.valid){c+="_";continue}let r=!0===t.outOfRange&&!0===n.oors;if(!0===r){let r=e.notes.filter((e=>!1===e.outOfRange)),a=e.notes.filter((e=>!0===e.outOfRange&&e.displayValue===e.value-1024)),o=e.notes.filter((e=>!0===e.outOfRange&&e.displayValue===e.value+1024));const s=t===a[0],l=t===a[a.length-1],u=!d&&t===o[0],f=d&&0===r.length&&0===a.length&&t===o[0],h=d&&r.length>0&&t===o[0];(s||u||f||h)&&(n.tempoMarks?c+=`<span style="border-bottom: 2px solid ${i}; font-weight:900;">${n.oorSeparator}${t.char}</span>`:n.tempoMarks||(c+=`<span style="border-bottom: 2px solid ${i}; font-weight:900">${t.char}</span>`)),n.tempoMarks&&l&&r.length>0&&(c+="'")}else r||t.outOfRange||(c+=t.char)}return d&&(e.is_quantized&&!0===n.curlyQuantizes?c+="}":c+="]"),c+=n.tempoMarks?function(e,t,n={}){return`<span style="color:${t};${n.underline?`border-bottom:2px solid ${t}`:""}">${e}</span>`}(function(e,t){return t<e/4?"-":t<e/2?" ":t<e?" - ":t<2*e?", ":t<3*e?"... ":t<4*e?".... ":"...... "}(s??void 0,l),i):" ",c+"</span>"}function Si(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}Si("\n    .chord-block.svelte-gpk658 {\n        all: unset;\n    }\n    .chord-block.svelte-gpk658:hover {\n        /* filter: brightness(75%); */\n        background-color: #3d3a42;\n        cursor: pointer;\n    }\n    .chord-block.svelte-gpk658:active {\n        all: unset;\n    }\n");var Ai=_t('<span class="chord-block svelte-gpk658"><!></span>');function Ni(e,t){Ve(t,!1);const n=hi();let r=Qt(t,"index"),i=Qt(t,"chord"),a=Qt(t,"next"),o=Qt(t,"selected"),s=Qt(t,"settings");Yt();var l=Ai();!function(e,t,n,r){var i,a=e,o="";Xe((()=>{o!==(o=t())&&(i&&(tt(i),i=null),""!==o&&(i=Je((()=>{var e=o+"";n?e=`<svg>${e}</svg>`:r&&(e=`<math>${e}</math>`);var t=wt(e);if((n||r)&&(t=t.firstChild),bt(t.firstChild,t.lastChild),n||r)for(;t.firstChild;)a.before(t.firstChild);else a.before(t)}))))}))}(dt(l),(()=>Ti(i(),a(),s(),o())),!1,!1),pt("contextmenu",l,Gt((function(e){Kt.call(this,t,e)}))),pt("mousedown",l,qt((e=>{switch(e.button){case 0:n("select",{index:+r(),by:-1});break;case 1:e.preventDefault();break;case 2:n("select",{index:+r(),by:1}),e.preventDefault()}})),!1),yt(e,l),Be()}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function Ci(e){let t=e.length;for(;--t>=0;)e[t]=0}const Ii=256,Mi=286,zi=30,Di=15,Ri=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Oi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ui=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Pi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fi=new Array(576);Ci(Fi);const Li=new Array(60);Ci(Li);const Vi=new Array(512);Ci(Vi);const Bi=new Array(256);Ci(Bi);const $i=new Array(29);Ci($i);const Hi=new Array(zi);function ji(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Zi,qi,Gi;function Yi(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ci(Hi);const Wi=e=>e<256?Vi[e]:Vi[256+(e>>>7)],Ki=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Qi=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Ki(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Xi=(e,t,n)=>{Qi(e,n[2*t],n[2*t+1])},Ji=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ea=(e,t,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=Di;i++)o=o+n[i-1]<<1,r[i]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=Ji(r[t]++,t))}},ta=e=>{let t;for(t=0;t<Mi;t++)e.dyn_ltree[2*t]=0;for(t=0;t<zi;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},na=e=>{e.bi_valid>8?Ki(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ra=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},ia=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&ra(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!ra(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},aa=(e,t,n)=>{let r,i,a,o,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?Xi(e,i,t):(a=Bi[i],Xi(e,a+Ii+1,t),o=Ri[a],0!==o&&(i-=$i[a],Qi(e,i,o)),r--,a=Wi(r),Xi(e,a,n),o=Oi[a],0!==o&&(r-=Hi[a],Qi(e,r,o)))}while(s<e.sym_next);Xi(e,256,t)},oa=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)ia(e,n,o);l=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ia(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,ia(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,f,h,p,g=0;for(f=0;f<=Di;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],f=n[2*n[2*d+1]+1]+1,f>l&&(f=l,g++),n[2*d+1]=f,d>r||(e.bl_count[f]++,h=0,d>=s&&(h=o[d-s]),p=n[2*d],e.opt_len+=p*(f+h),a&&(e.static_len+=p*(i[2*d+1]+h)));if(0!==g){do{for(f=l-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(f=l;0!==f;f--)for(d=e.bl_count[f];0!==d;)u=e.heap[--c],u>r||(n[2*u+1]!==f&&(e.opt_len+=(f-n[2*u+1])*n[2*u],n[2*u+1]=f),d--)}})(e,t),ea(n,c,e.bl_count)},sa=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},la=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{Xi(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(Xi(e,i,e.bl_tree),s--),Xi(e,16,e.bl_tree),Qi(e,s-3,2)):s<=10?(Xi(e,17,e.bl_tree),Qi(e,s-3,3)):(Xi(e,18,e.bl_tree),Qi(e,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}};let ca=!1;const da=(e,t,n,r)=>{Qi(e,0+(r?1:0),3),na(e),Ki(e,n),Ki(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var ua=(e,t,n,r)=>{let i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Ii;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),oa(e,e.l_desc),oa(e,e.d_desc),o=(e=>{let t;for(sa(e,e.dyn_ltree,e.l_desc.max_code),sa(e,e.dyn_dtree,e.d_desc.max_code),oa(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Pi[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?da(e,t,n,r):4===e.strategy||a===i?(Qi(e,2+(r?1:0),3),aa(e,Fi,Li)):(Qi(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(Qi(e,t-257,5),Qi(e,n-1,5),Qi(e,r-4,4),i=0;i<r;i++)Qi(e,e.bl_tree[2*Pi[i]+1],3);la(e,e.dyn_ltree,t-1),la(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),aa(e,e.dyn_ltree,e.dyn_dtree)),ta(e),r&&na(e)},fa={_tr_init:e=>{ca||((()=>{let e,t,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for($i[r]=n,e=0;e<1<<Ri[r];e++)Bi[n++]=r;for(Bi[n-1]=r,i=0,r=0;r<16;r++)for(Hi[r]=i,e=0;e<1<<Oi[r];e++)Vi[i++]=r;for(i>>=7;r<zi;r++)for(Hi[r]=i<<7,e=0;e<1<<Oi[r]-7;e++)Vi[256+i++]=r;for(t=0;t<=Di;t++)a[t]=0;for(e=0;e<=143;)Fi[2*e+1]=8,e++,a[8]++;for(;e<=255;)Fi[2*e+1]=9,e++,a[9]++;for(;e<=279;)Fi[2*e+1]=7,e++,a[7]++;for(;e<=287;)Fi[2*e+1]=8,e++,a[8]++;for(ea(Fi,287,a),e=0;e<zi;e++)Li[2*e+1]=5,Li[2*e]=Ji(e,5);Zi=new ji(Fi,Ri,257,Mi,Di),qi=new ji(Li,Oi,0,zi,Di),Gi=new ji(new Array(0),Ui,0,19,7)})(),ca=!0),e.l_desc=new Yi(e.dyn_ltree,Zi),e.d_desc=new Yi(e.dyn_dtree,qi),e.bl_desc=new Yi(e.bl_tree,Gi),e.bi_buf=0,e.bi_valid=0,ta(e)},_tr_stored_block:da,_tr_flush_block:ua,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Bi[n]+Ii+1)]++,e.dyn_dtree[2*Wi(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Qi(e,2,3),Xi(e,256,Fi),(e=>{16===e.bi_valid?(Ki(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var ha=(e,t,n,r)=>{let i=65535&e,a=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16};const pa=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var ga=(e,t,n,r)=>{const i=pa,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return~e},ma={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ba,_tr_stored_block:_a,_tr_flush_block:va,_tr_tally:ya,_tr_align:Ea}=fa,{Z_NO_FLUSH:xa,Z_PARTIAL_FLUSH:ka,Z_FULL_FLUSH:Ta,Z_FINISH:Sa,Z_BLOCK:Aa,Z_OK:Na,Z_STREAM_END:Ca,Z_STREAM_ERROR:Ia,Z_DATA_ERROR:Ma,Z_BUF_ERROR:za,Z_DEFAULT_COMPRESSION:Da,Z_FILTERED:Ra,Z_HUFFMAN_ONLY:Oa,Z_RLE:Ua,Z_FIXED:Pa,Z_DEFAULT_STRATEGY:Fa,Z_UNKNOWN:La,Z_DEFLATED:Va}=wa,Ba=258,$a=262,Ha=42,ja=113,Za=666,qa=(e,t)=>(e.msg=ma[t],t),Ga=e=>2*e-(e>4?9:0),Ya=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Wa=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let Ka=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Qa=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Xa=(e,t)=>{va(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qa(e.strm)},Ja=(e,t)=>{e.pending_buf[e.pending++]=t},eo=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},to=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=ha(e.adler,t,i,n):2===e.state.wrap&&(e.adler=ga(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},no=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-$a?e.strstart-(e.w_size-$a):0,c=e.window,d=e.w_mask,u=e.prev,f=e.strstart+Ba;let h=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+o]===p&&c[n+o-1]===h&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<f);if(r=Ba-(f-a),a=f-Ba,r>o){if(e.match_start=t,o=r,r>=s)break;h=c[a+o-1],p=c[a+o]}}}while((t=u[t&d])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},ro=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$a)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Wa(e),r+=t),0===e.strm.avail_in)break;if(n=to(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ka(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ka(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<$a&&0!==e.strm.avail_in)},io=(e,t)=>{let n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==Sa||t===xa||n!==r+e.strm.avail_in))break;o=t===Sa&&n===r+e.strm.avail_in?1:0,_a(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Qa(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(to(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==xa&&t!==Sa&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(to(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||t===Sa)&&t!==xa&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Sa&&0===e.strm.avail_in&&n===r?1:0,_a(e,e.block_start,n,o),e.block_start+=n,Qa(e.strm)),o?3:1)},ao=(e,t)=>{let n,r;for(;;){if(e.lookahead<$a){if(ro(e),e.lookahead<$a&&t===xa)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ka(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-$a&&(e.match_length=no(e,n)),e.match_length>=3)if(r=ya(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ka(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ka(e,e.ins_h,e.window[e.strstart+1]);else r=ya(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Xa(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Sa?(Xa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Xa(e,!1),0===e.strm.avail_out)?1:2},oo=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<$a){if(ro(e),e.lookahead<$a&&t===xa)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ka(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-$a&&(e.match_length=no(e,n),e.match_length<=5&&(e.strategy===Ra||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=ya(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Ka(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Xa(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=ya(e,0,e.window[e.strstart-1]),r&&Xa(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ya(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Sa?(Xa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Xa(e,!1),0===e.strm.avail_out)?1:2};function so(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const lo=[new so(0,0,0,0,io),new so(4,4,8,4,ao),new so(4,5,16,8,ao),new so(4,6,32,32,ao),new so(4,4,16,16,oo),new so(8,16,32,32,oo),new so(8,16,128,128,oo),new so(8,32,128,256,oo),new so(32,128,258,1024,oo),new so(32,258,258,4096,oo)];function co(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Va,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ya(this.dyn_ltree),Ya(this.dyn_dtree),Ya(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ya(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ya(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const uo=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Ha&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ja&&t.status!==Za?1:0},fo=e=>{if(uo(e))return qa(e,Ia);e.total_in=e.total_out=0,e.data_type=La;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Ha:ja,e.adler=2===t.wrap?0:1,t.last_flush=-2,ba(t),Na},ho=e=>{const t=fo(e);var n;return t===Na&&((n=e.state).window_size=2*n.w_size,Ya(n.head),n.max_lazy_match=lo[n.level].max_lazy,n.good_match=lo[n.level].good_length,n.nice_match=lo[n.level].nice_length,n.max_chain_length=lo[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},po=(e,t,n,r,i,a)=>{if(!e)return Ia;let o=1;if(t===Da&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Va||r<8||r>15||t<0||t>9||a<0||a>Pa||8===r&&1!==o)return qa(e,Ia);8===r&&(r=9);const s=new co;return e.state=s,s.strm=e,s.status=Ha,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=n,ho(e)};var go=(e,t)=>uo(e)||2!==e.state.wrap?Ia:(e.state.gzhead=t,Na),mo={deflateInit:(e,t)=>po(e,t,Va,15,8,Fa),deflateInit2:po,deflateReset:ho,deflateResetKeep:fo,deflateSetHeader:go,deflate:(e,t)=>{if(uo(e)||t>Aa||t<0)return e?qa(e,Ia):Ia;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Za&&t!==Sa)return qa(e,0===e.avail_out?za:Ia);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Qa(e),0===e.avail_out)return n.last_flush=-1,Na}else if(0===e.avail_in&&Ga(t)<=Ga(r)&&t!==Sa)return qa(e,za);if(n.status===Za&&0!==e.avail_in)return qa(e,za);if(n.status===Ha&&0===n.wrap&&(n.status=ja),n.status===Ha){let t=Va+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Oa||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,eo(n,t),0!==n.strstart&&(eo(n,e.adler>>>16),eo(n,65535&e.adler)),e.adler=1,n.status=ja,Qa(e),0!==n.pending)return n.last_flush=-1,Na}if(57===n.status)if(e.adler=0,Ja(n,31),Ja(n,139),Ja(n,8),n.gzhead)Ja(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ja(n,255&n.gzhead.time),Ja(n,n.gzhead.time>>8&255),Ja(n,n.gzhead.time>>16&255),Ja(n,n.gzhead.time>>24&255),Ja(n,9===n.level?2:n.strategy>=Oa||n.level<2?4:0),Ja(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ja(n,255&n.gzhead.extra.length),Ja(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ga(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ja(n,0),Ja(n,0),Ja(n,0),Ja(n,0),Ja(n,0),Ja(n,9===n.level?2:n.strategy>=Oa||n.level<2?4:0),Ja(n,3),n.status=ja,Qa(e),0!==n.pending)return n.last_flush=-1,Na;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=ga(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,Qa(e),0!==n.pending)return n.last_flush=-1,Na;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=ga(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=ga(e.adler,n.pending_buf,n.pending-r,r)),Qa(e),0!==n.pending)return n.last_flush=-1,Na;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ja(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=ga(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=ga(e.adler,n.pending_buf,n.pending-r,r)),Qa(e),0!==n.pending)return n.last_flush=-1,Na;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ja(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=ga(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Qa(e),0!==n.pending))return n.last_flush=-1,Na;Ja(n,255&e.adler),Ja(n,e.adler>>8&255),e.adler=0}if(n.status=ja,Qa(e),0!==n.pending)return n.last_flush=-1,Na}if(0!==e.avail_in||0!==n.lookahead||t!==xa&&n.status!==Za){let r=0===n.level?io(n,t):n.strategy===Oa?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(ro(e),0===e.lookahead)){if(t===xa)return 1;break}if(e.match_length=0,n=ya(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Xa(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Sa?(Xa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Xa(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Ua?((e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=Ba){if(ro(e),e.lookahead<=Ba&&t===xa)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+Ba;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=Ba-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=ya(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ya(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Xa(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Sa?(Xa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Xa(e,!1),0===e.strm.avail_out)?1:2})(n,t):lo[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Za),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Na;if(2===r&&(t===ka?Ea(n):t!==Aa&&(_a(n,0,0,!1),t===Ta&&(Ya(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Qa(e),0===e.avail_out))return n.last_flush=-1,Na}return t!==Sa?Na:n.wrap<=0?Ca:(2===n.wrap?(Ja(n,255&e.adler),Ja(n,e.adler>>8&255),Ja(n,e.adler>>16&255),Ja(n,e.adler>>24&255),Ja(n,255&e.total_in),Ja(n,e.total_in>>8&255),Ja(n,e.total_in>>16&255),Ja(n,e.total_in>>24&255)):(eo(n,e.adler>>>16),eo(n,65535&e.adler)),Qa(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Na:Ca)},deflateEnd:e=>{if(uo(e))return Ia;const t=e.state.status;return e.state=null,t===ja?qa(e,Ma):Na},deflateSetDictionary:(e,t)=>{let n=t.length;if(uo(e))return Ia;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Ha||r.lookahead)return Ia;if(1===i&&(e.adler=ha(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Ya(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ro(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Ka(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,ro(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Na},deflateInfo:"pako deflate (from Nodeca project)"};const wo=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var bo={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)wo(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}};let _o=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){_o=!1}const vo=new Uint8Array(256);for(let e=0;e<256;e++)vo[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;vo[254]=vo[254]=1;var yo={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=vo[t];if(o>4)a[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&_o)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+vo[e[n]]>t?n:t}};var Eo=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const xo=Object.prototype.toString,{Z_NO_FLUSH:ko,Z_SYNC_FLUSH:To,Z_FULL_FLUSH:So,Z_FINISH:Ao,Z_OK:No,Z_STREAM_END:Co,Z_DEFAULT_COMPRESSION:Io,Z_DEFAULT_STRATEGY:Mo,Z_DEFLATED:zo}=wa;function Do(e){this.options=bo.assign({level:Io,method:zo,chunkSize:16384,windowBits:15,memLevel:8,strategy:Mo},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Eo,this.strm.avail_out=0;let n=mo.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==No)throw new Error(ma[n]);if(t.header&&mo.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?yo.string2buf(t.dictionary):"[object ArrayBuffer]"===xo.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=mo.deflateSetDictionary(this.strm,e),n!==No)throw new Error(ma[n]);this._dict_set=!0}}function Ro(e,t){const n=new Do(t);if(n.push(e,!0),n.err)throw n.msg||ma[n.err];return n.result}Do.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Ao:ko,"string"==typeof e?n.input=yo.string2buf(e):"[object ArrayBuffer]"===xo.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===To||a===So)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=mo.deflate(n,a),i===Co)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=mo.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===No;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Do.prototype.onData=function(e){this.chunks.push(e)},Do.prototype.onEnd=function(e){e===No&&(this.result=bo.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Oo={Deflate:Do,deflate:Ro,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Ro(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Ro(e,t)},constants:wa};const Uo=16209;var Po=function(e,t){let n,r,i,a,o,s,l,c,d,u,f,h,p,g,m,w,b,_,v,y,E,x,k,T;const S=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=S.dmax,l=S.wsize,c=S.whave,d=S.wnext,u=S.window,f=S.hold,h=S.bits,p=S.lencode,g=S.distcode,m=(1<<S.lenbits)-1,w=(1<<S.distbits)-1;e:do{h<15&&(f+=k[n++]<<h,h+=8,f+=k[n++]<<h,h+=8),b=p[f&m];t:for(;;){if(_=b>>>24,f>>>=_,h-=_,_=b>>>16&255,0===_)T[i++]=65535&b;else{if(!(16&_)){if(64&_){if(32&_){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=Uo;break e}b=p[(65535&b)+(f&(1<<_)-1)];continue t}for(v=65535&b,_&=15,_&&(h<_&&(f+=k[n++]<<h,h+=8),v+=f&(1<<_)-1,f>>>=_,h-=_),h<15&&(f+=k[n++]<<h,h+=8,f+=k[n++]<<h,h+=8),b=g[f&w];;){if(_=b>>>24,f>>>=_,h-=_,_=b>>>16&255,16&_){if(y=65535&b,_&=15,h<_&&(f+=k[n++]<<h,h+=8,h<_&&(f+=k[n++]<<h,h+=8)),y+=f&(1<<_)-1,y>s){e.msg="invalid distance too far back",S.mode=Uo;break e}if(f>>>=_,h-=_,_=i-a,y>_){if(_=y-_,_>c&&S.sane){e.msg="invalid distance too far back",S.mode=Uo;break e}if(E=0,x=u,0===d){if(E+=l-_,_<v){v-=_;do{T[i++]=u[E++]}while(--_);E=i-y,x=T}}else if(d<_){if(E+=l+d-_,_-=d,_<v){v-=_;do{T[i++]=u[E++]}while(--_);if(E=0,d<v){_=d,v-=_;do{T[i++]=u[E++]}while(--_);E=i-y,x=T}}}else if(E+=d-_,_<v){v-=_;do{T[i++]=u[E++]}while(--_);E=i-y,x=T}for(;v>2;)T[i++]=x[E++],T[i++]=x[E++],T[i++]=x[E++],v-=3;v&&(T[i++]=x[E++],v>1&&(T[i++]=x[E++]))}else{E=i-y;do{T[i++]=T[E++],T[i++]=T[E++],T[i++]=T[E++],v-=3}while(v>2);v&&(T[i++]=T[E++],v>1&&(T[i++]=T[E++]))}break}if(64&_){e.msg="invalid distance code",S.mode=Uo;break e}b=g[(65535&b)+(f&(1<<_)-1)]}}break}}while(n<r&&i<o);v=h>>3,n-=v,h-=v<<3,f&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),S.hold=f,S.bits=h};const Fo=15,Lo=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Vo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Bo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$o=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ho=(e,t,n,r,i,a,o,s)=>{const l=s.bits;let c,d,u,f,h,p,g=0,m=0,w=0,b=0,_=0,v=0,y=0,E=0,x=0,k=0,T=null;const S=new Uint16Array(16),A=new Uint16Array(16);let N,C,I,M=null;for(g=0;g<=Fo;g++)S[g]=0;for(m=0;m<r;m++)S[t[n+m]]++;for(_=l,b=Fo;b>=1&&0===S[b];b--);if(_>b&&(_=b),0===b)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(w=1;w<b&&0===S[w];w++);for(_<w&&(_=w),E=1,g=1;g<=Fo;g++)if(E<<=1,E-=S[g],E<0)return-1;if(E>0&&(0===e||1!==b))return-1;for(A[1]=0,g=1;g<Fo;g++)A[g+1]=A[g]+S[g];for(m=0;m<r;m++)0!==t[n+m]&&(o[A[t[n+m]]++]=m);if(0===e?(T=M=o,p=20):1===e?(T=Lo,M=Vo,p=257):(T=Bo,M=$o,p=0),k=0,m=0,g=w,h=a,v=_,y=0,u=-1,x=1<<_,f=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){N=g-y,o[m]+1<p?(C=0,I=o[m]):o[m]>=p?(C=M[o[m]-p],I=T[o[m]-p]):(C=96,I=0),c=1<<g-y,d=1<<v,w=d;do{d-=c,i[h+(k>>y)+d]=N<<24|C<<16|I}while(0!==d);for(c=1<<g-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,m++,0==--S[g]){if(g===b)break;g=t[n+o[m]]}if(g>_&&(k&f)!==u){for(0===y&&(y=_),h+=w,v=g-y,E=1<<v;v+y<b&&(E-=S[v+y],!(E<=0));)v++,E<<=1;if(x+=1<<v,1===e&&x>852||2===e&&x>592)return 1;u=k&f,i[u]=_<<24|v<<16|h-a}}return 0!==k&&(i[h+k]=g-y<<24|64<<16),s.bits=_,0};const{Z_FINISH:jo,Z_BLOCK:Zo,Z_TREES:qo,Z_OK:Go,Z_STREAM_END:Yo,Z_NEED_DICT:Wo,Z_STREAM_ERROR:Ko,Z_DATA_ERROR:Qo,Z_MEM_ERROR:Xo,Z_BUF_ERROR:Jo,Z_DEFLATED:es}=wa,ts=16180,ns=16190,rs=16191,is=16192,as=16194,os=16199,ss=16200,ls=16206,cs=16209,ds=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function us(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const fs=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ts||t.mode>16211?1:0},hs=e=>{if(fs(e))return Ko;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ts,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Go},ps=e=>{if(fs(e))return Ko;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,hs(e)},gs=(e,t)=>{let n;if(fs(e))return Ko;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ko:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ps(e))},ms=(e,t)=>{if(!e)return Ko;const n=new us;e.state=n,n.strm=e,n.window=null,n.mode=ts;const r=gs(e,t);return r!==Go&&(e.state=null),r};let ws,bs,_s=!0;const vs=e=>{if(_s){ws=new Int32Array(512),bs=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ho(1,e.lens,0,288,ws,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ho(2,e.lens,0,32,bs,0,e.work,{bits:5}),_s=!1}e.lencode=ws,e.lenbits=9,e.distcode=bs,e.distbits=5},ys=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Es=(e,t)=>{if(fs(e))return Ko;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,Go):Ko},xs={inflateReset:ps,inflateReset2:gs,inflateResetKeep:hs,inflateInit:e=>ms(e,15),inflateInit2:ms,inflate:(e,t)=>{let n,r,i,a,o,s,l,c,d,u,f,h,p,g,m,w,b,_,v,y,E,x,k=0;const T=new Uint8Array(4);let S,A;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(fs(e)||!e.output||!e.input&&0!==e.avail_in)return Ko;n=e.state,n.mode===rs&&(n.mode=is),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,d=n.bits,u=s,f=l,x=Go;e:for(;;)switch(n.mode){case ts:if(0===n.wrap){n.mode=is;break}for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=ga(n.check,T,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=cs;break}if((15&c)!==es){e.msg="unknown compression method",n.mode=cs;break}if(c>>>=4,d-=4,E=8+(15&c),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=cs;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:rs,c=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==es){e.msg="unknown compression method",n.mode=cs;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=cs;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ga(n.check,T,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=ga(n.check,T,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ga(n.check,T,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ga(n.check,T,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>s&&(h=s),h&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),E)),512&n.flags&&4&n.wrap&&(n.check=ga(n.check,r,h,a)),s-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;h=0;do{E=r[a+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=ga(n.check,r,h,a)),s-=h,a+=h,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;h=0;do{E=r[a+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=ga(n.check,r,h,a)),s-=h,a+=h,E)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=cs;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=rs;break;case 16189:for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}e.adler=n.check=ds(c),c=0,d=0,n.mode=ns;case ns:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,Wo;e.adler=n.check=1,n.mode=rs;case rs:if(t===Zo||t===qo)break e;case is:if(n.last){c>>>=7&d,d-=7&d,n.mode=ls;break}for(;d<3;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(vs(n),n.mode=os,t===qo){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=cs}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=cs;break}if(n.length=65535&c,c=0,d=0,n.mode=as,t===qo)break e;case as:n.mode=16195;case 16195:if(h=n.length,h){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;i.set(r.subarray(a,a+h),o),s-=h,a+=h,l-=h,o+=h,n.length-=h;break}n.mode=rs;break;case 16196:for(;d<14;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=cs;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.lens[N[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},x=Ho(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,x){e.msg="invalid code lengths set",n.mode=cs;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],m=k>>>24,w=k>>>16&255,b=65535&k,!(m<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(b<16)c>>>=m,d-=m,n.lens[n.have++]=b;else{if(16===b){for(A=m+2;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(c>>>=m,d-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=cs;break}E=n.lens[n.have-1],h=3+(3&c),c>>>=2,d-=2}else if(17===b){for(A=m+3;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=m,d-=m,E=0,h=3+(7&c),c>>>=3,d-=3}else{for(A=m+7;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=m,d-=m,E=0,h=11+(127&c),c>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=cs;break}for(;h--;)n.lens[n.have++]=E}}if(n.mode===cs)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=cs;break}if(n.lenbits=9,S={bits:n.lenbits},x=Ho(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,x){e.msg="invalid literal/lengths set",n.mode=cs;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},x=Ho(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,x){e.msg="invalid distances set",n.mode=cs;break}if(n.mode=os,t===qo)break e;case os:n.mode=ss;case ss:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,Po(e,f),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,d=n.bits,n.mode===rs&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],m=k>>>24,w=k>>>16&255,b=65535&k,!(m<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(w&&!(240&w)){for(_=m,v=w,y=b;k=n.lencode[y+((c&(1<<_+v)-1)>>_)],m=k>>>24,w=k>>>16&255,b=65535&k,!(_+m<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=_,d-=_,n.back+=_}if(c>>>=m,d-=m,n.back+=m,n.length=b,0===w){n.mode=16205;break}if(32&w){n.back=-1,n.mode=rs;break}if(64&w){e.msg="invalid literal/length code",n.mode=cs;break}n.extra=15&w,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;k=n.distcode[c&(1<<n.distbits)-1],m=k>>>24,w=k>>>16&255,b=65535&k,!(m<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(!(240&w)){for(_=m,v=w,y=b;k=n.distcode[y+((c&(1<<_+v)-1)>>_)],m=k>>>24,w=k>>>16&255,b=65535&k,!(_+m<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=_,d-=_,n.back+=_}if(c>>>=m,d-=m,n.back+=m,64&w){e.msg="invalid distance code",n.mode=cs;break}n.offset=b,n.extra=15&w,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=cs;break}n.mode=16204;case 16204:if(0===l)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=cs;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=i,p=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{i[o++]=g[p++]}while(--h);0===n.length&&(n.mode=ss);break;case 16205:if(0===l)break e;i[o++]=n.length,l--,n.mode=ss;break;case ls:if(n.wrap){for(;d<32;){if(0===s)break e;s--,c|=r[a++]<<d,d+=8}if(f-=l,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?ga(n.check,i,f,o-f):ha(n.check,i,f,o-f)),f=l,4&n.wrap&&(n.flags?c:ds(c))!==n.check){e.msg="incorrect data check",n.mode=cs;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=cs;break}c=0,d=0}n.mode=16208;case 16208:x=Yo;break e;case cs:x=Qo;break e;case 16210:return Xo;default:return Ko}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,(n.wsize||f!==e.avail_out&&n.mode<cs&&(n.mode<ls||t!==jo))&&ys(e,e.output,e.next_out,f-e.avail_out),u-=e.avail_in,f-=e.avail_out,e.total_in+=u,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?ga(n.check,i,f,e.next_out-f):ha(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===rs?128:0)+(n.mode===os||n.mode===as?256:0),(0===u&&0===f||t===jo)&&x===Go&&(x=Jo),x},inflateEnd:e=>{if(fs(e))return Ko;let t=e.state;return t.window&&(t.window=null),e.state=null,Go},inflateGetHeader:Es,inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return fs(e)?Ko:(r=e.state,0!==r.wrap&&r.mode!==ns?Ko:r.mode===ns&&(i=1,i=ha(i,t,n,0),i!==r.check)?Qo:(a=ys(e,t,n,n),a?(r.mode=16210,Xo):(r.havedict=1,Go)))},inflateInfo:"pako inflate (from Nodeca project)"};var ks=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ts=Object.prototype.toString,{Z_NO_FLUSH:Ss,Z_FINISH:As,Z_OK:Ns,Z_STREAM_END:Cs,Z_NEED_DICT:Is,Z_STREAM_ERROR:Ms,Z_DATA_ERROR:zs,Z_MEM_ERROR:Ds}=wa;function Rs(e){this.options=bo.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Eo,this.strm.avail_out=0;let n=xs.inflateInit2(this.strm,t.windowBits);if(n!==Ns)throw new Error(ma[n]);if(this.header=new ks,xs.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=yo.string2buf(t.dictionary):"[object ArrayBuffer]"===Ts.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=xs.inflateSetDictionary(this.strm,t.dictionary),n!==Ns)))throw new Error(ma[n])}function Os(e,t){const n=new Rs(t);if(n.push(e),n.err)throw n.msg||ma[n.err];return n.result}Rs.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?As:Ss,"[object ArrayBuffer]"===Ts.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=xs.inflate(n,o),a===Is&&i&&(a=xs.inflateSetDictionary(n,i),a===Ns?a=xs.inflate(n,o):a===zs&&(a=Is));n.avail_in>0&&a===Cs&&n.state.wrap>0&&0!==e[n.next_in];)xs.inflateReset(n),a=xs.inflate(n,o);switch(a){case Ms:case zs:case Is:case Ds:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===Cs))if("string"===this.options.to){let e=yo.utf8border(n.output,n.next_out),t=n.next_out-e,i=yo.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Ns||0!==s){if(a===Cs)return a=xs.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Rs.prototype.onData=function(e){this.chunks.push(e)},Rs.prototype.onEnd=function(e){e===Ns&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=bo.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Us={Inflate:Rs,inflate:Os,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Os(e,t)},ungzip:Os,constants:wa};const{Deflate:Ps,deflate:Fs,deflateRaw:Ls,gzip:Vs}=Oo,{Inflate:Bs,inflate:$s,inflateRaw:Hs,ungzip:js}=Us;var Zs={Deflate:Ps,deflate:Fs,deflateRaw:Ls,gzip:Vs,Inflate:Bs,inflate:$s,inflateRaw:Hs,ungzip:js,constants:wa};const qs="pieces";async function Gs(e){return Zs.deflate(JSON.stringify(e),{level:9})}function Ys(e){return JSON.parse(Zs.inflate(e,{to:"string"}),{level:9})}function Ws(){let e,t=0;for(let n in localStorage)localStorage.hasOwnProperty(n)&&(e=localStorage[n].length+n.length,t+=e);return(t/1024).toFixed(2)}const Ks={getAll:()=>{let e=JSON.parse(localStorage.getItem(qs));return e||(e=[]),e},add:async(e,t,n,r=!1)=>{let i=Ks.getAll().filter((t=>t.name!=e));i.unshift(await async function(e,t,n,r=!1){return console.log(r),{name:e,settings:t,updated:Date.now(),data:r?n:await Gs(n)}}(e,t,n,r));try{localStorage.setItem(qs,JSON.stringify(i))}catch({error:a,message:o}){"QuotaExceededError"==a||"The quota has been exceeded."==o?(console.log("Quota exceeded, dropping: ",i.pop()),i.shift(),localStorage.setItem(qs,JSON.stringify(i)),Ks.add(e,t,n,r)):console.error(a,o)}},export:async e=>Ks.getAll().filter((t=>t.name===e))[0],delete:e=>{let t=Ks.getAll().filter((t=>t.name!=e));localStorage.setItem(qs,JSON.stringify(t))}};function Qs(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}const Xs=6048e5,Js=864e5,el=6e4,tl=36e5,nl=3600,rl=60,il=24*nl,al=7*il,ol=365.2425*il,sl=ol/12,ll=3*sl;let cl={};function dl(){return cl}function ul(e,t){const n=dl(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Qs(e),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function fl(e){const t=Qs(e);return t.setHours(0,0,0,0),t}function hl(e){const t=Qs(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pl(e,t){const n=fl(e),r=fl(t),i=+n-hl(n),a=+r-hl(r);return Math.round((i-a)/Js)}function gl(e,t){const n=Qs(e),r=Qs(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function ml(e){const t=Qs(e);return Math.trunc(t.getMonth()/3)+1}function wl(e,t){const n=Qs(e),r=Qs(t);return 4*(n.getFullYear()-r.getFullYear())+(ml(n)-ml(r))}function bl(e,t,n){const r=ul(e,n),i=ul(t,n),a=+r-hl(r),o=+i-hl(i);return Math.round((a-o)/Xs)}function _l(e,t){const n=Qs(e),r=Qs(t);return n.getFullYear()-r.getFullYear()}function vl(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function yl(e,t){return+Qs(e)-+Qs(t)}function El(e,t,n){const r=yl(e,t)/tl;return vl(n?.roundingMethod)(r)}function xl(e,t,n){const r=yl(e,t)/el;return vl(n?.roundingMethod)(r)}function kl(e,t,n){const r=yl(e,t)/1e3;return vl(n?.roundingMethod)(r)}var Tl=_t('<dialog class="rounded-lg overflow-hidden"><form><p class="p-3 text-center"> </p> <div class="mx-2 mb-2 flex gap-2 w-full justify-center"><button formmethod="dialog" class="p-1" value="cancel">Cancel</button> <button formmethod="dialog" class="p-1" value="export-and-delete">Export and Delete</button> <button formmethod="dialog" class="p-1" value="delete">Delete</button></div></form></dialog> <button class="max-w-64 text-dimgrey justify-center align-middle text-nowrap text-ellipsis overflow-hidden" style="background: none !important; border: 1px solid dimgrey"><div style="white-space: nowrap; text-overflow: ellipsis; overflow: hidden"> </div> <hr style="border-top: 1px solid dimgrey !important; width:100%" class="m-1"> <div class="italic"> </div></button>',1);function Sl(e,t){Ve(t,!1);let n=hi(),r=Qt(t,"piece"),i=W(),a=W();Yt();var o=Tl(),s=ut(o);jt(s,(e=>Q(a,e)),(()=>Oe(a)));var l=dt(s),c=dt(l),d=dt(c),u=ft(ft(c,!0)),f=ft(ft(dt(u),!0));ft(ft(f,!0));var h=ft(ft(s,!0)),p=dt(h);jt(p,(e=>Q(i,e)),(()=>Oe(i)));var g=dt(p),m=ft(ft(p,!0)),w=dt(ft(ft(m,!0)));const b=ee((()=>function(e,t,n){let r,i=0;const a=Qs(e),o=Qs(t);if(n?.unit)r=n?.unit,"second"===r?i=kl(a,o):"minute"===r?i=xl(a,o):"hour"===r?i=El(a,o):"day"===r?i=pl(a,o):"week"===r?i=bl(a,o):"month"===r?i=gl(a,o):"quarter"===r?i=wl(a,o):"year"===r&&(i=_l(a,o));else{const e=kl(a,o);Math.abs(e)<rl?(i=kl(a,o),r="second"):Math.abs(e)<nl?(i=xl(a,o),r="minute"):Math.abs(e)<il&&Math.abs(pl(a,o))<1?(i=El(a,o),r="hour"):Math.abs(e)<al&&(i=pl(a,o))&&Math.abs(i)<7?r="day":Math.abs(e)<sl?(i=bl(a,o),r="week"):Math.abs(e)<ll?(i=gl(a,o),r="month"):Math.abs(e)<ol&&wl(a,o)<4?(i=wl(a,o),r="quarter"):(i=_l(a,o),r="year")}return new Intl.RelativeTimeFormat(n?.locale,{localeMatcher:n?.localeMatcher,numeric:n?.numeric||"auto",style:n?.style}).format(i,r)}(r().updated,Date.now()))),_=ee((()=>Math.round(11.2*Object.keys(r().data).length/1024)));Qe((()=>Et(w,`${Oe(b)} - ${Oe(_)} kb`))),Qe((()=>{Et(d,`Are you sure that you'd like to delete ${r().name??""} from your history?`),zt(h,"title",r().name),Et(g,r().name)})),pt("close",s,(()=>{("export-and-delete"==Oe(a).returnValue||"delete"==Oe(a).returnValue)&&Ks.delete(r().name)}),!1),pt("click",h,(()=>{n("load",{project:r()})}),!1),pt("contextmenu",h,Gt((()=>{Oe(a).showModal()})),!1),yt(e,o),Be()}var Al=_t("Please Wait...",1),Nl=_t("Download Image",1),Cl=_t("Please Wait...",1),Il=_t("Copy Image",1),Ml=_t("<button><!></button>"),zl=_t('<div class="flex flex-row gap-1"><button>Copy Text</button> <button><!></button> <!> <button>Copy Transposes</button> <button>Export</button></div>');Si("/*\n! tailwindcss v3.4.6 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n    .container {\n  width: 100%;\n}\n    @media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}\n    @media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}\n    @media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}\n    @media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}\n    @media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}\n    .absolute {\n  position: absolute;\n}\n    .relative {\n  position: relative;\n}\n    .sticky {\n  position: sticky;\n}\n    .top-0 {\n  top: 0px;\n}\n    .z-40 {\n  z-index: 40;\n}\n    .z-50 {\n  z-index: 50;\n}\n    .row-auto {\n  grid-row: auto;\n}\n    .m-1 {\n  margin: 0.25rem;\n}\n    .mx-1 {\n  margin-left: 0.25rem;\n  margin-right: 0.25rem;\n}\n    .mx-2 {\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n}\n    .my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n    .mb-2 {\n  margin-bottom: 0.5rem;\n}\n    .mt-3 {\n  margin-top: 0.75rem;\n}\n    .box-border {\n  box-sizing: border-box;\n}\n    .block {\n  display: block;\n}\n    .flex {\n  display: flex;\n}\n    .inline-flex {\n  display: inline-flex;\n}\n    .hidden {\n  display: none;\n}\n    .h-full {\n  height: 100%;\n}\n    .w-16 {\n  width: 4rem;\n}\n    .w-3\\/4 {\n  width: 75%;\n}\n    .w-32 {\n  width: 8rem;\n}\n    .w-\\[58em\\] {\n  width: 58em;\n}\n    .w-full {\n  width: 100%;\n}\n    .max-w-64 {\n  max-width: 16rem;\n}\n    .transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n    .cursor-pointer {\n  cursor: pointer;\n}\n    .flex-row {\n  flex-direction: row;\n}\n    .flex-col {\n  flex-direction: column;\n}\n    .flex-wrap {\n  flex-wrap: wrap;\n}\n    .content-center {\n  align-content: center;\n}\n    .items-start {\n  align-items: flex-start;\n}\n    .items-center {\n  align-items: center;\n}\n    .items-stretch {\n  align-items: stretch;\n}\n    .justify-center {\n  justify-content: center;\n}\n    .justify-around {\n  justify-content: space-around;\n}\n    .gap-1 {\n  gap: 0.25rem;\n}\n    .gap-12 {\n  gap: 3rem;\n}\n    .gap-2 {\n  gap: 0.5rem;\n}\n    .gap-4 {\n  gap: 1rem;\n}\n    .gap-6 {\n  gap: 1.5rem;\n}\n    .overflow-hidden {\n  overflow: hidden;\n}\n    .overflow-clip {\n  overflow: clip;\n}\n    .overflow-y-auto {\n  overflow-y: auto;\n}\n    .text-ellipsis {\n  text-overflow: ellipsis;\n}\n    .text-nowrap {\n  text-wrap: nowrap;\n}\n    .rounded-lg {\n  border-radius: 0.5rem;\n}\n    .rounded-xl {\n  border-radius: 0.75rem;\n}\n    .border {\n  border-width: 1px;\n}\n    .p-1 {\n  padding: 0.25rem;\n}\n    .p-3 {\n  padding: 0.75rem;\n}\n    .p-4 {\n  padding: 1rem;\n}\n    .text-center {\n  text-align: center;\n}\n    .align-middle {\n  vertical-align: middle;\n}\n    .text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}\n    .text-3xl {\n  font-size: 1.875rem;\n  line-height: 2.25rem;\n}\n    .text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}\n    .lowercase {\n  text-transform: lowercase;\n}\n    .italic {\n  font-style: italic;\n}\n    .text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity));\n}\n    .underline {\n  text-decoration-line: underline;\n}\n    .filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n    .transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n");var Dl=_t('<p class="text-white text-3xl">Or, try this sample piece:</p>'),Rl=_t('<p class="text-white text-3xl">Or, continue one of your previous projects:</p>'),Ol=_t('<hr class="w-[58em]" style="border: 1px solid #a0a0a0"> <div class="flex flex-col items-center gap-6"><!> <div class="w-3/4 flex flex-wrap justify-center gap-2 overflow-clip text-ellipsis"></div></div> <div> <span title="The last entry (or multiple) will automatically be dropped if an autosave fails.\nYou can also right-click a saved sheet to manually delete it.\nIndividual sizes are an estimation, the total is correct."></span></div>',1),Ul=_t('<p class="mb-2"> </p> <button class="w-full">Import another MIDI/JSON file</button> <hr class="my-2 mx-1">',1),Pl=_t('<div class="flex flex-row justify-around items-center gap-2"><button class="w-full block">Transpose selection down</button> <button class="w-full block">Transpose selection up</button></div> <button>Auto-transpose (single)</button> <button>Auto-transpose (multi)</button> <div class="flex flex-row justify-around items-stretch gap-2"><button class="w-full block">Split selection</button> <button class="w-full block">Join selection</button></div> <button>Add a comment</button>',1),Fl=_t("<br>"),Ll=_t("<br>"),Vl=_t('<span class="comment" contenteditable="true" style="white-space:pre-wrap;"> </span>'),Bl=_t('<span class="comment"> </span>'),$l=_t("<!> <!> <br>",1),Hl=_t('<div class="flex flex-col items-start"><!> <div style="background: #2D2A32; user-select: none"><div><!></div></div></div>'),jl=_t('<button class="sticky">do stuff</button> <dialog class="rounded-lg overflow-hidden"><form class="flex flex-col row-auto items-center"><p class="p-3 text-center">Careful, you\'ve previously edited this sheet! <br> Loading it again will overwrite your progress.</p> <div class="mx-2 mb-2 flex gap-2 w-full justify-center"><button formmethod="dialog" class="p-1" value="load">Load saved</button> <button formmethod="dialog" class="p-1" value="export-and-restart">Export and Start over</button> <button formmethod="dialog" class="p-1" value="new">Start over</button></div></form></dialog> <div class="flex flex-col gap-12 w-full h-full items-center align-center justify-center content-center\n            absolute top-0 z-50" style="height:100%; background: rgb(45,42,50);\n            background: linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%);\n            transition: all 0.6s ease-in-out;"><div class="flex flex-col items-center gap-6"><p class="text-white text-3xl">Import a MIDI/JSON file to get started:</p> <label for="drop" class="cursor-pointer\n                                 rounded-xl\n                                 text-xl\n                                 p-4" style="border: 2px solid dimgrey">Click or drop a MIDI/JSON file here!</label> <input id="drop" class="hidden" type="file" accept=".mid,.midi,.json"></div> <!></div> <div class="flex flex-row"><div id="sidebar" class="m-1 flex flex-col sticky overflow-y-auto top-0" style="min-width:25em; max-width:25em; max-height: 99vh"><div><!> <div class="flex flex-col gap-2"><button>Select all</button> <!></div> <!></div> <div id="guide">Click on a note to set selection beginning/ending<br> Double-click on a note to select the whole line <hr class="my-2 mx-1"> Timing:<br> <span>Whole note</span><br> <span>Half note</span><br> <span>Quarter note</span><br> <span>Eighth note</span><br> <span>Sixteenth note</span><br> <span>Thirty-second note</span><br><br> <span>Longer than whole</span><br> <span>Shorter than thirty-second</span><br></div></div> <section id="track-chooser" class="z-40 w-full absolute flex flex-col gap-4 justify-center items-center content-center text-2xl" style="top: -110vh; height: 100vh; background: rgb(45,42,50);\n                    background: linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%);\n                    transition: all 0.6s ease-in-out;"><div id="tracks" class="flex flex-col gap-2"><!></div> <button>Import selected tracks</button></section> <!></div>',1);var Zl=new function(e,t){Ve(t,!1);let n=W({element:void 0,hide:()=>{K(n,Oe(n).element.style.top="-110vh"),F(),S()},show:()=>{K(n,Oe(n).element.style.top="0px")}}),r=W(Ws()),i=W({element:void 0,name:void 0,data:void 0,set:(e,t=!1)=>{Q(u,t?Oe(u):void 0),K(i,Oe(i).name=Oe(a)??e.name),K(i,Oe(i).data=Ys(e.data))},setAndProceed:(e,t=!1)=>{Q(u,t?Oe(u):void 0),K(i,Oe(i).name=Oe(a)??e.name),K(i,Oe(i).data=Ys(e.data)),Oe(i).proceed("load")},proceed:(e="prompt")=>{let t=Oe(i).element?.returnValue;if("prompt"!==e&&(t=e),t){if("load"==t||"existing"==t){console.log("Loading",Oe(i).name),Q(c,!0),Q(h,Oe(i).data),!Oe(h).find((e=>ri(e)))?.notes&&(confirm("Looks like this project is from an older version, and unfortunately can't be opened anymore.\nYou can right-click it on the main screen to export or delete it from your list.\n\nIf you must view/edit it again, you can open it in an older version (reach me at @arijanj on Discord for help with this)"),window.location.reload());for(let e=0;e<Oe(h).length;e++){let t=Oe(h)[e];if(ri(t)){let n=[];for(let e of t.notes){let t=new ai(e.value,e.playTime,e.tempo,e.BPM,e.delta);t.original=e.original,n.push(t)}let r=new oi(n,t.classicChordOrder,t.sequentialQuantize);r.index=t.index,r.next=t.next,K(h,Oe(h)[e]=r)}}console.log(Oe(h)),x()}else"export-and-restart"==t?Ks.export(Oe(i).name).then((e=>{I(e),_()})):"new"==t&&_();Oe(n).hide()}}}),a=W(),o=e=>{if(e)return e.split(".").slice(0,-1).join(".")},s=W(),l=W({element:void 0,hide:()=>{K(l,Oe(l).element.style.top="-110vh")},show:()=>{K(l,Oe(l).element.style.top="0px")}}),c=W(!1),u=W(),f=W(),h=W(),p=W(!1),g=W(),m=W(),w=W();async function b(){Q(a,o(Oe(s).files[0].name));let e=Oe(z).find((e=>e.name==Oe(a)))??!1;e?(K(i,Oe(i).name=Oe(a)),K(i,Oe(i).data=Ys(e.data)),Oe(i).element.showModal()):(_(),Oe(n).hide())}async function _(e=void 0){e&&K(s,Oe(s).files=e.files);if("json"===Oe(s).files[0].type.split("/")[1]){let e=await Oe(s).files[0].text();return Oe(i).set(JSON.parse(e)),Q(c,!0),Q(h,Oe(i).data),void x()}await Oe(s).files[0].arrayBuffer().then((e=>{Q(u,new ti(e)),function(e){return e.header.getTimeDivision()===ti.Header.TICKS_PER_BEAT?{ticksPerBeat:e.header.getTicksPerBeat()}:{SMPTEFrames:e.header.getSMPTEFrames(),ticksPerFrame:e.header.getTicksPerFrame()}}(Oe(u)).ticksPerBeat||console.error("No ticksPerBeat in this midi file"),Q(f,Oe(u).tracks),Q(g,Oe(f).map((()=>!0))),Q(c,!1),Oe(l).show()}))}let v=()=>{if(!Oe(u))return void console.log("no midiobject");let e=function(e,t){let n=[];return e.getEvents().forEach((e=>{e.subtype==Gr.EVENT_META_SET_TEMPO&&n.push(e),e.subtype==Gr.EVENT_MIDI_NOTE_ON&&(e.track||!0!==t[0]?!0===t[e.track]&&n.push(e):n.push(e))})),n}(Oe(u),Oe(g));Q(h,si(e,Oe(E),Oe(h)));let t=Oe(h).filter((e=>ri(e)));t.forEach(((e,n)=>{e.next={notes:[{playTime:t[n+1]?.notes[0]?.playTime}]}})),x(),S(),Q(c,!0)},y=W(),E=W();try{Q(E,JSON.parse(localStorage.getItem("preferences"))),K(E,Oe(E).beats=4)}catch(e){Q(E,void 0)}let x=()=>{console.log("updating chords"),Q(p,!Oe(p))},k=(e,t,n,r=void 0)=>{let i=r?.relative??!1;for(let r=e;r<=Oe(h).length;r++){let e=Oe(h).find((e=>e.index==r));if(!ii(e)){if(e.index>t)break;A(r,n,{relative:i,skipUpdate:!0})}}!0!==r?.skipSave&&(L(),D())},T=(e,t,n=void 0)=>{let r=n?.stickTo??0,i=n?.skipSave??!1,a=[];for(let n=e;n<=t;n++){let e=Oe(h)[P(n)];a.push(e)}"same"==r&&(r=a[0].notes[0].transposition());let o=fi(a,11,r,0);return k(e,t,o,{relative:!1,skipSave:!0}),S(),i||D(),o},S=()=>{if(!Oe(h))return;Q(h,Oe(h).filter((e=>"transpose"!=e.kind)));let e=R(Oe(h),ii,0).notes[0].transposition();Oe(h).splice(0,0,{type:"comment",kind:"transpose",text:"Transpose by: "+-e,notop:!0});let t=e;for(let e=0;e<Oe(h).length;e++){let n=Oe(h)[e];if(ii(n))continue;let r=n.notes[0].transposition(),i=r-t;if(0!=i){let n=`Transpose by: ${-r>0?"+":""}${-r}`;n+=` (${-i>0?"+":""}${-i})`;let a=e-1;for(;"comment"==Oe(h)[a]?.type;)a--;Oe(h).splice(a+1,0,{type:"comment",kind:"transpose",text:n}),t=r}}x()},A=(e,t,n)=>{let r=n.relative??!1,i=n.skipUpdate??!1,a=Oe(h).find((t=>t.index==e));ii(a)||(a.transpose(t,r,!0),i||x())};function C(e){K(E,Oe(E).capturingImage=!0),K(m,Oe(m).firstChild.style.width=`${Oe(w)+1}px`),setTimeout((()=>function(e,t){return dn(this,null,(function*(){const n=yield ur(e,t),{log:r,type:i,quality:a,dpi:o}=n,s=yield Br(n);r.time("canvas to blob");const l=yield tr(s,i,a);if(["image/png","image/jpeg"].includes(i)&&o){const e=yield ir(l.slice(0,33));let t=new Uint8Array(e);return"image/png"===i?t=wn(t,o):"image/jpeg"===i&&(t=function(e,t){return e[13]=1,e[14]=t>>8,e[15]=255&t,e[16]=t>>8,e[17]=255&t,e}(t,o)),r.timeEnd("canvas to blob"),new Blob([t,l.slice(33)],{type:i})}return r.timeEnd("canvas to blob"),l}))}(Oe(m),{width:Oe(w),scale:2}).then((t=>{"copy"===e?function(e){try{navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(e){console.error(e)}}(t):function(e){M(e,"png")}(t),K(E,Oe(E).capturingImage=!1),K(m,Oe(m).firstChild.style.width="max-content")}))),250)}function I(e){Q(a,e.name),M(new Blob([JSON.stringify(e)],{type:"text/json"}),"json")}function M(e,t){const n=URL.createObjectURL(e);let r=`${Oe(a)}.${t}`,i=document.createElement("a");i.href=n,i.download=r,document.body.appendChild(i),i.click(),URL.revokeObjectURL(n),document.body.removeChild(i)}let z=W(Ks.getAll());function D(){Oe(a)&&Ks.add(Oe(a),Oe(E),Oe(h)).then((()=>Q(z,Ks.getAll()))),Q(r,Ws()),console.log("saving",Oe(h))}function R(e,t,n=0){let r=n;for(;e[r]&&t(e[r]);)r++;return e[r]}0!=Oe(z).length||localStorage.getItem("hadSample")||(localStorage.setItem("hadSample",!0),fetch("https://gist.githubusercontent.com/ArijanJ/80f86cbe9dcf8384dbdf9578c83102a6/raw/4ec84c63f655866e6d0d4e1c75949a22537c417e/Mariage_dAmour_(sample).json").then((e=>e.json())).then((e=>{Ks.add(e.name,e.settings,e.data,!0),setTimeout((()=>{Q(z,Ks.getAll(Q(r,Ws())))}),0)})));let O=W(!1),U=W({left:void 0,right:void 0});function P(e){let t=Oe(h),n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);for(;i>=n&&!("index"in t[i]);)i--;if(i<n)n=Math.floor((n+r)/2)+1;else{if(t[i].index===e)return i;t[i].index<e?n=i+1:r=i-1}}}function F(){if(Oe(c)&&(Oe(U).left||Oe(U).right)){for(let e=Oe(U).left;e<Oe(h).length;e++){const t=Oe(h)[e];if(!ii(t)){if(t.index>Oe(U).right)break;t.selected=void 0}}K(U,Oe(U).left=void 0),K(U,Oe(U).right=void 0),x()}}function L(e){if(Oe(h)){for(let e=0;e<Oe(h).length;e++)ii(Oe(h)[e])||K(h,Oe(h)[e].selected=void 0);for(let e=Oe(U).left;e<=Oe(U).right;e++){let t=Oe(h).find((t=>t.index==e));t&&(t.selected=!0)}x()}}function V(e){let t=e.detail?.index??e;if(Oe(U).left===t&&Oe(U).right===t){let e=P(t);for(;ri(Oe(h)[e]);)e--;e++;let n=e;for(;ri(Oe(h)[n]);)n++;n--,K(U,Oe(U).left=Oe(h)[e].index),K(U,Oe(U).right=Oe(h)[n].index)}else t<Oe(U).left||void 0===Oe(U).left?(K(U,Oe(U).right=Oe(U).left??t),K(U,Oe(U).left=t)):K(U,Oe(U).right=t);L()}var B;We((()=>(Oe(s),Oe(i))),(()=>{Oe(s)&&Q(a,o(Oe(s).files[0]?.name)??Oe(i).name)})),We((()=>(Oe(y),Oe(E),Oe(u))),(()=>{Oe(y)?(["beats","classicChordOrder","quantize","sequentialQuantize","minSpeedChange","bpmChanges","bpm"].some((e=>Oe(E)[e]!=Oe(y)[e]))&&v(),Q(y,{...Oe(E)}),Oe(u)&&localStorage.setItem("preferences",JSON.stringify(Oe(E))),L()):Q(y,{...Oe(E)})})),We((()=>Oe(U)),(()=>{Q(O,null!=Oe(U).left&&null!=Oe(U).right)})),B=ye,Ke((()=>{if(Oe(B.l.r2)){for(var e of B.l.r1){var t=e.effect;ke(t)&&Ce(t),e.ran=!1}B.l.r2.v=!1}})),Yt();var $=jl();!function(e){var t;t=document.head.appendChild(ct());try{Xe((()=>e(t)),N)}finally{}}((e=>{undefined.title="MIDI Converter"}));var H=ut($),j=ft(ft(H,!0));jt(j,(e=>K(i,Oe(i).element=e)),(()=>Oe(i)?.element));var Z=dt(j),G=dt(Z);ft(dt(G));var Y=ft(ft(G,!0)),X=ft(ft(dt(Y),!0));ft(ft(X,!0));var J=ft(ft(j,!0));jt(J,(e=>K(n,Oe(n).element=e)),(()=>Oe(n)?.element));var te=dt(J),ne=ft(ft(dt(te),!0)),re=ft(ft(ne,!0));jt(re,(e=>Q(s,e)),(()=>Oe(s))),xt(ft(ft(te,!0)),(()=>Oe(z).length>0),(e=>{var t=Ol(),a=ft(ft(ut(t),!0)),o=dt(a);xt(o,(()=>1==Oe(z).length&&Oe(z)[0].name.endsWith("(sample)")),(e=>{yt(e,Dl())}),(e=>{yt(e,Rl())})),St(ft(ft(o,!0)),9,(()=>Oe(z)),Tt,((e,t,a)=>{Sl(e,{get piece(){return He(t)},$$events:{load:e=>{Oe(i).setAndProceed(e.detail.project),Oe(n).hide()},refresh:()=>{Q(z,Ks.getAll()),Q(r,Ws())},export:()=>I(He(t))},$$legacy:!0})}));var s=dt(ft(ft(a,!0)));ft(s),Qe((()=>Et(s,`Used ~${Oe(r)??""} / 5000 kB `))),yt(e,t)}));var ie=ft(ft(J,!0)),ae=dt(ie),oe=dt(ae),se=dt(oe);xt(se,(()=>Oe(c)),(e=>{var t=Ul(),r=ut(t),i=dt(r),o=ft(ft(r,!0));ft(ft(o,!0)),Qe((()=>Et(i,`You are currently editing: ${Oe(a)??""}`))),pt("click",o,(()=>{Oe(n).show(),setTimeout((()=>{Q(c,!1),Q(a,null),document.getElementById("drop").value=""}),600)}),!1),yt(e,t)}));var le=ft(ft(se,!0)),ce=dt(le);xt(ft(ft(ce,!0)),(()=>Oe(O)),(e=>{var t=Pl(),n=ut(t),r=dt(n),i=ft(ft(r,!0)),a=ft(ft(n,!0)),o=ft(ft(a,!0)),s=ft(ft(o,!0)),l=dt(s),c=ft(ft(l,!0)),d=ft(ft(s,!0));pt("click",r,(()=>{k(Oe(U).left,Oe(U).right,1,{relative:!0}),S()}),!1),pt("click",i,(()=>{k(Oe(U).left,Oe(U).right,-1,{relative:!0}),S()}),!1),pt("click",a,(()=>{T(Oe(U).left,Oe(U).right)}),!1),pt("click",o,(()=>{((e,t)=>{let n=[];for(let r=P(e);r<Oe(h).length;r++){let i=Oe(h)[r]??void 0;if(i.index>=t){n.push({left:e,right:i.index});break}if("break"==i.type){let t=R(Oe(h),ii,r);n.push({left:e,right:t.index}),e=t.index}}let r=P(n[0].left);r=Oe(h)[r];let i=r.notes[0]?.transposition()??0;for(let e of n)i=T(e.left,e.right,{stickTo:i,skipSave:!0});S(),D()})(Oe(U).left,Oe(U).right)}),!1),pt("click",l,(()=>{!function(e){let t=P(e);Oe(h).splice(t,0,{type:"break"}),x()}(Oe(U).left)}),!1),pt("click",c,(()=>{!function(e,t){for(let n=P(e);n<Oe(h).length&&("break"==Oe(h)[n]?.type&&(Oe(h).splice(n,1),n--),!(n>P(t)));n++);x()}(Oe(U).left,Oe(U).right)}),!1),pt("click",d,(()=>{(e=>{let t=P(e);Oe(h).splice(t,0,{type:"comment",kind:"custom",text:"Add a comment..."}),L()})(Oe(U).left)}),!1),yt(e,t)}));var de=ft(ft(le,!0)),ue=ee((()=>!!Oe(u)));!function(e,t){Ve(t,!1);let n=Qt(t,"show"),r=Qt(t,"hasMIDI",0,!1),i=["Verdana","Tahoma","Dejavu Sans","Segoe UI","Helvetica","Lucida Console","Candara"],a=Qt(t,"settings",12,(()=>({beats:4,quantize:35,classicChordOrder:!0,sequentialQuantize:!0,curlyQuantizes:!0,pShifts:"Start",pOors:"Inorder",oors:!0,tempoMarks:!1,bpmChanges:!0,minSpeedChange:10,oorSeparator:":",resilience:2,font:i[0],capturingImage:!1,missingTempo:!1,bpm:120})));Yt();var o=vt();xt(ut(o),n,(e=>{var t=Ei(),n=ft(ft(ut(t),!0)),o=dt(n),s=ft(ft(dt(o),!0)),l=dt(ft(ft(s,!0))),c=ft(ft(n,!0)),d=ft(ft(c,!0)),u=dt(d),f=ft(ft(dt(u),!0));Qe((()=>{a().pShifts,Ue((()=>{}))}));var h=dt(f);h.value=null==(h.__value="Start")?"":"Start";var p=ft(h);p.value=null==(p.__value="End")?"":"End";var g=ft(ft(u,!0)),m=ft(ft(dt(g),!0));Qe((()=>{a().pOors,Ue((()=>{}))}));var w=dt(m);w.value=null==(w.__value="Inorder")?"":"Inorder";var b=ft(w);b.value=null==(b.__value="Start")?"":"Start";var _=ft(b);_.value=null==(_.__value="End")?"":"End";var v=ft(ft(g,!0)),y=ft(ft(v,!0));xt(y,r,(e=>{var t=pi(),n=ft(ft(dt(t),!0)),r=dt(ft(ft(n,!0)));Qe((()=>Et(r,`Every ${(1==a().beats?"1 beat":`${a().beats} beats`)??""}`))),Rt(n,(()=>a().beats),(e=>a(a().beats=e,!0))),yt(e,t)}),(e=>{yt(e,gi())}));var E=ft(ft(y,!0));xt(E,(()=>1==a().missingTempo),(e=>{var t=mi(),n=ft(ft(dt(t),!0)),r=ft(ft(n,!0));Rt(n,(()=>a().bpm),(e=>a(a().bpm=e,!0))),Rt(r,(()=>a().bpm),(e=>a(a().bpm=e,!0))),yt(e,t)}));var x=ft(ft(E,!0));xt(x,r,(e=>{var t=wi(),n=ut(t),r=ft(ft(dt(n),!0)),i=dt(ft(ft(r,!0))),o=ft(ft(n,!0)),s=dt(o),l=dt(ft(ft(o,!0)));Qe((()=>Et(i,`${a().quantize??""} miliseconds`))),Rt(r,(()=>a().quantize),(e=>a(a().quantize=e,!0))),Ot(s,(()=>a().classicChordOrder),(e=>a(a().classicChordOrder=e,!0))),Ot(l,(()=>a().sequentialQuantize),(e=>a(a().sequentialQuantize=e,!0))),yt(e,t)}));var k=ft(ft(x,!0)),T=dt(k),S=ft(ft(k,!0)),A=ft(ft(S,!0)),N=dt(A),C=ft(ft(A,!0)),I=dt(C),M=ft(ft(C,!0));xt(M,r,(e=>{var t=_i(),n=ut(t),r=dt(n);xt(dt(ft(ft(n,!0))),(()=>a().bpmChanges),(e=>{var t=bi(),n=ft(ft(ut(t),!0)),r=dt(ft(ft(n,!0)));Qe((()=>Et(r,`At least ${a().minSpeedChange??""}%`))),Rt(n,(()=>a().minSpeedChange),(e=>a(a().minSpeedChange=e,!0))),yt(e,t)})),Ot(r,(()=>a().bpmChanges),(e=>a(a().bpmChanges=e,!0))),yt(e,t)}));var z=ft(ft(M,!0));xt(z,(()=>a().oors&&a().tempoMarks),(e=>{var t=vi(),n=dt(t),r=dt(ft(ft(n,!0)));Rt(r,(()=>a().oorSeparator),(e=>a(a().oorSeparator=e,!0))),pt("input",r,(e=>{[null,"0","","    "," ","'","[","]","(",")","{","}","_","-",".",","].concat(li.split("")).includes(e.data?.toLowerCase()??null)?a(a().oorSeparator=":",!0):a(a().oorSeparator=e.data[0],!0)}),!1),yt(e,t)}));var D=ft(ft(z,!0)),R=ft(ft(D,!0)),O=ft(ft(dt(R),!0));Qe((()=>{a().font,Ue((()=>{}))})),St(O,9,(()=>i),Tt,((e,t,n)=>{var r=yi(),i={},a=dt(r);Qe((()=>{i!==(i=He(t))&&(r.value=null==(r.__value=He(t))?"":He(t)),Et(a,He(t))})),yt(e,r)})),ft(ft(R,!0)),ft(ft(d,!0)),Qe((()=>{Et(l,a().resilience),f.disabled=a().classicChordOrder,zt(f,"title",a().classicChordOrder?'Disable "Classic chord order" to customize this.':"")})),Rt(s,(()=>a().resilience),(e=>a(a().resilience=e,!0))),Lt(f,(()=>a().pShifts),(e=>a(a().pShifts=e,!0))),Lt(m,(()=>a().pOors),(e=>a(a().pOors=e,!0))),Ot(T,(()=>a().curlyQuantizes),(e=>a(a().curlyQuantizes=e,!0))),Ot(N,(()=>a().oors),(e=>a(a().oors=e,!0))),Ot(I,(()=>a().tempoMarks),(e=>a(a().tempoMarks=e,!0))),Lt(O,(()=>a().font),(e=>a(a().font=e,!0))),yt(e,t)})),yt(e,o),Be()}(de,{get settings(){return Oe(E)},set settings(e){Q(E,e)},get show(){return Oe(c)},get hasMIDI(){return Oe(ue)},$$legacy:!0});var fe=ft(ft(oe,!0)),he=ft(dt(fe)),pe=ft(ft(he,!0)),ge=ft(ft(pe,!0)),me=ft(ft(ge,!0)),we=ft(me),be=ft(ft(we,!0)),_e=ft(be),ve=ft(ft(_e,!0)),Ee=ft(ve),xe=ft(ft(Ee,!0)),Te=ft(xe),Se=ft(ft(Te,!0)),Ae=ft(Se),Ne=ft(ft(Ae,!0)),Ie=ft(Ne),Me=ft(Ie),ze=ft(ft(Me,!0)),De=ft(ze),Re=ft(ft(De,!0));ft(Re);var Fe=ft(ft(ae,!0));jt(Fe,(e=>K(l,Oe(l).element=e)),(()=>Oe(l)?.element));var Le=dt(Fe);xt(dt(Le),(()=>Oe(f)),(e=>{var t=vt();St(ut(t),1,(()=>Oe(f)),Tt,((e,t,n)=>{!function(e,t){Ve(t,!1);let n=Qt(t,"track"),r=Qt(t,"idx"),i=Qt(t,"selected",4,!1);Yt();var a=xi(),o=dt(a),s=ft(ft(o,!0)),l=dt(s);Qe((()=>Et(l,`Track ${r()??""} (${n().getTrackLength()??""} events)`))),Qe((()=>{zt(o,"id",`trackbox${r()??""}`),zt(s,"for",`trackbox${r()??""}`)})),Ot(o,i,(e=>i(e))),yt(e,a),Be()}(e,{get track(){return He(t)},idx:He(n)+1,get selected(){return Oe(g)[He(n)]},set selected(e){K(g,Oe(g)[He(n)]=e)},$$legacy:!0})})),yt(e,t)}));var $e=ft(ft(Le,!0));xt(ft(ft(Fe,!0)),(()=>1==Oe(c)),(e=>{var n=Hl(),r=dt(n);!function(e,t){Ve(t,!1);let n=Qt(t,"settings"),r=hi();Yt();var i=zl(),a=dt(i),o=ft(ft(a,!0));xt(dt(o),(()=>n().capturingImage),(e=>{yt(e,Al())}),(e=>{yt(e,Nl())}));var s=ft(ft(o,!0));xt(s,(()=>"undefined"!=typeof ClipboardItem),(e=>{var t=Ml();xt(dt(t),(()=>n().capturingImage),(e=>{yt(e,Cl())}),(e=>{yt(e,Il())})),Qe((()=>t.disabled=n().capturingImage)),pt("click",t,(()=>r("captureSheetAsImage",{mode:"copy"})),!1),yt(e,t)}));var l=ft(ft(s,!0)),c=ft(ft(l,!0));Qe((()=>o.disabled=n().capturingImage)),pt("click",a,(()=>r("copyText")),!1),pt("click",o,(()=>r("captureSheetAsImage",{mode:"download"})),!1),pt("click",l,(()=>r("copyTransposes")),!1),pt("click",c,(()=>r("export")),!1),yt(e,i),Be()}(r,{get settings(){return Oe(E)},$$events:{captureSheetAsImage:e=>{C(e.detail.mode)},copyText:()=>{K(E,Oe(E).tempoMarks=!0),setTimeout((()=>{navigator.clipboard.writeText(Oe(m).firstChild.innerText)}),0)},copyTransposes:()=>{navigator.clipboard.writeText(Oe(h).filter((e=>"transpose"==e.kind)).map((e=>-parseInt(e.text.match(/\d+/)))).join(" "))},export:()=>{D(),setTimeout((()=>{if(void 0===Oe(i)?.data){let e=Ks.getAll().filter((e=>e.name===Oe(a)))[0];Oe(i).setAndProceed(e,!0)}Ks.export(Oe(i).name).then((e=>I(e)))}),0)}},$$legacy:!0});var o=ft(ft(r,!0));jt(o,(e=>Q(m,e)),(()=>Oe(m)));var s,l,c,u,f=dt(o);!function(e,t,n){var r,i=e,a=d;Xe((()=>{q(a,a=t())&&(r&&rt(r),r=Je((()=>n(i))))}))}(dt(f),(()=>Oe(p)),(e=>{var n=vt();St(ut(n),1,(()=>Object.entries(Oe(h))),Tt,((e,n,r)=>{let i=()=>He(He(n))[0],a=()=>He(He(n))[1];var o=vt();xt(ut(o),(()=>a().type),(e=>{var n=vt();const r=ee((()=>Oe(h)[+i()+1])),o=ee((()=>Oe(h)[+i()-1]));xt(ut(n),(()=>"break"===a().type),(e=>{var t=vt();xt(ut(t),(()=>"comment"!=Oe(r)?.type),(e=>{yt(e,Fl())})),yt(e,t)}),(e=>{var n=vt();xt(ut(n),(()=>"comment"===a().type),(e=>{var n=$l(),r=ut(n);xt(r,(()=>"comment"!=Oe(o)?.type&&1!=a().notop),(e=>{yt(e,Ll())}));var s=ft(ft(r,!0));xt(s,(()=>"custom"==a().kind||"tempo"==a().kind),(e=>{var n=Vl(),r=dt(n);Qe((()=>Et(r,a().text))),pt("click",n,qt((function(e){Kt.call(this,t,e)}))),pt("keypress",n,qt((function(e){Kt.call(this,t,e)}))),pt("contextmenu",n,Gt((function(e){Kt.call(this,t,e)}))),pt("focusout",n,(e=>{((e,t)=>{""==t?Oe(h).splice(e,1):K(h,Oe(h)[e].text=t),L(),D()})(i(),e.target.innerText)}),!1),yt(e,n)}),(e=>{var n=Bl(),r=dt(n);Qe((()=>Et(r,a().text))),pt("contextmenu",n,Gt((function(e){Kt.call(this,t,e)}))),yt(e,n)})),ft(ft(s,!0)),yt(e,n)}),null,!0),yt(e,n)})),yt(e,n)}),(e=>{var t=ee((()=>a().next??void 0));Ni(e,{get chord(){return a()},get next(){return Oe(t)},get selected(){return a().selected},get index(){return a().index},get settings(){return Oe(E)},$$events:{select:V},$$legacy:!0})})),yt(e,o)})),yt(e,n)})),Qe((()=>zt(f,"style",`width: max-content; font-family:${Oe(E).font??""}`))),pt("contextmenu",n,Gt((function(e){Kt.call(this,t,e)}))),pt("click",n,F,!1),pt("keypress",n,F,!1),s=f,l="clientWidth",c=e=>Q(w,e),u=$t.observe(s,(()=>c(s[l]))),Ye((()=>(Pe((()=>c(s[l]))),u))),yt(e,n)})),Qe((()=>{zt(me,"style",`color: ${ki.whole}`),zt(be,"style",`color: ${ki.half}`),zt(ve,"style",`color: ${ki.quarter}`),zt(xe,"style",`color: ${ki.eighth}`),zt(Se,"style",`color: ${ki.sixteenth}`),zt(Ne,"style",`color: ${ki.thirtysecond}`),zt(ze,"style",`color: ${ki.quadruple}`),zt(Re,"style",`color: ${ki.sixtyfourth}`)})),pt("click",H,(()=>{console.log(P(1))}),!1),pt("close",j,(()=>{Oe(i).proceed()}),!1),pt("drop",ne,Gt((function(e){e.preventDefault();let t=e?.dataTransfer?.items?.[0];t&&t.getAsFile?(K(s,Oe(s).files=e.dataTransfer.files),b()):console.error("bad file dropped")})),!1),pt("dragover",ne,Gt((function(e){Kt.call(this,t,e)}))),pt("change",re,b,!1),pt("click",ie,Zt(F),!1),pt("keypress",ie,Zt(F),!1),pt("click",ce,(function(){K(U,Oe(U).left=0),K(U,Oe(U).right=Oe(h).length-1),L()}),!1),pt("click",$e,(()=>{v(),Oe(l).hide()}),!1),yt(e,$),Be()}({target:document.body});return Zl}();
//# sourceMappingURL=bundle.js.map
