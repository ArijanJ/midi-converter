var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}const o="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function s(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function f(){return h(" ")}function p(){return h("")}function m(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function g(e){return function(t){return t.preventDefault(),e.call(this,t)}}function w(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function b(e){return function(t){t.target===this&&e.call(this,t)}}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?null:+e}function v(e,t){t=""+t,e.data!==t&&(e.data=t)}function E(e,t){e.value=null==t?"":t}function x(e,t,n,r){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function k(e,t,n){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function T(e){const t=e.querySelector(":checked");return t&&t.__value}let S,A;function C(){if(void 0===S){S=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){S=!0}}return S}function N(e){A=e}function I(){const e=function(){if(!A)throw new Error("Function called outside component initialization");return A}();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const a=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(t,n,{cancelable:r});return i.slice().forEach((t=>{t.call(e,a)})),!a.defaultPrevented}return!0}}function M(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const z=[],D=[];let R=[];const U=[],O=Promise.resolve();let $=!1;function P(e){R.push(e)}function F(e){U.push(e)}const L=new Set;let V=0;function B(){if(0!==V)return;const e=A;do{try{for(;V<z.length;){const e=z[V];V++,N(e),H(e.$$)}}catch(e){throw z.length=0,V=0,e}for(N(null),z.length=0,V=0;D.length;)D.pop()();for(let e=0;e<R.length;e+=1){const t=R[e];L.has(t)||(L.add(t),t())}R.length=0}while(z.length);for(;U.length;)U.pop()();$=!1,L.clear(),N(e)}function H(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const j=new Set;let Z;function q(){Z={r:0,c:[],p:Z}}function G(){Z.r||r(Z.c),Z=Z.p}function Y(e,t){e&&e.i&&(j.delete(e),e.i(t))}function W(e,t,n,r){if(e&&e.o){if(j.has(e))return;j.add(e),Z.c.push((()=>{j.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}function K(e){return void 0!==e?.length?e:Array.from(e)}function Q(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function X(e){e&&e.c()}function J(e,n,a){const{fragment:o,after_update:s}=e.$$;o&&o.m(n,a),P((()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]})),s.forEach(P)}function ee(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];R.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),R=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function te(e,t){-1===e.$$.dirty[0]&&(z.push(e),$||($=!0,O.then(B)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(t,i,a,o,s,l,d=null,u=[-1]){const h=A;N(t);const f=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||h.$$.root};d&&d(f.root);let p=!1;if(f.ctx=a?a(t,i.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&te(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!o&&o(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(c)}else f.fragment&&f.fragment.c();i.intro&&Y(t.$$.fragment),J(t,i.target,i.anchor),B()}N(h)}class re{$$=void 0;$$set=void 0;$destroy(){ee(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");var ie=Object.defineProperty,ae=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,de=Math.pow,ue=(e,t,n)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,he=(e,t)=>{for(var n in t||(t={}))le.call(t,n)&&ue(e,n,t[n]);if(se)for(var n of se(t))ce.call(t,n)&&ue(e,n,t[n]);return e},fe=(e,t)=>ae(e,oe(t)),pe=(e,t)=>{var n={};for(var r in e)le.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&se)for(var r of se(e))t.indexOf(r)<0&&ce.call(e,r)&&(n[r]=e[r]);return n},me=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},o=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);s((n=n.apply(e,t)).next())}));const ge="p".charCodeAt(0),we="H".charCodeAt(0),be="Y".charCodeAt(0),_e="s".charCodeAt(0);let ye;function ve(e){let t=-1;ye||(ye=function(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}());for(let n=0;n<e.length;n++)t=ye[255&(t^e[n])]^t>>>8;return-1^t}function Ee(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=ge,r[1]=we,r[2]=be,r[3]=_e,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=255&t,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const i=ve(r),a=new Uint8Array(4);if(a[0]=i>>>24,a[1]=i>>>16,a[2]=i>>>8,a[3]=255&i,n){const t=function(e){for(let t=e.length-1;t>=4;t--)if(9===e[t-4]&&e[t-3]===ge&&e[t-2]===we&&e[t-1]===be&&e[t]===_e)return t-3;return 0}(e);return e.set(r,t),e.set(a,t+13),e}{const t=new Uint8Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=9;const n=new Uint8Array(54);return n.set(e,0),n.set(t,33),n.set(r,37),n.set(a,50),n}}const xe="[modern-screenshot]",ke="undefined"!=typeof window,Te=ke&&"Worker"in window,Se=ke&&"atob"in window;var Ae;const Ce=ke?null==(Ae=window.navigator)?void 0:Ae.userAgent:"",Ne=Ce.includes("Chrome"),Ie=Ce.includes("AppleWebKit")&&!Ne,Me=Ce.includes("Firefox"),ze=e=>e&&"__CONTEXT__"in e,De=e=>"CSSFontFaceRule"===e.constructor.name,Re=e=>"CSSImportRule"===e.constructor.name,Ue=e=>1===e.nodeType,Oe=e=>"object"==typeof e.className,$e=e=>"image"===e.tagName,Pe=e=>"use"===e.tagName,Fe=e=>Ue(e)&&void 0!==e.style&&!Oe(e),Le=e=>8===e.nodeType,Ve=e=>3===e.nodeType,Be=e=>"IMG"===e.tagName,He=e=>"VIDEO"===e.tagName,je=e=>"CANVAS"===e.tagName,Ze=e=>"TEXTAREA"===e.tagName,qe=e=>"INPUT"===e.tagName,Ge=e=>"STYLE"===e.tagName,Ye=e=>"SCRIPT"===e.tagName,We=e=>"SELECT"===e.tagName,Ke=e=>"SLOT"===e.tagName,Qe=e=>"IFRAME"===e.tagName,Xe=(...e)=>console.warn(xe,...e),Je=e=>console.time(`${xe} ${e}`),et=e=>console.timeEnd(`${xe} ${e}`),tt=e=>{var t;const n=null==(t=null==e?void 0:e.createElement)?void 0:t.call(e,"canvas");return n&&(n.height=n.width=1),n&&"toDataURL"in n&&Boolean(n.toDataURL("image/webp").includes("image/webp"))},nt=e=>e.startsWith("data:");function rt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(ke&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!ke)return e;const n=it().implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}function it(e){var t;return null!=(t=e&&Ue(e)?null==e?void 0:e.ownerDocument:e)?t:window.document}const at="http://www.w3.org/2000/svg";function ot(e,t="image/png",n=1){return me(this,null,(function*(){try{return yield new Promise(((r,i)=>{e.toBlob((e=>{e?r(e):i(new Error("Blob is null"))}),t,n)}))}catch(r){if(Se)return Xe("Failed canvas to blob",{type:t,quality:n},r),function(e){var t,n;const[r,i]=e.split(","),a=null!=(n=null==(t=r.match(/data:(.+);/))?void 0:t[1])?n:void 0,o=window.atob(i),s=o.length,l=new Uint8Array(s);for(let e=0;e<s;e+=1)l[e]=o.charCodeAt(e);return new Blob([l],{type:a})}(e.toDataURL(t,n));throw r}}))}function st(e,t){return new Promise(((n,r)=>{const i=new FileReader;i.onload=()=>n(i.result),i.onerror=()=>r(i.error),i.onabort=()=>r(new Error(`Failed read blob to ${t}`)),"dataUrl"===t?i.readAsDataURL(e):"arrayBuffer"===t&&i.readAsArrayBuffer(e)}))}const lt=e=>st(e,"dataUrl"),ct=e=>st(e,"arrayBuffer");function dt(e,t){const n=it(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function ut(e,t){return new Promise((n=>{const{timeout:r,ownerDocument:i,onError:a}=null!=t?t:{},o="string"==typeof e?dt(e,it(i)):e;let s=null,l=null;function c(){n(o),s&&clearTimeout(s),null==l||l()}if(r&&(s=setTimeout(c,r)),He(o)){const e=o.currentSrc||o.src;if(!e)return o.poster?ut(o.poster,t).then(n):c();if(o.readyState>=2)return c();const r=c,i=t=>{Xe("Failed video load",e,t),null==a||a(t),c()};l=()=>{o.removeEventListener("loadeddata",r),o.removeEventListener("error",i)},o.addEventListener("loadeddata",r,{once:!0}),o.addEventListener("error",i,{once:!0})}else{const e=$e(o)?o.href.baseVal:o.currentSrc||o.src;if(!e)return c();const t=()=>me(this,null,(function*(){if(Be(o)&&"decode"in o)try{yield o.decode()}catch(t){Xe("Failed to decode image, trying to render anyway",o.dataset.originalSrc||e,t)}c()})),n=t=>{Xe("Failed image load",o.dataset.originalSrc||e,t),c()};if(Be(o)&&o.complete)return t();l=()=>{o.removeEventListener("load",t),o.removeEventListener("error",n)},o.addEventListener("load",t,{once:!0}),o.addEventListener("error",n,{once:!0})}}))}const ht=function(){let e=0;return()=>(e+=1,`u${`0000${(Math.random()*de(36,4)<<0).toString(36)}`.slice(-4)}${e}`)}();function ft(e){return null==e?void 0:e.split(",").map((e=>e.trim().replace(/"|'/g,"").toLowerCase())).filter(Boolean)}function pt(e){return{time:t=>e&&Je(t),timeEnd:t=>e&&et(t),warn:(...t)=>e&&Xe(...t)}}function mt(e){return{cache:e?"no-cache":"force-cache"}}function gt(e,t){return me(this,null,(function*(){return ze(e)?e:function(e,t){return me(this,null,(function*(){var n,r,i,a,o;const{scale:s=1,workerUrl:l,workerNumber:c=1}=t||{},d=Boolean(null==t?void 0:t.debug),u=null==(n=null==t?void 0:t.features)||n,h=null!=(r=e.ownerDocument)?r:ke?window.document:void 0,f=null!=(a=null==(i=e.ownerDocument)?void 0:i.defaultView)?a:ke?window:void 0,p=new Map,m=fe(he({width:0,height:0,quality:1,type:"image/png",scale:s,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:d,fetch:he({requestInit:mt(null==(o=null==t?void 0:t.fetch)?void 0:o.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},null==t?void 0:t.fetch),fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:c,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1},t),{__CONTEXT__:!0,log:pt(d),node:e,ownerDocument:h,ownerWindow:f,dpi:1===s?null:96*s,svgStyleElement:wt(h),svgDefsElement:null==h?void 0:h.createElementNS(at,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...new Array(Te&&l&&c?c:0)].map((()=>{try{const e=new Worker(l);return e.onmessage=e=>me(this,null,(function*(){var t,n,r,i;const{url:a,result:o}=e.data;o?null==(n=null==(t=p.get(a))?void 0:t.resolve)||n.call(t,o):null==(i=null==(r=p.get(a))?void 0:r.reject)||i.call(r,new Error(`Error receiving message from worker: ${a}`))})),e.onmessageerror=e=>{var t,n;const{url:r}=e.data;null==(n=null==(t=p.get(r))?void 0:t.reject)||n.call(t,new Error(`Error receiving message from worker: ${r}`))},e}catch(e){return Xe("Failed to new Worker",e),null}})).filter(Boolean),fontFamilies:new Set,fontCssTexts:new Map,acceptOfImage:`${[tt(h)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:p,drawImageCount:0,tasks:[],features:u,isEnable:e=>{var t,n;return"restoreScrollPosition"===e?"boolean"!=typeof u&&(null!=(t=u[e])&&t):"boolean"==typeof u?u:null==(n=u[e])||n}});m.log.time("wait until load"),yield function(e,t){return me(this,null,(function*(){Fe(e)&&(Be(e)||He(e)?yield ut(e,{timeout:t}):yield Promise.all(["img","video"].flatMap((n=>Array.from(e.querySelectorAll(n)).map((e=>ut(e,{timeout:t})))))))}))}(e,m.timeout),m.log.timeEnd("wait until load");const{width:g,height:w}=function(e,t){let{width:n,height:r}=t;if(Ue(e)&&(!n||!r)){const t=e.getBoundingClientRect();n=n||t.width||Number(e.getAttribute("width"))||0,r=r||t.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}(e,m);return m.width=g,m.height=w,m}))}(e,fe(he({},t),{autoDestruct:!0}))}))}function wt(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode("\n.______background-clip--text {\n  background-clip: text;\n  -webkit-background-clip: text;\n}\n");return t.appendChild(n),t}function bt(e,t){return me(this,null,(function*(){const{log:n,timeout:r,drawImageCount:i,drawImageInterval:a}=t;n.time("image to canvas");const o=yield ut(e,{timeout:r}),{canvas:s,context2d:l}=function(e,t){const{width:n,height:r,scale:i,backgroundColor:a,maximumCanvasSize:o}=t,s=e.createElement("canvas");s.width=Math.floor(n*i),s.height=Math.floor(r*i),s.style.width=`${n}px`,s.style.height=`${r}px`,o&&(s.width>o||s.height>o)&&(s.width>o&&s.height>o?s.width>s.height?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o):s.width>o?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o));const l=s.getContext("2d");return l&&a&&(l.fillStyle=a,l.fillRect(0,0,s.width,s.height)),{canvas:s,context2d:l}}(e.ownerDocument,t),c=()=>{try{null==l||l.drawImage(o,0,0,s.width,s.height)}catch(e){Xe("Failed to drawImage",e)}};if(c(),t.isEnable("fixSvgXmlDecode"))for(let e=0;e<i;e++)yield new Promise((t=>{setTimeout((()=>{c(),t()}),e+a)}));return t.drawImageCount=0,n.timeEnd("image to canvas"),s}))}const _t=["width","height","-webkit-text-fill-color"],yt=["stroke","fill"];function vt(e,t,n){var r;const{defaultComputedStyles:i,ownerDocument:a}=n,o=e.nodeName.toLowerCase(),s=Oe(e)&&"svg"!==o,l=s?yt.map((t=>[t,e.getAttribute(t)])).filter((([,e])=>null!==e)):[],c=[s&&"svg",o,l.map(((e,t)=>`${e}=${t}`)).join(","),t].filter(Boolean).join(":");if(i.has(c))return i.get(c);let d=n.sandbox;if(!d)try{a&&(d=a.createElement("iframe"),d.id=`__SANDBOX__-${ht()}`,d.width="0",d.height="0",d.style.visibility="hidden",d.style.position="fixed",a.body.appendChild(d),null==(r=d.contentWindow)||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),n.sandbox=d)}catch(e){Xe("Failed to create iframe sandbox",e)}if(!d)return new Map;const u=d.contentWindow;if(!u)return new Map;const h=u.document;let f,p;s?(f=h.createElementNS(at,"svg"),p=f.ownerDocument.createElementNS(f.namespaceURI,o),l.forEach((([e,t])=>{p.setAttributeNS(null,e,t)})),f.appendChild(p)):f=p=h.createElement(o),p.textContent=" ",h.body.appendChild(f);const m=u.getComputedStyle(p,t),g=new Map;for(let e=m.length,t=0;t<e;t++){const e=m.item(t);_t.includes(e)||g.set(e,m.getPropertyValue(e))}return h.body.removeChild(f),i.set(c,g),g}function Et(e,t,n){var r;const i=new Map,a=[],o=new Map;if(n)for(const e of n)s(e);else for(let t=e.length,n=0;n<t;n++){s(e.item(n))}for(let e=a.length,t=0;t<e;t++)null==(r=o.get(a[t]))||r.forEach(((e,t)=>i.set(t,e)));function s(n){const r=e.getPropertyValue(n),s=e.getPropertyPriority(n),l=n.lastIndexOf("-"),c=l>-1?n.substring(0,l):void 0;if(c){let e=o.get(c);e||(e=new Map,o.set(c,e)),e.set(n,[r,s])}t.get(n)===r&&!s||(c?a.push(c):i.set(n,[r,s]))}return i}const xt=[":before",":after"],kt=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function Tt(e){if(e.ownerDocument)try{const t=e.toDataURL();if("data:,"!==t)return dt(t,e.ownerDocument)}catch(e){}const t=e.cloneNode(!1),n=e.getContext("2d"),r=t.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(e){Xe("Failed to clone canvas",e)}return t}function St(e,t){return je(e)?Tt(e):Qe(e)?function(e,t){var n;try{if(null!=(n=null==e?void 0:e.contentDocument)&&n.body)return Mt(e.contentDocument.body,t)}catch(e){Xe("Failed to clone iframe",e)}return e.cloneNode(!1)}(e,t):Be(e)?function(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager"),t}(e):He(e)?function(e){return me(this,null,(function*(){if(e.ownerDocument&&!e.currentSrc&&e.poster)return dt(e.poster,e.ownerDocument);const t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);const n=t.ownerDocument;if(n){let r=!0;if(yield ut(t,{onError:()=>r=!1}),!r)return e.poster?dt(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,yield new Promise((e=>{t.addEventListener("seeked",e,{once:!0})}));const i=n.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;try{const e=i.getContext("2d");e&&e.drawImage(t,0,0,i.width,i.height)}catch(n){return Xe("Failed to clone video",n),e.poster?dt(e.poster,e.ownerDocument):t}return Tt(i)}return t}))}(e):e.cloneNode(!1)}const At=new Set(["symbol"]);function Ct(e,t,n,r){return me(this,null,(function*(){if(Ue(n)&&(Ge(n)||Ye(n))||r.filter&&!r.filter(n))return;At.has(t.nodeName)||At.has(n.nodeName)?r.currentParentNodeStyle=void 0:r.currentParentNodeStyle=r.currentNodeStyle;const i=yield Mt(n,r);r.isEnable("restoreScrollPosition")&&function(e,t){if(!Fe(e)||!Fe(t))return;const{scrollTop:n,scrollLeft:r}=e;if(!n&&!r)return;const{transform:i}=t.style,a=new DOMMatrix(i),{a:o,b:s,c:l,d:c}=a;a.a=1,a.b=0,a.c=0,a.d=1,a.translateSelf(-r,-n),a.a=o,a.b=s,a.c=l,a.d=c,t.style.transform=a.toString()}(e,i),t.appendChild(i)}))}function Nt(e,t,n){return me(this,null,(function*(){var r,i;for(let a=null!=(i=Ue(e)?null==(r=e.shadowRoot)?void 0:r.firstChild:void 0)?i:e.firstChild;a;a=a.nextSibling)if(!Le(a))if(Ue(a)&&Ke(a)&&"function"==typeof a.assignedNodes){const r=a.assignedNodes();for(let i=0;i<r.length;i++)yield Ct(e,t,r[i],n)}else yield Ct(e,t,a,n)}))}const It=/^[\w-:]+$/;function Mt(e,t,n=!1){return me(this,null,(function*(){var r,i,a,o;const{ownerDocument:s,ownerWindow:l,fontFamilies:c}=t;if(s&&Ve(e))return s.createTextNode(e.data);if(s&&l&&Ue(e)&&(Fe(e)||Oe(e))){const s=yield St(e,t);if(t.isEnable("removeAbnormalAttributes")){const e=s.getAttributeNames();for(let t=e.length,n=0;n<t;n++){const t=e[n];It.test(t)||s.removeAttribute(t)}}const l=t.currentNodeStyle=function(e,t,n,r){var i,a,o,s;const{ownerWindow:l,includeStyleProperties:c,currentParentNodeStyle:d}=r,u=t.style,h=l.getComputedStyle(e),f=vt(e,null,r);null==d||d.forEach(((e,t)=>{f.delete(t)}));const p=Et(h,f,c);return p.delete("transition-property"),p.delete("all"),p.delete("d"),p.delete("content"),n&&(p.delete("margin-top"),p.delete("margin-right"),p.delete("margin-bottom"),p.delete("margin-left"),p.delete("margin-block-start"),p.delete("margin-block-end"),p.delete("margin-inline-start"),p.delete("margin-inline-end"),p.set("box-sizing",["border-box",""])),"text"===(null==(i=p.get("background-clip"))?void 0:i[0])&&t.classList.add("______background-clip--text"),Ne&&(p.has("font-kerning")||p.set("font-kerning",["normal",""]),("hidden"===(null==(a=p.get("overflow-x"))?void 0:a[0])||"hidden"===(null==(o=p.get("overflow-y"))?void 0:o[0]))&&"ellipsis"===(null==(s=p.get("text-overflow"))?void 0:s[0])&&e.scrollWidth===e.clientWidth&&p.set("text-overflow",["clip",""])),p.forEach((([e,t],n)=>{u.setProperty(n,e,t)})),p}(e,s,n,t);n&&function(e,t){const{backgroundColor:n,width:r,height:i,style:a}=t,o=e.style;if(n&&o.setProperty("background-color",n,"important"),r&&o.setProperty("width",`${r}px`,"important"),i&&o.setProperty("height",`${i}px`,"important"),a)for(const e in a)o[e]=a[e]}(s,t);let d=!1;if(t.isEnable("copyScrollbar")){const t=[null==(r=l.get("overflow-x"))?void 0:r[0],null==(i=l.get("overflow-y"))?void 0:i[1]];d=t.includes("scroll")||(t.includes("auto")||t.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}return function(e,t,n,r){const{ownerWindow:i,svgStyleElement:a,svgStyles:o,currentNodeStyle:s}=r;function l(n){var a;const l=i.getComputedStyle(e,n);let c=l.getPropertyValue("content");if(!c||"none"===c)return;c=c.replace(/(')|(")|(counter\(.+\))/g,"");const d=[ht()],u=vt(e,n,r);null==s||s.forEach(((e,t)=>{u.delete(t)}));const h=Et(l,u,r.includeStyleProperties);h.delete("content"),h.delete("-webkit-locale"),"text"===(null==(a=h.get("background-clip"))?void 0:a[0])&&t.classList.add("______background-clip--text");const f=[`content: '${c}';`];if(h.forEach((([e,t],n)=>{f.push(`${n}: ${e}${t?" !important":""};`)})),1===f.length)return;try{t.className=[t.className,...d].join(" ")}catch(e){return}const p=f.join("\n  ");let m=o.get(p);m||(m=[],o.set(p,m)),m.push(`.${d[0]}:${n}`)}a&&i&&(xt.forEach(l),n&&kt.forEach(l))}(e,s,d,t),function(e,t){Ze(e)&&(t.innerHTML=e.value),(Ze(e)||qe(e)||We(e))&&t.setAttribute("value",e.value)}(e,s),null==(o=ft(null==(a=l.get("font-family"))?void 0:a[0]))||o.forEach((e=>c.add(e))),He(e)||(yield Nt(e,s,t)),s}const d=e.cloneNode(!1);return yield Nt(e,d,t),d}))}function zt(e,t){const{url:n,requestType:r="text",responseType:i="text",imageDom:a}=t;let o=n;const{timeout:s,acceptOfImage:l,requests:c,fetchFn:d,fetch:{requestInit:u,bypassingCache:h,placeholderImage:f},workers:p}=e;"image"===r&&(Ie||Me)&&e.drawImageCount++;let m=c.get(n);if(!m){h&&h instanceof RegExp&&h.test(o)&&(o+=(/\?/.test(o)?"&":"?")+(new Date).getTime());const e=he({url:o,timeout:s,responseType:i,headers:"image"===r?{accept:l}:void 0},u);m={type:r,resolve:void 0,reject:void 0,response:null},m.response=(()=>me(this,null,(function*(){if(d&&"image"===r){const e=yield d(n);if(e)return e}return!Ie&&n.startsWith("http")&&p.length?new Promise(((t,r)=>{p[c.size&p.length-1].postMessage(he({rawUrl:n},e)),m.resolve=t,m.reject=r})):function(e){const t=e,{url:n,timeout:r,responseType:i}=t,a=pe(t,["url","timeout","responseType"]),o=new AbortController,s=r?setTimeout((()=>o.abort()),r):void 0;return fetch(n,he({signal:o.signal},a)).then((e=>{if(!e.ok)throw new Error("Failed fetch, not 2xx response",{cause:e});return"dataUrl"===i?e.blob().then(lt):e.text()})).finally((()=>clearTimeout(s)))}(e)})))().catch((e=>{if(c.delete(n),"image"===r&&f)return Xe("Failed to fetch image base64, trying to use placeholder image",o),"string"==typeof f?f:f(a);throw e})),c.set(n,m)}return m.response}function Dt(e,t,n,r){return me(this,null,(function*(){if(!Rt(e))return e;for(const[i,a]of function(e,t){const n=[];return e.replace(Ut,((e,r,i)=>(n.push([i,rt(i,t)]),e))),n.filter((([e])=>!nt(e)))}(e,t))try{const t=yield zt(n,{url:a,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(Ot(i),`$1${t}$3`)}catch(e){Xe("Failed to fetch css data url",i,e)}return e}))}function Rt(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const Ut=/url\((['"]?)([^'"]+?)\1\)/g;function Ot(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function $t(e,t){return me(this,null,(function*(){const{ownerDocument:e,svgStyleElement:n,fontFamilies:r,fontCssTexts:i,tasks:a,font:o}=t;if(e&&n&&r.size)if(o&&o.cssText){const r=Bt(o.cssText,t);n.appendChild(e.createTextNode(`${r}\n`))}else{const o=Array.from(e.styleSheets).filter((e=>{try{return"cssRules"in e&&Boolean(e.cssRules.length)}catch(t){return Xe(`Error while reading CSS rules from ${e.href}`,t),!1}}));yield Promise.all(o.flatMap((e=>Array.from(e.cssRules).map(((n,r)=>me(this,null,(function*(){if(Re(n)){let i=r+1;const a=n.href;let o="";try{o=yield zt(t,{url:a,requestType:"text",responseType:"text"})}catch(e){Xe(`Error fetch remote css import from ${a}`,e)}const s=o.replace(Ut,((e,t,n)=>e.replace(n,rt(n,a))));for(const t of function(e){if(null==e)return[];const t=[];let n=e.replace(Pt,"");for(;;){const e=Ft.exec(n);if(!e)break;t.push(e[0])}n=n.replace(Ft,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(e)i.lastIndex=r.lastIndex;else{if(e=i.exec(n),!e)break;r.lastIndex=i.lastIndex}t.push(e[0])}return t}(s))try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(e){Xe("Error inserting rule from remote css import",{rule:t,error:e})}}}))))))),o.flatMap((e=>Array.from(e.cssRules))).filter((e=>{var t;return De(e)&&Rt(e.style.getPropertyValue("src"))&&(null==(t=ft(e.style.getPropertyValue("font-family")))?void 0:t.some((e=>r.has(e))))})).forEach((r=>{const o=r,s=i.get(o.cssText);s?n.appendChild(e.createTextNode(`${s}\n`)):a.push(Dt(o.cssText,o.parentStyleSheet?o.parentStyleSheet.href:null,t).then((r=>{r=Bt(r,t),i.set(o.cssText,r),n.appendChild(e.createTextNode(`${r}\n`))})))}))}}))}const Pt=/(\/\*[\s\S]*?\*\/)/gi,Ft=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;const Lt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Vt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Bt(e,t){const{font:n}=t,r=n?null==n?void 0:n.preferredFormat:void 0;return r?e.replace(Vt,(e=>{for(;;){const[t,,n]=Lt.exec(e)||[];if(!n)return"";if(n===r)return`src: ${t};`}})):e}const Ht=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function jt(e,t){const{tasks:n}=t;Ue(e)&&((Be(e)||$e(e))&&n.push(...function(e,t){if(Be(e)){const n=e.currentSrc||e.src;if(!nt(n))return[zt(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then((t=>{t&&(e.srcset="",e.dataset.originalSrc=n,e.src=t||"")}))];(Ie||Me)&&t.drawImageCount++}else if(Oe(e)&&!nt(e.href.baseVal)){const n=e.href.baseVal;return[zt(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then((t=>{t&&(e.dataset.originalSrc=n,e.href.baseVal=t||"")}))]}return[]}(e,t)),Pe(e)&&n.push(...function(e,t){var n;const{ownerDocument:r,svgDefsElement:i}=t,a=null!=(n=e.getAttribute("href"))?n:e.getAttribute("xlink:href");if(!a)return[];const[o,s]=a.split("#");if(s){const n=`#${s}`,a=null==r?void 0:r.querySelector(`svg ${n}`);if(o&&e.setAttribute("href",n),null!=i&&i.querySelector(n))return[];if(a)return null==i||i.appendChild(a.cloneNode(!0)),[];if(o)return[zt(t,{url:o,responseType:"text"}).then((e=>{null==i||i.insertAdjacentHTML("beforeend",e)}))]}return[]}(e,t))),Fe(e)&&n.push(...function(e,t){return Ht.map((n=>{const r=e.getPropertyValue(n);return r&&"none"!==r?((Ie||Me)&&t.drawImageCount++,Dt(r,null,t,!0).then((t=>{!t||r===t||e.setProperty(n,t,e.getPropertyPriority(n))}))):null})).filter(Boolean)}(e.style,t)),e.childNodes.forEach((e=>{jt(e,t)}))}function Zt(e,t){return me(this,null,(function*(){const n=yield gt(e,t);if(Ue(n.node)&&Oe(n.node))return n.node;const{ownerDocument:r,log:i,tasks:a,svgStyleElement:o,svgDefsElement:s,svgStyles:l,font:c,progress:d,autoDestruct:u,onCloneNode:h,onEmbedNode:f,onCreateForeignObjectSvg:p}=n;i.time("clone node");const m=yield Mt(n.node,n,!0);if(o&&r){let e="";l.forEach(((t,n)=>{e+=`${t.join(",\n")} {\n  ${n}\n}\n`})),o.appendChild(r.createTextNode(e))}i.timeEnd("clone node"),null==h||h(m),!1!==c&&Ue(m)&&(i.time("embed web font"),yield $t(0,n),i.timeEnd("embed web font")),i.time("embed node"),jt(m,n);const g=a.length;let w=0;null==d||d(w,g),yield Promise.all([...Array(4)].map((()=>me(this,null,(function*(){for(;;){const e=a.pop();if(!e)break;try{yield e}catch(e){Xe("Failed to run task",e)}null==d||d(++w,g)}}))))),i.timeEnd("embed node"),null==f||f(m);const b=function(e,t){const{width:n,height:r}=t,i=function(e,t,n){const r=it(n).createElementNS(at,"svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}(n,r,e.ownerDocument),a=i.ownerDocument.createElementNS(i.namespaceURI,"foreignObject");return a.setAttributeNS(null,"x","0%"),a.setAttributeNS(null,"y","0%"),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.append(e),i.appendChild(a),i}(m,n);return s&&b.insertBefore(s,b.children[0]),o&&b.insertBefore(o,b.children[0]),u&&function(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(e){}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}(n),null==p||p(b),b}))}function qt(e,t){return me(this,null,(function*(){var n;const r=yield gt(e,t),i=yield Zt(r),a=function(e,t){let n=(new XMLSerializer).serializeToString(e);return t&&(n=n.replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}(i,r.isEnable("removeControlCharacter"));r.autoDestruct||(r.svgStyleElement=wt(r.ownerDocument),r.svgDefsElement=null==(n=r.ownerDocument)?void 0:n.createElementNS(at,"defs"),r.svgStyles.clear());const o=dt(a,i.ownerDocument);return yield bt(o,r)}))}function Gt(e){let t;if(e){if(!(e instanceof ArrayBuffer))throw Error("Invalid buffer received.");if(this.datas=new DataView(e,0,Gt.HEADER_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"h"!==String.fromCharCode(this.datas.getUint8(2))||"d"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileHeader : MThd prefix not found");if(6!==this.datas.getUint32(4))throw new Error("Invalid MIDIFileHeader : Chunk length must be 6")}else t=new Uint8Array(Gt.HEADER_LENGTH),t[0]=77,t[1]=84,t[2]=104,t[3]=100,t[4]=0,t[5]=0,t[6]=0,t[7]=6,t[8]=0,t[9]=1,t[10]=0,t[11]=1,t[12]=0,t[13]=192,this.datas=new DataView(t.buffer,0,Gt.HEADER_LENGTH)}Gt.HEADER_LENGTH=14,Gt.FRAMES_PER_SECONDS=1,Gt.TICKS_PER_BEAT=2,Gt.prototype.getFormat=function(){const e=this.datas.getUint16(8);if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI file : MIDI format ("+e+"), format can be 0, 1 or 2 only.");return e},Gt.prototype.setFormat=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI format given ("+e+"), format can be 0, 1 or 2 only.");this.datas.setUint16(8,e)},Gt.prototype.getTracksCount=function(){return this.datas.getUint16(10)},Gt.prototype.setTracksCount=function(e){return this.datas.setUint16(10,e)},Gt.prototype.getTickResolution=function(e){return 32768&this.datas.getUint16(12)?1e6/(this.getSMPTEFrames()*this.getTicksPerFrame()):(e=e||5e5)/this.getTicksPerBeat()},Gt.prototype.getTimeDivision=function(){return 32768&this.datas.getUint16(12)?Gt.FRAMES_PER_SECONDS:Gt.TICKS_PER_BEAT},Gt.prototype.getTicksPerBeat=function(){var e=this.datas.getUint16(12);if(32768&e)throw new Error("Time division is not expressed as ticks per beat.");return e},Gt.prototype.setTicksPerBeat=function(e){this.datas.setUint16(12,32767&e)},Gt.prototype.getSMPTEFrames=function(){const e=this.datas.getUint16(12);let t;if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");if(t=32512&e,-1===[24,25,29,30].indexOf(t))throw new Error("Invalid SMPTE frames value ("+t+").");return 29===t?29.97:t},Gt.prototype.getTicksPerFrame=function(){const e=this.datas.getUint16(12);if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");return 255&e},Gt.prototype.setSMTPEDivision=function(e,t){if(29.97===e&&(e=29),-1===[24,25,29,30].indexOf(e))throw new Error("Invalid SMPTE frames value given ("+e+").");if(0>t||255<t)throw new Error("Invalid ticks per frame value given ("+e+").");this.datas.setUint8(12,128|e),this.datas.setUint8(13,t)};var Yt=Gt;function Wt(e,t){let n,r;if(e){if(!(e instanceof ArrayBuffer))throw new Error("Invalid buffer received.");if(12>e.byteLength-t)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : Buffer length must size at least 12bytes");if(this.datas=new DataView(e,t,Wt.HDR_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"r"!==String.fromCharCode(this.datas.getUint8(2))||"k"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : MTrk prefix not found");if(r=this.getTrackLength(),e.byteLength-t<r)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : The track size exceed the buffer length.");if(this.datas=new DataView(e,t,Wt.HDR_LENGTH+r),255!==this.datas.getUint8(Wt.HDR_LENGTH+(r-3))||47!==this.datas.getUint8(Wt.HDR_LENGTH+(r-2))||0!==this.datas.getUint8(Wt.HDR_LENGTH+(r-1)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : No track end event found at the expected index ("+(Wt.HDR_LENGTH+(r-1)).toString(16)+").")}else n=new Uint8Array(12),n[0]=77,n[1]=84,n[2]=114,n[3]=107,n[4]=0,n[5]=0,n[6]=0,n[7]=4,n[8]=0,n[9]=255,n[10]=47,n[11]=0,this.datas=new DataView(n.buffer,0,Wt.HDR_LENGTH+4)}Wt.HDR_LENGTH=8,Wt.prototype.getTrackLength=function(){return this.datas.getUint32(4)},Wt.prototype.setTrackLength=function(e){return this.datas.setUint32(4,e)},Wt.prototype.getTrackContent=function(){return new DataView(this.datas.buffer,this.datas.byteOffset+Wt.HDR_LENGTH,this.datas.byteLength-Wt.HDR_LENGTH)},Wt.prototype.setTrackContent=function(e){let t,n,r,i;const a=e.byteLength-e.byteOffset;if(4>a)throw new Error("Invalid track length, must size at least 4bytes");for(this.datas=new DataView(new Uint8Array(Wt.HDR_LENGTH+a).buffer),this.datas.setUint8(0,77),this.datas.setUint8(1,84),this.datas.setUint8(2,114),this.datas.setUint8(3,107),this.datas.setUint32(4,a),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=new Uint8Array(this.datas.buffer,Wt.HDR_LENGTH,a),r=0,i=t.length;r<i;r++)n[r]=t[r]};var Kt=Wt;function Qt(){throw new Error("MIDIEvents function not intended to be run.")}Qt.EVENT_META=255,Qt.EVENT_SYSEX=240,Qt.EVENT_DIVSYSEX=247,Qt.EVENT_MIDI=8,Qt.EVENT_META_SEQUENCE_NUMBER=0,Qt.EVENT_META_TEXT=1,Qt.EVENT_META_COPYRIGHT_NOTICE=2,Qt.EVENT_META_TRACK_NAME=3,Qt.EVENT_META_INSTRUMENT_NAME=4,Qt.EVENT_META_LYRICS=5,Qt.EVENT_META_MARKER=6,Qt.EVENT_META_CUE_POINT=7,Qt.EVENT_META_MIDI_CHANNEL_PREFIX=32,Qt.EVENT_META_END_OF_TRACK=47,Qt.EVENT_META_SET_TEMPO=81,Qt.EVENT_META_SMTPE_OFFSET=84,Qt.EVENT_META_TIME_SIGNATURE=88,Qt.EVENT_META_KEY_SIGNATURE=89,Qt.EVENT_META_SEQUENCER_SPECIFIC=127,Qt.EVENT_MIDI_NOTE_OFF=8,Qt.EVENT_MIDI_NOTE_ON=9,Qt.EVENT_MIDI_NOTE_AFTERTOUCH=10,Qt.EVENT_MIDI_CONTROLLER=11,Qt.EVENT_MIDI_PROGRAM_CHANGE=12,Qt.EVENT_MIDI_CHANNEL_AFTERTOUCH=13,Qt.EVENT_MIDI_PITCH_BEND=14,Qt.MIDI_1PARAM_EVENTS=[Qt.EVENT_MIDI_PROGRAM_CHANGE,Qt.EVENT_MIDI_CHANNEL_AFTERTOUCH],Qt.MIDI_2PARAMS_EVENTS=[Qt.EVENT_MIDI_NOTE_OFF,Qt.EVENT_MIDI_NOTE_ON,Qt.EVENT_MIDI_NOTE_AFTERTOUCH,Qt.EVENT_MIDI_CONTROLLER,Qt.EVENT_MIDI_PITCH_BEND],Qt.createParser=function(e,t,n){var r,i,a,o,s;if(e instanceof DataView&&(e={position:t||0,buffer:e,readUint8:function(){return this.buffer.getUint8(this.position++)},readUint16:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readUint32:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readVarInt:function(){for(var e,t=0,n=0;4>n++;){if(!(128&(e=this.readUint8())))return t+e;t+=127&e,t<<=7}throw new Error("0x"+this.position.toString(16)+": Variable integer length cannot exceed 4 bytes")},readBytes:function(e){for(var t=[];0<e;e--)t.push(this.readUint8());return t},pos:function(){return"0x"+(this.buffer.byteOffset+this.position).toString(16)},end:function(){return this.position===this.buffer.byteLength}},t=0),0<t)for(;t--;)e.readUint8();return{next:function(){if(e.end())return null;if(i={index:e.pos(),delta:e.readVarInt()},240==(240&(r=e.readUint8()))){if(r!==Qt.EVENT_META){if(r===Qt.EVENT_SYSEX||r===Qt.EVENT_DIVSYSEX)return i.type=r,i.length=e.readVarInt(),i.data=e.readBytes(i.length),i;if(n)throw new Error(e.pos()+" Unknown event type "+r.toString(16)+", Delta: "+i.delta+".");return i.type=r,i.badsubtype=e.readVarInt(),i.length=e.readUint8(),i.data=e.readBytes(i.length),i}switch(i.type=Qt.EVENT_META,i.subtype=e.readUint8(),i.length=e.readVarInt(),i.subtype){case Qt.EVENT_META_SEQUENCE_NUMBER:if(n&&2!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.msb=e.readUint8(),i.lsb=e.readUint8(),i;case Qt.EVENT_META_TEXT:case Qt.EVENT_META_COPYRIGHT_NOTICE:case Qt.EVENT_META_TRACK_NAME:case Qt.EVENT_META_INSTRUMENT_NAME:case Qt.EVENT_META_LYRICS:case Qt.EVENT_META_MARKER:case Qt.EVENT_META_CUE_POINT:return i.data=e.readBytes(i.length),i;case Qt.EVENT_META_MIDI_CHANNEL_PREFIX:if(n&&1!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.prefix=e.readUint8(),i;case Qt.EVENT_META_END_OF_TRACK:if(n&&0!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i;case Qt.EVENT_META_SET_TEMPO:if(n&&3!==i.length)throw new Error(e.pos()+" Tempo meta event length must be 3.");return i.tempo=(e.readUint8()<<16)+(e.readUint8()<<8)+e.readUint8(),i.tempoBPM=6e7/i.tempo,i;case Qt.EVENT_META_SMTPE_OFFSET:if(n&&5!==i.length)throw new Error(e.pos()+" Bad metaevent length.");if(i.hour=e.readUint8(),n&&23<i.hour)throw new Error(e.pos()+" SMTPE offset hour value must be part of 0-23.");if(i.minutes=e.readUint8(),n&&59<i.minutes)throw new Error(e.pos()+" SMTPE offset minutes value must be part of 0-59.");if(i.seconds=e.readUint8(),n&&59<i.seconds)throw new Error(e.pos()+" SMTPE offset seconds value must be part of 0-59.");if(i.frames=e.readUint8(),n&&30<i.frames)throw new Error(e.pos()+" SMTPE offset frames value must be part of 0-30.");if(i.subframes=e.readUint8(),n&&99<i.subframes)throw new Error(e.pos()+" SMTPE offset subframes value must be part of 0-99.");return i;case Qt.EVENT_META_KEY_SIGNATURE:if(n&&2!==i.length)throw new Error(e.pos()+" Bad metaevent length.");if(i.key=e.readUint8(),n&&(-7>i.key||7<i.key))throw new Error(e.pos()+" Bad metaevent length.");if(i.scale=e.readUint8(),n&&0!==i.scale&&1!==i.scale)throw new Error(e.pos()+" Key signature scale value must be 0 or 1.");return i;case Qt.EVENT_META_TIME_SIGNATURE:if(n&&4!==i.length)throw new Error(e.pos()+" Bad metaevent length.");return i.data=e.readBytes(i.length),i.param1=i.data[0],i.param2=i.data[1],i.param3=i.data[2],i.param4=i.data[3],i;case Qt.EVENT_META_SEQUENCER_SPECIFIC:return i.data=e.readBytes(i.length),i;default:if(n)throw new Error(e.pos()+" Unknown meta event type ("+i.subtype.toString(16)+").");return i.data=e.readBytes(i.length),i}}else{if(0==(128&r)){if(!a)throw new Error(e.pos()+" Running status without previous event");s=r}else a=r>>4,o=15&r,s=e.readUint8();switch(i.type=Qt.EVENT_MIDI,i.subtype=a,i.channel=o,i.param1=s,a){case Qt.EVENT_MIDI_NOTE_OFF:return i.param2=e.readUint8(),i;case Qt.EVENT_MIDI_NOTE_ON:return i.param2=e.readUint8(),i.param2||(i.subtype=Qt.EVENT_MIDI_NOTE_OFF,i.param2=127),i;case Qt.EVENT_MIDI_NOTE_AFTERTOUCH:case Qt.EVENT_MIDI_CONTROLLER:return i.param2=e.readUint8(),i;case Qt.EVENT_MIDI_PROGRAM_CHANGE:case Qt.EVENT_MIDI_CHANNEL_AFTERTOUCH:return i;case Qt.EVENT_MIDI_PITCH_BEND:return i.param2=e.readUint8(),i;default:if(n)throw new Error(e.pos()+" Unknown MIDI event type ("+a.toString(16)+").");return i}}}}},Qt.writeToTrack=function(e,t,n){var r,i,a,o,s=0;for(r=0,i=e.length;r<i;r++){if(e[r].delta>>>28)throw Error("Event #"+r+": Maximum delta time value reached ("+e[r].delta+"/134217728 max)");if(e[r].delta>>>21&&(t[s++]=e[r].delta>>>21&127|128),e[r].delta>>>14&&(t[s++]=e[r].delta>>>14&127|128),e[r].delta>>>7&&(t[s++]=e[r].delta>>>7&127|128),t[s++]=127&e[r].delta,e[r].type===Qt.EVENT_MIDI)t[s++]=(e[r].subtype<<4)+e[r].channel,t[s++]=e[r].param1,-1!==Qt.MIDI_2PARAMS_EVENTS.indexOf(e[r].subtype)&&(t[s++]=e[r].param2);else{if(t[s++]=e[r].type,e[r].type===Qt.EVENT_META&&(t[s++]=e[r].subtype),e[r].length>>>28)throw Error("Event #"+r+": Maximum length reached ("+e[r].length+"/134217728 max)");if(e[r].length>>>21&&(t[s++]=e[r].length>>>21&127|128),e[r].length>>>14&&(t[s++]=e[r].length>>>14&127|128),e[r].length>>>7&&(t[s++]=e[r].length>>>7&127|128),t[s++]=127&e[r].length,e[r].type===Qt.EVENT_META)switch(e[r].subtype){case Qt.EVENT_META_SEQUENCE_NUMBER:t[s++]=e[r].msb,t[s++]=e[r].lsb;break;case Qt.EVENT_META_TEXT:case Qt.EVENT_META_COPYRIGHT_NOTICE:case Qt.EVENT_META_TRACK_NAME:case Qt.EVENT_META_INSTRUMENT_NAME:case Qt.EVENT_META_LYRICS:case Qt.EVENT_META_MARKER:case Qt.EVENT_META_CUE_POINT:for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a];break;case Qt.EVENT_META_MIDI_CHANNEL_PREFIX:t[s++]=e[r].prefix;break;case Qt.EVENT_META_END_OF_TRACK:break;case Qt.EVENT_META_SET_TEMPO:t[s++]=e[r].tempo>>16,t[s++]=e[r].tempo>>8&255,t[s++]=255&e[r].tempo;break;case Qt.EVENT_META_SMTPE_OFFSET:if(n&&23<e[r].hour)throw new Error("Event #"+r+": SMTPE offset hour value must be part of 0-23.");if(t[s++]=e[r].hour,n&&59<e[r].minutes)throw new Error("Event #"+r+": SMTPE offset minutes value must be part of 0-59.");if(t[s++]=e[r].minutes,n&&59<e[r].seconds)throw new Error("Event #"+r+": SMTPE offset seconds value must be part of 0-59.");if(t[s++]=e[r].seconds,n&&30<e[r].frames)throw new Error("Event #"+r+": SMTPE offset frames amount must be part of 0-30.");if(t[s++]=e[r].frames,n&&99<e[r].subframes)throw new Error("Event #"+r+": SMTPE offset subframes amount must be part of 0-99.");t[s++]=e[r].subframes;break;case Qt.EVENT_META_KEY_SIGNATURE:if("number"!=typeof e[r].key||-7>e[r].key||7<e[r].scale)throw new Error("Event #"+r+":The key signature key must be between -7 and 7");if("number"!=typeof e[r].scale||0>e[r].scale||1<e[r].scale)throw new Error("Event #"+r+":The key signature scale must be 0 or 1");t[s++]=e[r].key,t[s++]=e[r].scale;break;case Qt.EVENT_META_TIME_SIGNATURE:case Qt.EVENT_META_SEQUENCER_SPECIFIC:default:for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a]}else for(a=0,o=e[r].length;a<o;a++)t[s++]=e[r].data[a]}}},Qt.getRequiredBufferLength=function(e){var t,n=0,r=0;for(r=0,t=e.length;r<t;r++)n+=e[r].delta>>>21?4:e[r].delta>>>14?3:e[r].delta>>>7?2:1,e[r].type===Qt.EVENT_MIDI?(n++,n++,-1!==Qt.MIDI_2PARAMS_EVENTS.indexOf(e[r].subtype)&&n++):(n++,e[r].type===Qt.EVENT_META&&n++,n+=e[r].length>>>21?4:e[r].length>>>14?3:e[r].length>>>7?2:1,n+=e[r].length);return n};var Xt=Qt,Jt={isNotUTF8:function(e,t,n){try{nn(e,t,n,!0)}catch(e){return!0}return!1},getCharLength:en,getCharCode:tn,getStringFromBytes:nn,getBytesForCharCode:rn,setBytesFromCharCode:an,setBytesFromString:function(e,t,n,r,i){e=e||"",t=t||[],n|=0,r="number"==typeof r?r:t.byteLength||1/0;for(var a=0,o=e.length;a<o;a++){var s=rn(e[a].codePointAt(0));if(i&&n+s>r)throw new Error('Not enought bytes to encode the char "'+e[a]+'" at the offset "'+n+'".');an(e[a].codePointAt(0),t,n,s),n+=s}return t}};function en(e){return 240==(240&e)?4:224==(224&e)?3:192==(192&e)?2:e==(127&e)?1:0}function tn(e,t,n){var r=0,i="";if(t=t||0,e.length-t<=0)throw new Error("No more characters remaining in array.");if(0==(n=n||en(e[t])))throw new Error(e[t].toString(2)+" is not a significative byte (offset:"+t+").");if(1===n)return e[t];if(e.length-t<n)throw new Error("Expected at least "+n+" bytes remaining in array.");if(i="00000000".slice(0,n)+1+"00000000".slice(n+1),e[t]&parseInt(i,2))throw Error("Index "+t+": A "+n+" bytes encoded char cannot encode the "+(n+1)+"th rank bit to 1.");for(i="0000".slice(0,n+1)+"11111111".slice(n+1),r+=(e[t]&parseInt(i,2))<<6*--n;n;){if(128!=(128&e[t+1])||64==(64&e[t+1]))throw Error("Index "+(t+1)+': Next bytes of encoded char must begin with a "10" bit sequence.');r+=(63&e[++t])<<6*--n}return r}function nn(e,t,n,r){var i,a=[];for(t|=0,n="number"==typeof n?n:e.byteLength||e.length;t<n;t++){if(t+(i=en(e[t]))>n){if(r)throw Error("Index "+t+": Found a "+i+" bytes encoded char declaration but only "+(n-t)+" bytes are available.")}else a.push(String.fromCodePoint(tn(e,t,i)));t+=i-1}return a.join("")}function rn(e){if(e<128)return 1;if(e<2048)return 2;if(e<65536)return 3;if(e<2097152)return 4;throw new Error("CharCode "+e+" cannot be encoded with UTF8.")}function an(e,t,n,r){if(e|=0,t=t||[],n|=0,1==(r=r||rn(e)))t[n]=e;else for(t[n++]=(parseInt("1111".slice(0,r),2)<<8-r)+(e>>>6*--r);r>0;)t[n++]=e>>>6*--r&63|128;return t}function on(e,t){var n,r,i,a;if(e){if(25>(e=function(e){if(e){if(e instanceof ArrayBuffer)return e;if(e instanceof Uint8Array)return new Uint8Array(e).buffer}throw new Error("Unsupported buffer type, need ArrayBuffer or Uint8Array")}(e)).byteLength)throw new Error("A buffer of a valid MIDI file must have, at least, a size of 25bytes.");for(this.header=new Yt(e),this.tracks=[],r=Yt.HEADER_LENGTH,i=0,a=this.header.getTracksCount();i<a;i++){if(t&&r>=e.byteLength-1)throw new Error("Couldn't find datas corresponding to the track #"+i+".");n=new Kt(e,r),this.tracks.push(n),r+=n.getTrackLength()+8}if(t&&r!==e.byteLength)throw new Error("It seems that the buffer contains too much datas.")}else this.header=new Yt,this.tracks=[new Kt]}on.prototype.getEvents=function(e,t){var n,r,i,a,o,s,l=0,c=[],d=this.header.getFormat(),u=this.header.getTickResolution();if(1!==d||1===this.tracks.length)for(i=0,a=this.tracks.length;i<a;i++)for(l=2===d&&l?l:0,r=(n=Xt.createParser(this.tracks[i].getTrackContent(),0,!1)).next();r;)l+=r.delta?r.delta*u/1e3:0,r.type===Xt.EVENT_META&&r.subtype===Xt.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),e&&r.type!==e||t&&(!r.subtype||r.subtype!==t)||(r.playTime=l,c.push(r)),r=n.next();else{for(o=[],s=-1,i=0,a=this.tracks.length;i<a;i++)o[i]={},o[i].parser=Xt.createParser(this.tracks[i].getTrackContent(),0,!1),o[i].curEvent=o[i].parser.next();do{for(s=-1,i=0,a=o.length;i<a;i++)o[i].curEvent&&(-1===s||o[i].curEvent.delta<o[s].curEvent.delta)&&(s=i);if(-1!==s){for(i=0,a=o.length;i<a;i++)i!==s&&o[i].curEvent&&(o[i].curEvent.delta-=o[s].curEvent.delta);l+=(r=o[s].curEvent).delta?r.delta*u/1e3:0,r.type===Xt.EVENT_META&&r.subtype===Xt.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),e&&r.type!==e||t&&(!r.subtype||r.subtype!==t)||(r.playTime=l,r.track=s,c.push(r)),o[s].curEvent=o[s].parser.next()}}while(-1!==s)}return c},on.prototype.getMidiEvents=function(){return this.getEvents(Xt.EVENT_MIDI)},on.prototype.getLyrics=function(){var e,t,n,r=this.getEvents(Xt.EVENT_META),i=[],a=[];for(t=0,n=r.length;t<n;t++)(e=r[t]).subtype===Xt.EVENT_META_LYRICS?a.push(e):e.subtype===Xt.EVENT_META_TEXT&&("@"===String.fromCharCode(e.data[0])?"T"===String.fromCharCode(e.data[1])||"I"===String.fromCharCode(e.data[1])||String.fromCharCode(e.data[1]):0===String.fromCharCode.apply(String,e.data).indexOf("words")?i.length=0:0!==e.playTime&&i.push(e));2<a.length?i=a:i.length||(i=[]);try{i.forEach((function(e){e.text=Jt.getStringFromBytes(e.data,0,e.length,!0)}))}catch(e){i.forEach((function(e){e.text=e.data.map((function(e){return String.fromCharCode(e)})).join("")}))}return i},on.prototype.getTrackEvents=function(e){var t,n,r=[];if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=(n=Xt.createParser(this.tracks[e].getTrackContent(),0,!1)).next();do{r.push(t),t=n.next()}while(t);return r},on.prototype.setTrackEvents=function(e,t){var n,r;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");if(!t||!t.length)throw Error("A track must contain at least one event, none given.");n=Xt.getRequiredBufferLength(t),r=new Uint8Array(n),Xt.writeToTrack(t,r),this.tracks[e].setTrackContent(r)},on.prototype.deleteTrack=function(e){if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");this.tracks.splice(e,1),this.header.setTracksCount(this.tracks.length)},on.prototype.addTrack=function(e){var t;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=new Kt,e===this.tracks.length?this.tracks.push(t):this.tracks.splice(e,0,t),this.header.setTracksCount(this.tracks.length)},on.prototype.getContent=function(){var e,t,n,r,i,a,o,s,l;for(e=Yt.HEADER_LENGTH,r=0,i=this.tracks.length;r<i;r++)e+=this.tracks[r].getTrackLength()+8;for(t=new Uint8Array(e),n=new Uint8Array(this.header.datas.buffer,this.header.datas.byteOffset,Yt.HEADER_LENGTH),r=0,i=Yt.HEADER_LENGTH;r<i;r++)t[r]=n[r];for(a=0,o=this.tracks.length;a<o;a++)for(n=new Uint8Array(this.tracks[a].datas.buffer,this.tracks[a].datas.byteOffset,this.tracks[a].datas.byteLength),s=0,l=this.tracks[a].datas.byteLength;s<l;s++)t[r++]=n[s];return t.buffer},on.Header=Yt,on.Track=Kt;var sn=on;const ln="!@#$%^&*()QWERTYUIOPASDFGHJKLZXCBVNM";let cn=e=>{try{return"index"in e}catch{return!1}},dn=e=>{try{return!cn(e)}catch{return!0}};class un{constructor(e,t,n,r,i,a="keep",o="keep"){this.original=e,this.value=e,this.playTime=t,this.delta=i,this.char=pn[e-21],this.tempo=n,this.BPM=r,this.transposition=()=>this.value-this.original,this.valid=e>=21&&e<=108,this.outOfRange=e<=35||e>=97,ln.includes(this.char)?"Start"===a?this.displayValue=e-108:"End"==a&&(this.displayValue=e+108):this.outOfRange?"Start"===o?this.displayValue=e-1024:"End"==o?this.displayValue=e+1024:gn.includes(this.char)?this.displayValue=e-1024:this.displayValue=e+1024:this.displayValue=e}new_with_saved_original(e){let t=new un(e,this.playTime,this.tempo,this.BPM,this.delta,this.shifts,this.oors);return t.original=this.original,t}}class hn{constructor(e,t=!0,n=!0){let r=!1,i=e[0];this.classicChordOrder=t,this.sequentialQuantize=n;for(let t of e){if(t.playTime!=i.playTime){r=!0;break}i=t}if(this.is_quantized=r,r)r&&(this.notes=n?e:this.#e(e,t));else{let n=[],r=[];e.forEach((e=>{n.includes(e.value)||(n.push(e.value),r.push(e))})),this.notes=this.#e(r,t)}}transpose=(e,t=!1,n=!1)=>{t&&(e=this.notes[0].transposition()+e);let r=new hn(this.notes,this.classicChordOrder,this.sequentialQuantize);for(let t=0;t<r.notes.length;t++){let t=n?this:r,i=t.notes.map((t=>t.new_with_saved_original(t.original+e)));r=new hn(i,this.classicChordOrder,this.sequentialQuantize),t.notes=r.notes}return r};display=()=>{if(this.notes[0]?.char){if(1==this.notes.length)return this.notes[0].char;{let e=[];for(let t of this.notes)e.push(t.char??"?");return"["+e.join("")+"]"}}return"?"};#e(e,t){return t?this.#t(e):e.sort(((e,t)=>e.displayValue-t.displayValue))}#t(e){let t,n=[],r=[],i=[],a=[],o=[],s=[];e=e.sort(((e,t)=>e.value-t.value));for(const n of e)n.outOfRange?n.value-1024===n.displayValue?o.push(n):n.value+1024===n.displayValue&&s.push(n):(isNaN(n.char)?ln.includes(n.char)?i.push(n):a.push(n):r.push(n),t=n);return t&&(n=ln.includes(t.char)?[...r,...a,...i]:[...i,...r,...a]),[...o,...n,...s]}}function fn(e,t,n=undefined){const r=.5;let i=0;let a,o,s,l=t.quantize,c=t.pShifts,d=t.pOors,u=t.classicChordOrder,h=t.sequentialQuantize,f=t.bpm,p=[],m=[],g=f,w=4166.66*f;let b=0;e.forEach((e=>{if(81==e.subtype&&((f=e).tempo&&f.tempoBPM&&0!==f.tempo&&0!==f.tempoBPM)){if(w=e.tempo,g=e.tempoBPM,null==s)t.bpmChanges&&p.push({type:"comment",kind:"tempo",text:`Tempo: ${Math.round(e.tempoBPM)} BPM`});else if(null!=s&&s!=e.tempo&&o!=e.tempoBPM&&t.bpmChanges){let n=Math.round(e.tempoBPM),r=n<o?n:o,i=((n>o?n:o)-r)/r*100;if(i<t.minSpeedChange)return;p.push({type:"comment",kind:"tempo",text:`${Math.round(i)}% ${n>o?"faster":"slower"} - BPM changed to ${Math.round(e.tempoBPM)}`})}return o=e.tempoBPM,void(s=e.tempo)}var f;const _=e.param1,y=e.playTime,v=e.delta;if(!_)return;if(null==a&&(a=y),Math.abs(y-a)<l)m.push(new un(_,y,w,g,v,c,d)),a=y;else{if(0==m.length)return void(a=y);let e=new hn(m,u,h);e.index=b;let t=_n(n,b);t&&![0,void 0].includes(t?.notes?.[0].transposition())&&e.transpose(t.notes[0].transposition(),!1,!0),p.push(e),b++,m=[],m.push(new un(_,y,w,g,v,c,d)),a=y}const{doBreak:E,newPenalty:x}=function(e,n){if(!e)return!1;let i=e.tempo/1e3*t.beats,a=e.playTime-n;return a+r>=i?{doBreak:!0,newPenalty:n+a}:{doBreak:!1,newPenalty:n}}(m[0],i);i=x,E&&p.push({type:"break"})}));let _=new hn(m,u,h);_.index=b;let y=_n(n,b);return y&&![0,void 0].includes(y?.notes?.[0].transposition())&&_.transpose(y.notes[0].transposition(),!1,!0),p.push(_),b++,s||console.log(`No tempo found in sheet, set to ${g}/${w}`),p}const pn="1234567890qwert1!2@34$5%6^78*9(0qQwWeErtTyYuiIoOpPasSdDfgGhHjJklLzZxcCvVbBnmyuiopasdfghj",mn="1234567890qwertyuiopasdfghjklzxcvbnm",gn=mn.slice(0,15);function wn(e){let t=e.notes.filter((e=>!1===e.outOfRange&&!0===e.valid)),n=t.filter((e=>mn.includes(e.char))),r=t.filter((e=>!mn.includes(e.char)));return 2*t.length+Math.abs(r.length-n.length)}function bn(e,t,n=0,r=4){let i=e.map((e=>function(e,t,n=0,r=0){if(!e)return;if(dn(e))return n;let i=[n];e.notes.filter((e=>!1===e.outOfRange&&!0===e.valid)).length;let a=wn(e.transpose(n)),o=t=>{let n=wn(e.transpose(t));if(n>a)a=n,i=[t];else if(n==a){if(0==t&&i.includes(0))return n;i.push(t)}return n};for(let e=+n;e<=t;e++)o(+e),o(-e);return i}(e,t,n,r))),a=0,o=0,s=[];i=i.flat();for(let e of i){if(s.includes(e))continue;s.push(e);let t=i.filter((t=>t==e)),n=t.length;n>a+r/2&&(a=n,o=e)}return o}function _n(e,t){if(!e)return;let n=0,r=e.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);for(;i>=n&&!("index"in e[i]);)i--;if(i<n)n=Math.floor((n+r)/2)+1;else{if(e[i].index===t)return i;e[i].index<t?n=i+1:r=i-1}}}function yn(e,t,n){const r=e.slice();return r[22]=t[n],r}function vn(e){let t,n,i,a,o,p,g,w,b,y,T,S,A,C,N,I,M,z,D,R,U,O,$,F,L,V,B,H,j,Z,q,G,Y,W,Q,X,J,ee,te,ne,re,ie,ae,oe,se,le,ce,de,ue,he,fe,pe,me,ge,we,be,_e,ye,ve,Ee,xe,ke,Te,Se,Ae=e[0].resilience+"";function Ce(e,t){return e[2]?xn:En}let Ne=Ce(e),Ie=Ne(e),Me=1==e[0].missingTempo&&kn(e),ze=e[2]&&Tn(e),De=e[2]&&Sn(e),Re=e[0].oors&&e[0].tempoMarks&&Cn(e),Ue=K(e[3]),Oe=[];for(let t=0;t<Ue.length;t+=1)Oe[t]=Nn(yn(e,Ue,t));return{c(){t=u("hr"),n=f(),i=u("div"),a=u("div"),o=u("label"),o.textContent="Resilience (?):",p=f(),g=u("input"),w=f(),b=u("span"),y=h(Ae),T=f(),S=u("hr"),A=f(),C=u("div"),N=u("div"),I=u("label"),I.textContent="Place shifted notes at:",M=f(),z=u("select"),D=u("option"),D.textContent="Start",R=u("option"),R.textContent="End",$=f(),F=u("div"),L=u("label"),L.textContent="Place out of range notes at:",V=f(),B=u("select"),H=u("option"),H.textContent="Inorder",j=u("option"),j.textContent="Start",Z=u("option"),Z.textContent="End",q=f(),G=u("hr"),Y=f(),Ie.c(),W=f(),Me&&Me.c(),Q=f(),ze&&ze.c(),X=f(),J=u("label"),ee=u("input"),te=h("\n        Curly braces for quantized chords"),ne=f(),re=u("div"),ie=f(),ae=u("label"),oe=u("input"),se=h("\n        Include out of range (ctrl) notes"),le=f(),ce=u("label"),de=u("input"),ue=h("\n        Show tempo and out-of-range marks"),he=f(),De&&De.c(),fe=f(),Re&&Re.c(),pe=f(),me=u("hr"),ge=f(),we=u("div"),be=u("label"),be.textContent="Font:",_e=f(),ye=u("select");for(let e=0;e<Oe.length;e+=1)Oe[e].c();ve=f(),Ee=u("hr"),xe=f(),ke=u("style"),ke.textContent='* {\n        user-select: none;\n    }\n\n    label {\n        max-width: fit-content;\n        text-align: center;\n    }\n\n    .select-div {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        text-align: center;\n    }\n\n    select {\n        height: auto;\n        margin-left: 0.4em;\n        margin-top: 0.2em;\n        margin-bottom: 0;\n    }\n    \n    select option {\n        background: #2D2A32;\n    }\n\n    input[type="checkbox"] {\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    input[type="range"] {\n        margin-left: 0.4em;\n        margin-right: 0.4em;\n        margin-bottom: 0;\n    }\n\n    input[type="file"] {\n        margin-bottom: 0;\n    }\n\n    input[type="text"] {\n        margin-bottom: 0;\n    }\n    \n    .beats, .select-label, .tempo {\n        display: flex;\n        flex-direction: row;\n    }',_(t,"class","my-2 mx-1"),_(o,"class","flex flex-row items-center"),_(o,"title","Controls how much better a transposition should be than the previous transposition for line-based auto-transpose to act (higher = less transposing)"),_(o,"for","atleast"),_(g,"class","w-32"),_(g,"id","atleast"),_(g,"type","range"),_(g,"min","0"),_(g,"max","12"),x(b,"display","flex"),x(b,"align-items","center"),_(a,"class","flex flex-row mt-3"),_(i,"class","flex flex-col items-start align-middle"),_(S,"class","my-2 mx-1"),_(I,"for","shifts-position"),D.__value="Start",E(D,D.__value),R.__value="End",E(R,R.__value),z.disabled=U=e[0].classicChordOrder,_(z,"title",O=e[0].classicChordOrder?'Disable "Classic chord order" to customize this.':""),_(z,"name","shifts-position"),_(z,"id","shifts-position"),void 0===e[0].pShifts&&P((()=>e[5].call(z))),_(N,"class","select-div"),_(L,"for","oors-position"),H.__value="Inorder",E(H,H.__value),j.__value="Start",E(j,j.__value),Z.__value="End",E(Z,Z.__value),_(B,"name","oors-position"),_(B,"id","oors-position"),void 0===e[0].pOors&&P((()=>e[6].call(B))),_(F,"class","select-div"),_(G,"class","my-2 mx-1"),_(ee,"type","checkbox"),_(ee,"id","curly-quantizes"),_(J,"for","curly-quantizes"),_(oe,"type","checkbox"),_(oe,"id","out-of-range"),_(ae,"for","out-of-range"),_(de,"type","checkbox"),_(de,"id","tempo-checkbox"),_(ce,"for","tempo-checkbox"),_(me,"class","my-2 mx-1"),_(be,"for","font"),_(ye,"name","font"),_(ye,"id","font"),void 0===e[0].font&&P((()=>e[20].call(ye))),_(we,"class","select-div"),_(Ee,"class","my-2 mx-1")},m(r,c){l(r,t,c),l(r,n,c),l(r,i,c),s(i,a),s(a,o),s(a,p),s(a,g),E(g,e[0].resilience),s(a,w),s(a,b),s(b,y),l(r,T,c),l(r,S,c),l(r,A,c),l(r,C,c),s(C,N),s(N,I),s(N,M),s(N,z),s(z,D),s(z,R),k(z,e[0].pShifts,!0),s(C,$),s(C,F),s(F,L),s(F,V),s(F,B),s(B,H),s(B,j),s(B,Z),k(B,e[0].pOors,!0),s(C,q),s(C,G),s(C,Y),Ie.m(C,null),s(C,W),Me&&Me.m(C,null),s(C,Q),ze&&ze.m(C,null),s(C,X),s(C,J),s(J,ee),ee.checked=e[0].curlyQuantizes,s(J,te),s(C,ne),s(C,re),s(C,ie),s(C,ae),s(ae,oe),oe.checked=e[0].oors,s(ae,se),s(C,le),s(C,ce),s(ce,de),de.checked=e[0].tempoMarks,s(ce,ue),s(C,he),De&&De.m(C,null),s(C,fe),Re&&Re.m(C,null),s(C,pe),s(C,me),s(C,ge),s(C,we),s(we,be),s(we,_e),s(we,ye);for(let e=0;e<Oe.length;e+=1)Oe[e]&&Oe[e].m(ye,null);k(ye,e[0].font,!0),s(C,ve),s(C,Ee),l(r,xe,c),l(r,ke,c),Te||(Se=[m(g,"change",e[4]),m(g,"input",e[4]),m(z,"change",e[5]),m(B,"change",e[6]),m(ee,"change",e[13]),m(oe,"change",e[14]),m(de,"change",e[15]),m(ye,"change",e[20])],Te=!0)},p(e,t){if(1&t&&E(g,e[0].resilience),1&t&&Ae!==(Ae=e[0].resilience+"")&&v(y,Ae),1&t&&U!==(U=e[0].classicChordOrder)&&(z.disabled=U),1&t&&O!==(O=e[0].classicChordOrder?'Disable "Classic chord order" to customize this.':"")&&_(z,"title",O),1&t&&k(z,e[0].pShifts),1&t&&k(B,e[0].pOors),Ne===(Ne=Ce(e))&&Ie?Ie.p(e,t):(Ie.d(1),Ie=Ne(e),Ie&&(Ie.c(),Ie.m(C,W))),1==e[0].missingTempo?Me?Me.p(e,t):(Me=kn(e),Me.c(),Me.m(C,Q)):Me&&(Me.d(1),Me=null),e[2]?ze?ze.p(e,t):(ze=Tn(e),ze.c(),ze.m(C,X)):ze&&(ze.d(1),ze=null),1&t&&(ee.checked=e[0].curlyQuantizes),1&t&&(oe.checked=e[0].oors),1&t&&(de.checked=e[0].tempoMarks),e[2]?De?De.p(e,t):(De=Sn(e),De.c(),De.m(C,fe)):De&&(De.d(1),De=null),e[0].oors&&e[0].tempoMarks?Re?Re.p(e,t):(Re=Cn(e),Re.c(),Re.m(C,pe)):Re&&(Re.d(1),Re=null),8&t){let n;for(Ue=K(e[3]),n=0;n<Ue.length;n+=1){const r=yn(e,Ue,n);Oe[n]?Oe[n].p(r,t):(Oe[n]=Nn(r),Oe[n].c(),Oe[n].m(ye,null))}for(;n<Oe.length;n+=1)Oe[n].d(1);Oe.length=Ue.length}1&t&&k(ye,e[0].font)},d(e){e&&(c(t),c(n),c(i),c(T),c(S),c(A),c(C),c(xe),c(ke)),Ie.d(),Me&&Me.d(),ze&&ze.d(),De&&De.d(),Re&&Re.d(),d(Oe,e),Te=!1,r(Se)}}}function En(t){let n;return{c(){n=u("i"),n.textContent="Some settings are not available because the original MIDI data is missing."},m(e,t){l(e,n,t)},p:e,d(e){e&&c(n)}}}function xn(e){let t,n,i,a,o,d,p,g,w,b,y=1==e[0].beats?"1 beat":`${e[0].beats} beats`;return{c(){t=u("div"),n=u("label"),n.textContent="Break lines:",i=f(),a=u("input"),o=f(),d=u("span"),p=h("Every "),g=h(y),_(n,"class","slider-label"),_(n,"for","beats-for-newline"),_(a,"type","range"),_(a,"id","beats-for-newline"),_(a,"min","1"),_(a,"max","32"),_(t,"class","beats")},m(r,c){l(r,t,c),s(t,n),s(t,i),s(t,a),E(a,e[0].beats),s(t,o),s(t,d),s(d,p),s(d,g),w||(b=[m(a,"change",e[7]),m(a,"input",e[7])],w=!0)},p(e,t){1&t&&E(a,e[0].beats),1&t&&y!==(y=1==e[0].beats?"1 beat":`${e[0].beats} beats`)&&v(g,y)},d(e){e&&c(t),w=!1,r(b)}}}function kn(e){let t,n,i,a,o,d,h,p;return{c(){t=u("div"),n=u("label"),n.textContent="BPM (?):",i=f(),a=u("input"),o=f(),d=u("input"),_(n,"class","slider-label"),_(n,"for","tempo"),_(n,"title","You're able to change this because your MIDI file doesn't have tempo/BPM."),_(a,"type","range"),_(a,"id","tempo"),_(a,"min","1"),_(a,"max","300"),_(d,"type","number"),_(d,"class","w-16 box-border"),_(d,"min","1"),_(d,"max","300"),_(t,"class","tempo")},m(r,c){l(r,t,c),s(t,n),s(t,i),s(t,a),E(a,e[0].bpm),s(t,o),s(t,d),E(d,e[0].bpm),h||(p=[m(a,"change",e[8]),m(a,"input",e[8]),m(d,"input",e[9])],h=!0)},p(e,t){1&t&&E(a,e[0].bpm),1&t&&y(d.value)!==e[0].bpm&&E(d,e[0].bpm)},d(e){e&&c(t),h=!1,r(p)}}}function Tn(e){let t,n,i,a,o,d,p,g,w,b,y,x,k,T,S,A,C,N,I=e[0].quantize+"";return{c(){t=u("div"),n=u("label"),n.textContent="Quantize:",i=f(),a=u("input"),o=f(),d=u("span"),p=h(I),g=h(" miliseconds"),w=f(),b=u("label"),y=u("input"),x=h("\n            Classic chord order"),k=f(),T=u("label"),S=u("input"),A=h("\n            Sequential quantizes"),_(n,"class","slider-label"),_(n,"for","quantize-prompt"),_(a,"type","range"),_(a,"id","quantize-prompt"),_(a,"min","1"),_(a,"max","250"),_(t,"class","beats"),_(y,"type","checkbox"),_(y,"id","classic-chord-order"),_(b,"for","classic-chord-order"),_(S,"type","checkbox"),_(S,"id","order-quantizes"),_(T,"for","order-quantizes")},m(r,c){l(r,t,c),s(t,n),s(t,i),s(t,a),E(a,e[0].quantize),s(t,o),s(t,d),s(d,p),s(d,g),l(r,w,c),l(r,b,c),s(b,y),y.checked=e[0].classicChordOrder,s(b,x),l(r,k,c),l(r,T,c),s(T,S),S.checked=e[0].sequentialQuantize,s(T,A),C||(N=[m(a,"change",e[10]),m(a,"input",e[10]),m(y,"change",e[11]),m(S,"change",e[12])],C=!0)},p(e,t){1&t&&E(a,e[0].quantize),1&t&&I!==(I=e[0].quantize+"")&&v(p,I),1&t&&(y.checked=e[0].classicChordOrder),1&t&&(S.checked=e[0].sequentialQuantize)},d(e){e&&(c(t),c(w),c(b),c(k),c(T)),C=!1,r(N)}}}function Sn(e){let t,n,r,i,a,o,d,p=e[0].bpmChanges&&An(e);return{c(){t=u("label"),n=u("input"),r=h("\n            Show BPM changes as comments"),i=f(),a=u("div"),p&&p.c(),_(n,"type","checkbox"),_(n,"id","bpm-changes"),_(t,"for","bpm-changes"),_(a,"class","beats")},m(c,u){l(c,t,u),s(t,n),n.checked=e[0].bpmChanges,s(t,r),l(c,i,u),l(c,a,u),p&&p.m(a,null),o||(d=m(n,"change",e[16]),o=!0)},p(e,t){1&t&&(n.checked=e[0].bpmChanges),e[0].bpmChanges?p?p.p(e,t):(p=An(e),p.c(),p.m(a,null)):p&&(p.d(1),p=null)},d(e){e&&(c(t),c(i),c(a)),p&&p.d(),o=!1,d()}}}function An(e){let t,n,i,a,o,d,p,g,w,b,y=e[0].minSpeedChange+"";return{c(){t=u("label"),t.textContent="Min. % speed change:",n=f(),i=u("input"),a=f(),o=u("span"),d=h("At least "),p=h(y),g=h("%"),_(t,"class","slider-label"),_(t,"for","min-speed-change"),_(i,"type","range"),_(i,"id","min-speed-change"),_(i,"min","0"),_(i,"max","100")},m(r,c){l(r,t,c),l(r,n,c),l(r,i,c),E(i,e[0].minSpeedChange),l(r,a,c),l(r,o,c),s(o,d),s(o,p),s(o,g),w||(b=[m(i,"change",e[17]),m(i,"input",e[17])],w=!0)},p(e,t){1&t&&E(i,e[0].minSpeedChange),1&t&&y!==(y=e[0].minSpeedChange+"")&&v(p,y)},d(e){e&&(c(t),c(n),c(i),c(a),c(o)),w=!1,r(b)}}}function Cn(e){let t,n,i,a,o,d,h;return{c(){t=u("div"),n=u("label"),n.textContent="Out-of-range separator (?):",i=f(),a=u("div"),o=u("input"),_(n,"title","Helps tell you if notes are out-of-range, certain characters are restricted from use!"),_(n,"for","oor-separator"),_(o,"type","text"),_(o,"id","oor-separator"),x(a,"display","inline-flex")},m(r,c){l(r,t,c),s(t,n),s(t,i),s(t,a),s(a,o),E(o,e[0].oorSeparator),d||(h=[m(o,"input",e[18]),m(o,"input",e[19])],d=!0)},p(e,t){1&t&&o.value!==e[0].oorSeparator&&E(o,e[0].oorSeparator)},d(e){e&&c(t),d=!1,r(h)}}}function Nn(t){let n,r,i=t[22]+"";return{c(){n=u("option"),r=h(i),n.__value=t[22],E(n,n.__value)},m(e,t){l(e,n,t),s(n,r)},p:e,d(e){e&&c(n)}}}function In(t){let n,r=t[1]&&vn(t);return{c(){r&&r.c(),n=p()},m(e,t){r&&r.m(e,t),l(e,n,t)},p(e,[t]){e[1]?r?r.p(e,t):(r=vn(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&c(n),r&&r.d(e)}}}function Mn(e,t,n){I();let{show:r}=t,{hasMIDI:i=!1}=t,a=["Verdana","Tahoma","Dejavu Sans","Segoe UI","Helvetica","Lucida Console","Candara"],{settings:o={beats:4,quantize:35,classicChordOrder:!0,sequentialQuantize:!0,curlyQuantizes:!0,pShifts:"Start",pOors:"Inorder",oors:!0,tempoMarks:!1,bpmChanges:!0,minSpeedChange:10,oorSeparator:":",resilience:2,font:a[0],capturingImage:!1,missingTempo:!1,bpm:120}}=t;return e.$$set=e=>{"show"in e&&n(1,r=e.show),"hasMIDI"in e&&n(2,i=e.hasMIDI),"settings"in e&&n(0,o=e.settings)},[o,r,i,a,function(){o.resilience=y(this.value),n(0,o)},function(){o.pShifts=T(this),n(0,o)},function(){o.pOors=T(this),n(0,o)},function(){o.beats=y(this.value),n(0,o)},function(){o.bpm=y(this.value),n(0,o)},function(){o.bpm=y(this.value),n(0,o)},function(){o.quantize=y(this.value),n(0,o)},function(){o.classicChordOrder=this.checked,n(0,o)},function(){o.sequentialQuantize=this.checked,n(0,o)},function(){o.curlyQuantizes=this.checked,n(0,o)},function(){o.oors=this.checked,n(0,o)},function(){o.tempoMarks=this.checked,n(0,o)},function(){o.bpmChanges=this.checked,n(0,o)},function(){o.minSpeedChange=y(this.value),n(0,o)},function(){o.oorSeparator=this.value,n(0,o)},e=>{[null,"0","","    "," ","'","[","]","(",")","{","}","_","-",".",","].concat(pn.split("")).includes(e.data?.toLowerCase()??null)?n(0,o.oorSeparator=":",o):n(0,o.oorSeparator=e.data[0],o)},function(){o.font=T(this),n(0,o)}]}class zn extends re{constructor(e){super(),ne(this,e,Mn,In,a,{show:1,hasMIDI:2,settings:0})}}function Dn(t){let n,r,i,a,o,d,p,g,w,b,y,E,k,T=t[1].getTrackLength()+"";return{c(){n=u("div"),r=u("input"),a=f(),o=u("label"),d=h("Track "),p=h(t[2]),g=h(" ("),w=h(T),b=h(" events)"),_(r,"id",i="trackbox"+t[2]),_(r,"type","checkbox"),x(r,"transform","scale(1.5)"),_(o,"for",y="trackbox"+t[2]),_(o,"class","mx-2"),_(n,"id","track"),_(n,"class","flex flex-row align-middle")},m(e,i){l(e,n,i),s(n,r),r.checked=t[0],s(n,a),s(n,o),s(o,d),s(o,p),s(o,g),s(o,w),s(o,b),E||(k=m(r,"change",t[3]),E=!0)},p(e,[t]){4&t&&i!==(i="trackbox"+e[2])&&_(r,"id",i),1&t&&(r.checked=e[0]),4&t&&v(p,e[2]),2&t&&T!==(T=e[1].getTrackLength()+"")&&v(w,T),4&t&&y!==(y="trackbox"+e[2])&&_(o,"for",y)},i:e,o:e,d(e){e&&c(n),E=!1,k()}}}function Rn(e,t,n){let{track:r,idx:i}=t,{selected:a=!1}=t;return e.$$set=e=>{"track"in e&&n(1,r=e.track),"idx"in e&&n(2,i=e.idx),"selected"in e&&n(0,a=e.selected)},[a,r,i,function(){a=this.checked,n(0,a)}]}class Un extends re{constructor(e){super(),ne(this,e,Rn,Dn,a,{track:1,idx:2,selected:0})}}const On={long:"white",quadruple:"#a3f0a3",whole:"#74da74",half:"#9ada5a",quarter:"#c0c05a",eighth:"#da7e5a",sixteenth:"#daa6a6",thirtysecond:"#ff1900",sixtyfourth:"#9c0f00"};function $n(e,t,n,r){let i,a=e?.notes?.[0],o=t?.notes?.[0];if(!a)return"";let s=0,l=0;o?(s=a.tempo/1e3,l=o?.playTime-a.playTime-.5,i=function(e,t){t-=.5;let n=On.long;return t<e/16?n=On.sixtyfourth:t<e/8?n=On.thirtysecond:t<e/4?n=On.sixteenth:t<e/2?n=On.eighth:t<e?n=On.quarter:t<2*e?n=On.half:t<4*e?n=On.whole:t<8*e?n=On.quadruple:t<16*e&&(n=On.long),n}(s,l)):i=On.long;let c=`<span style="color:${i}; ${r?"background-color: rgba(97, 97, 97, 50);":""}">`,d=e.notes.length>1&&e.notes.find((e=>!0===e.valid));!1===n.oors&&e.notes.filter((e=>!1===e.outOfRange)).length<=1&&(d=!1),d&&(e.is_quantized&&!0===n.curlyQuantizes?c+="{":c+="[");for(const t of e.notes){if(!t.valid){c+="_";continue}let r=!0===t.outOfRange&&!0===n.oors;if(!0===r){let r=e.notes.filter((e=>!1===e.outOfRange)),a=e.notes.filter((e=>!0===e.outOfRange&&e.displayValue===e.value-1024)),o=e.notes.filter((e=>!0===e.outOfRange&&e.displayValue===e.value+1024));const s=t===a[0],l=t===a[a.length-1],u=!d&&t===o[0],h=d&&0===r.length&&0===a.length&&t===o[0],f=d&&r.length>0&&t===o[0];(s||u||h||f)&&(n.tempoMarks?c+=`<span style="border-bottom: 2px solid ${i}; font-weight:900;">${n.oorSeparator}${t.char}</span>`:n.tempoMarks||(c+=`<span style="border-bottom: 2px solid ${i}; font-weight:900">${t.char}</span>`)),n.tempoMarks&&l&&r.length>0&&(c+="'")}else r||t.outOfRange||(c+=t.char)}return d&&(e.is_quantized&&!0===n.curlyQuantizes?c+="}":c+="]"),c+=n.tempoMarks?function(e,t,n={}){return`<span style="color:${t};${n.underline?`border-bottom:2px solid ${t}`:""}">${e}</span>`}(function(e,t){return t<e/4?"-":t<e/2?" ":t<e?" - ":t<2*e?", ":t<3*e?"... ":t<4*e?".... ":"...... "}(s??void 0,l),i):" ",c+"</span>"}function Pn(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}function Fn(t){let n,i,a,o=$n(t[1],t[2],t[4],t[3])+"";return{c(){n=u("span"),_(n,"class","chord-block svelte-gpk658")},m(e,r){l(e,n,r),n.innerHTML=o,i||(a=[m(n,"contextmenu",g(t[6])),m(n,"mousedown",w(t[7]))],i=!0)},p(e,[t]){30&t&&o!==(o=$n(e[1],e[2],e[4],e[3])+"")&&(n.innerHTML=o)},i:e,o:e,d(e){e&&c(n),i=!1,r(a)}}}function Ln(e,t,n){const r=I();let{index:i}=t,{chord:a}=t,{next:o}=t,{selected:s}=t,{settings:l}=t;return e.$$set=e=>{"index"in e&&n(0,i=e.index),"chord"in e&&n(1,a=e.chord),"next"in e&&n(2,o=e.next),"selected"in e&&n(3,s=e.selected),"settings"in e&&n(4,l=e.settings)},[i,a,o,s,l,r,function(t){M.call(this,e,t)},e=>{switch(e.button){case 0:r("select",{index:+i,by:-1});break;case 1:e.preventDefault();break;case 2:r("select",{index:+i,by:1}),e.preventDefault()}}]}Pn(".chord-block.svelte-gpk658{all:unset}.chord-block.svelte-gpk658:hover{background-color:#3d3a42;cursor:pointer}.chord-block.svelte-gpk658:active{all:unset}");class Vn extends re{constructor(e){super(),ne(this,e,Ln,Fn,a,{index:0,chord:1,next:2,selected:3,settings:4})}}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function Bn(e){let t=e.length;for(;--t>=0;)e[t]=0}const Hn=256,jn=286,Zn=30,qn=15,Gn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Yn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Wn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Kn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qn=new Array(576);Bn(Qn);const Xn=new Array(60);Bn(Xn);const Jn=new Array(512);Bn(Jn);const er=new Array(256);Bn(er);const tr=new Array(29);Bn(tr);const nr=new Array(Zn);function rr(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let ir,ar,or;function sr(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Bn(nr);const lr=e=>e<256?Jn[e]:Jn[256+(e>>>7)],cr=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},dr=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,cr(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ur=(e,t,n)=>{dr(e,n[2*t],n[2*t+1])},hr=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},fr=(e,t,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=qn;i++)o=o+n[i-1]<<1,r[i]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=hr(r[t]++,t))}},pr=e=>{let t;for(t=0;t<jn;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Zn;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},mr=e=>{e.bi_valid>8?cr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},gr=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},wr=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&gr(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!gr(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},br=(e,t,n)=>{let r,i,a,o,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?ur(e,i,t):(a=er[i],ur(e,a+Hn+1,t),o=Gn[a],0!==o&&(i-=tr[a],dr(e,i,o)),r--,a=lr(r),ur(e,a,n),o=Yn[a],0!==o&&(r-=nr[a],dr(e,r,o)))}while(s<e.sym_next);ur(e,256,t)},_r=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)wr(e,n,o);l=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],wr(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,wr(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,h,f,p,m=0;for(h=0;h<=qn;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],h=n[2*n[2*d+1]+1]+1,h>l&&(h=l,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,f=0,d>=s&&(f=o[d-s]),p=n[2*d],e.opt_len+=p*(h+f),a&&(e.static_len+=p*(i[2*d+1]+f)));if(0!==m){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--c],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),fr(n,c,e.bl_count)},yr=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},vr=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{ur(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(ur(e,i,e.bl_tree),s--),ur(e,16,e.bl_tree),dr(e,s-3,2)):s<=10?(ur(e,17,e.bl_tree),dr(e,s-3,3)):(ur(e,18,e.bl_tree),dr(e,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}};let Er=!1;const xr=(e,t,n,r)=>{dr(e,0+(r?1:0),3),mr(e),cr(e,n),cr(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var kr=(e,t,n,r)=>{let i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Hn;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),_r(e,e.l_desc),_r(e,e.d_desc),o=(e=>{let t;for(yr(e,e.dyn_ltree,e.l_desc.max_code),yr(e,e.dyn_dtree,e.d_desc.max_code),_r(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Kn[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?xr(e,t,n,r):4===e.strategy||a===i?(dr(e,2+(r?1:0),3),br(e,Qn,Xn)):(dr(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(dr(e,t-257,5),dr(e,n-1,5),dr(e,r-4,4),i=0;i<r;i++)dr(e,e.bl_tree[2*Kn[i]+1],3);vr(e,e.dyn_ltree,t-1),vr(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),br(e,e.dyn_ltree,e.dyn_dtree)),pr(e),r&&mr(e)},Tr={_tr_init:e=>{Er||((()=>{let e,t,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for(tr[r]=n,e=0;e<1<<Gn[r];e++)er[n++]=r;for(er[n-1]=r,i=0,r=0;r<16;r++)for(nr[r]=i,e=0;e<1<<Yn[r];e++)Jn[i++]=r;for(i>>=7;r<Zn;r++)for(nr[r]=i<<7,e=0;e<1<<Yn[r]-7;e++)Jn[256+i++]=r;for(t=0;t<=qn;t++)a[t]=0;for(e=0;e<=143;)Qn[2*e+1]=8,e++,a[8]++;for(;e<=255;)Qn[2*e+1]=9,e++,a[9]++;for(;e<=279;)Qn[2*e+1]=7,e++,a[7]++;for(;e<=287;)Qn[2*e+1]=8,e++,a[8]++;for(fr(Qn,287,a),e=0;e<Zn;e++)Xn[2*e+1]=5,Xn[2*e]=hr(e,5);ir=new rr(Qn,Gn,257,jn,qn),ar=new rr(Xn,Yn,0,Zn,qn),or=new rr(new Array(0),Wn,0,19,7)})(),Er=!0),e.l_desc=new sr(e.dyn_ltree,ir),e.d_desc=new sr(e.dyn_dtree,ar),e.bl_desc=new sr(e.bl_tree,or),e.bi_buf=0,e.bi_valid=0,pr(e)},_tr_stored_block:xr,_tr_flush_block:kr,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(er[n]+Hn+1)]++,e.dyn_dtree[2*lr(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{dr(e,2,3),ur(e,256,Qn),(e=>{16===e.bi_valid?(cr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Sr=(e,t,n,r)=>{let i=65535&e|0,a=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};const Ar=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Cr=(e,t,n,r)=>{const i=Ar,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return-1^e},Nr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ir={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Mr,_tr_stored_block:zr,_tr_flush_block:Dr,_tr_tally:Rr,_tr_align:Ur}=Tr,{Z_NO_FLUSH:Or,Z_PARTIAL_FLUSH:$r,Z_FULL_FLUSH:Pr,Z_FINISH:Fr,Z_BLOCK:Lr,Z_OK:Vr,Z_STREAM_END:Br,Z_STREAM_ERROR:Hr,Z_DATA_ERROR:jr,Z_BUF_ERROR:Zr,Z_DEFAULT_COMPRESSION:qr,Z_FILTERED:Gr,Z_HUFFMAN_ONLY:Yr,Z_RLE:Wr,Z_FIXED:Kr,Z_DEFAULT_STRATEGY:Qr,Z_UNKNOWN:Xr,Z_DEFLATED:Jr}=Ir,ei=286,ti=30,ni=19,ri=2*ei+1,ii=15,ai=258,oi=262,si=42,li=113,ci=666,di=(e,t)=>(e.msg=Nr[t],t),ui=e=>2*e-(e>4?9:0),hi=e=>{let t=e.length;for(;--t>=0;)e[t]=0},fi=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let pi=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const mi=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},gi=(e,t)=>{Dr(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,mi(e.strm)},wi=(e,t)=>{e.pending_buf[e.pending++]=t},bi=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},_i=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Sr(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Cr(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},yi=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-oi?e.strstart-(e.w_size-oi):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+ai;let f=c[a+o-1],p=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+o]===p&&c[n+o-1]===f&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(r=ai-(h-a),a=h-ai,r>o){if(e.match_start=t,o=r,r>=s)break;f=c[a+o-1],p=c[a+o]}}}while((t=u[t&d])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},vi=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-oi)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),fi(e),r+=t),0===e.strm.avail_in)break;if(n=_i(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=pi(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=pi(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<oi&&0!==e.strm.avail_in)},Ei=(e,t)=>{let n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==Fr||t===Or||n!==r+e.strm.avail_in))break;o=t===Fr&&n===r+e.strm.avail_in?1:0,zr(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,mi(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(_i(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Or&&t!==Fr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(_i(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||t===Fr)&&t!==Or&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Fr&&0===e.strm.avail_in&&n===r?1:0,zr(e,e.block_start,n,o),e.block_start+=n,mi(e.strm)),o?3:1)},xi=(e,t)=>{let n,r;for(;;){if(e.lookahead<oi){if(vi(e),e.lookahead<oi&&t===Or)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=pi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-oi&&(e.match_length=yi(e,n)),e.match_length>=3)if(r=Rr(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=pi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=pi(e,e.ins_h,e.window[e.strstart+1]);else r=Rr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(gi(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Fr?(gi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(gi(e,!1),0===e.strm.avail_out)?1:2},ki=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<oi){if(vi(e),e.lookahead<oi&&t===Or)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=pi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-oi&&(e.match_length=yi(e,n),e.match_length<=5&&(e.strategy===Gr||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Rr(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=pi(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(gi(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Rr(e,0,e.window[e.strstart-1]),r&&gi(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Rr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Fr?(gi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(gi(e,!1),0===e.strm.avail_out)?1:2};function Ti(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Si=[new Ti(0,0,0,0,Ei),new Ti(4,4,8,4,xi),new Ti(4,5,16,8,xi),new Ti(4,6,32,32,xi),new Ti(4,4,16,16,ki),new Ti(8,16,32,32,ki),new Ti(8,16,128,128,ki),new Ti(8,32,128,256,ki),new Ti(32,128,258,1024,ki),new Ti(32,258,258,4096,ki)];function Ai(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Jr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ri),this.dyn_dtree=new Uint16Array(2*(2*ti+1)),this.bl_tree=new Uint16Array(2*(2*ni+1)),hi(this.dyn_ltree),hi(this.dyn_dtree),hi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ii+1),this.heap=new Uint16Array(2*ei+1),hi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ei+1),hi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ci=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==si&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==li&&t.status!==ci?1:0},Ni=e=>{if(Ci(e))return di(e,Hr);e.total_in=e.total_out=0,e.data_type=Xr;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?si:li,e.adler=2===t.wrap?0:1,t.last_flush=-2,Mr(t),Vr},Ii=e=>{const t=Ni(e);var n;return t===Vr&&((n=e.state).window_size=2*n.w_size,hi(n.head),n.max_lazy_match=Si[n.level].max_lazy,n.good_match=Si[n.level].good_length,n.nice_match=Si[n.level].nice_length,n.max_chain_length=Si[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Mi=(e,t,n,r,i,a)=>{if(!e)return Hr;let o=1;if(t===qr&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Jr||r<8||r>15||t<0||t>9||a<0||a>Kr||8===r&&1!==o)return di(e,Hr);8===r&&(r=9);const s=new Ai;return e.state=s,s.strm=e,s.status=si,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=n,Ii(e)};var zi=(e,t)=>{if(Ci(e)||t>Lr||t<0)return e?di(e,Hr):Hr;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===ci&&t!==Fr)return di(e,0===e.avail_out?Zr:Hr);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(mi(e),0===e.avail_out)return n.last_flush=-1,Vr}else if(0===e.avail_in&&ui(t)<=ui(r)&&t!==Fr)return di(e,Zr);if(n.status===ci&&0!==e.avail_in)return di(e,Zr);if(n.status===si&&0===n.wrap&&(n.status=li),n.status===si){let t=Jr+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Yr||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,bi(n,t),0!==n.strstart&&(bi(n,e.adler>>>16),bi(n,65535&e.adler)),e.adler=1,n.status=li,mi(e),0!==n.pending)return n.last_flush=-1,Vr}if(57===n.status)if(e.adler=0,wi(n,31),wi(n,139),wi(n,8),n.gzhead)wi(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),wi(n,255&n.gzhead.time),wi(n,n.gzhead.time>>8&255),wi(n,n.gzhead.time>>16&255),wi(n,n.gzhead.time>>24&255),wi(n,9===n.level?2:n.strategy>=Yr||n.level<2?4:0),wi(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(wi(n,255&n.gzhead.extra.length),wi(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Cr(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(wi(n,0),wi(n,0),wi(n,0),wi(n,0),wi(n,0),wi(n,9===n.level?2:n.strategy>=Yr||n.level<2?4:0),wi(n,3),n.status=li,mi(e),0!==n.pending)return n.last_flush=-1,Vr;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Cr(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,mi(e),0!==n.pending)return n.last_flush=-1,Vr;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Cr(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Cr(e.adler,n.pending_buf,n.pending-r,r)),mi(e),0!==n.pending)return n.last_flush=-1,Vr;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,wi(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Cr(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Cr(e.adler,n.pending_buf,n.pending-r,r)),mi(e),0!==n.pending)return n.last_flush=-1,Vr;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,wi(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Cr(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(mi(e),0!==n.pending))return n.last_flush=-1,Vr;wi(n,255&e.adler),wi(n,e.adler>>8&255),e.adler=0}if(n.status=li,mi(e),0!==n.pending)return n.last_flush=-1,Vr}if(0!==e.avail_in||0!==n.lookahead||t!==Or&&n.status!==ci){let r=0===n.level?Ei(n,t):n.strategy===Yr?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(vi(e),0===e.lookahead)){if(t===Or)return 1;break}if(e.match_length=0,n=Rr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(gi(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fr?(gi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(gi(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Wr?((e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=ai){if(vi(e),e.lookahead<=ai&&t===Or)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+ai;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=ai-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Rr(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Rr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(gi(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fr?(gi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(gi(e,!1),0===e.strm.avail_out)?1:2})(n,t):Si[n.level].func(n,t);if(3!==r&&4!==r||(n.status=ci),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Vr;if(2===r&&(t===$r?Ur(n):t!==Lr&&(zr(n,0,0,!1),t===Pr&&(hi(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),mi(e),0===e.avail_out))return n.last_flush=-1,Vr}return t!==Fr?Vr:n.wrap<=0?Br:(2===n.wrap?(wi(n,255&e.adler),wi(n,e.adler>>8&255),wi(n,e.adler>>16&255),wi(n,e.adler>>24&255),wi(n,255&e.total_in),wi(n,e.total_in>>8&255),wi(n,e.total_in>>16&255),wi(n,e.total_in>>24&255)):(bi(n,e.adler>>>16),bi(n,65535&e.adler)),mi(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Vr:Br)},Di={deflateInit:(e,t)=>Mi(e,t,Jr,15,8,Qr),deflateInit2:Mi,deflateReset:Ii,deflateResetKeep:Ni,deflateSetHeader:(e,t)=>Ci(e)||2!==e.state.wrap?Hr:(e.state.gzhead=t,Vr),deflate:zi,deflateEnd:e=>{if(Ci(e))return Hr;const t=e.state.status;return e.state=null,t===li?di(e,jr):Vr},deflateSetDictionary:(e,t)=>{let n=t.length;if(Ci(e))return Hr;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==si||r.lookahead)return Hr;if(1===i&&(e.adler=Sr(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(hi(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,vi(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=pi(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,vi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Vr},deflateInfo:"pako deflate (from Nodeca project)"};const Ri=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ui={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Ri(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}};let Oi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Oi=!1}const $i=new Uint8Array(256);for(let e=0;e<256;e++)$i[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;$i[254]=$i[254]=1;var Pi={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=$i[t];if(o>4)a[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Oi)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+$i[e[n]]>t?n:t}};var Fi=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Li=Object.prototype.toString,{Z_NO_FLUSH:Vi,Z_SYNC_FLUSH:Bi,Z_FULL_FLUSH:Hi,Z_FINISH:ji,Z_OK:Zi,Z_STREAM_END:qi,Z_DEFAULT_COMPRESSION:Gi,Z_DEFAULT_STRATEGY:Yi,Z_DEFLATED:Wi}=Ir;function Ki(e){this.options=Ui.assign({level:Gi,method:Wi,chunkSize:16384,windowBits:15,memLevel:8,strategy:Yi},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Fi,this.strm.avail_out=0;let n=Di.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Zi)throw new Error(Nr[n]);if(t.header&&Di.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Pi.string2buf(t.dictionary):"[object ArrayBuffer]"===Li.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Di.deflateSetDictionary(this.strm,e),n!==Zi)throw new Error(Nr[n]);this._dict_set=!0}}function Qi(e,t){const n=new Ki(t);if(n.push(e,!0),n.err)throw n.msg||Nr[n.err];return n.result}Ki.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?ji:Vi,"string"==typeof e?n.input=Pi.string2buf(e):"[object ArrayBuffer]"===Li.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Bi||a===Hi)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Di.deflate(n,a),i===qi)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Di.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Zi;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Ki.prototype.onData=function(e){this.chunks.push(e)},Ki.prototype.onEnd=function(e){e===Zi&&(this.result=Ui.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Xi={Deflate:Ki,deflate:Qi,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Qi(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Qi(e,t)},constants:Ir};const Ji=16209;var ea=function(e,t){let n,r,i,a,o,s,l,c,d,u,h,f,p,m,g,w,b,_,y,v,E,x,k,T;const S=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=S.dmax,l=S.wsize,c=S.whave,d=S.wnext,u=S.window,h=S.hold,f=S.bits,p=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,w=(1<<S.distbits)-1;e:do{f<15&&(h+=k[n++]<<f,f+=8,h+=k[n++]<<f,f+=8),b=p[h&g];t:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,0===_)T[i++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=p[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=Ji;break e}y=65535&b,_&=15,_&&(f<_&&(h+=k[n++]<<f,f+=8),y+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=k[n++]<<f,f+=8,h+=k[n++]<<f,f+=8),b=m[h&w];n:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,!(16&_)){if(0==(64&_)){b=m[(65535&b)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",S.mode=Ji;break e}if(v=65535&b,_&=15,f<_&&(h+=k[n++]<<f,f+=8,f<_&&(h+=k[n++]<<f,f+=8)),v+=h&(1<<_)-1,v>s){e.msg="invalid distance too far back",S.mode=Ji;break e}if(h>>>=_,f-=_,_=i-a,v>_){if(_=v-_,_>c&&S.sane){e.msg="invalid distance too far back",S.mode=Ji;break e}if(E=0,x=u,0===d){if(E+=l-_,_<y){y-=_;do{T[i++]=u[E++]}while(--_);E=i-v,x=T}}else if(d<_){if(E+=l+d-_,_-=d,_<y){y-=_;do{T[i++]=u[E++]}while(--_);if(E=0,d<y){_=d,y-=_;do{T[i++]=u[E++]}while(--_);E=i-v,x=T}}}else if(E+=d-_,_<y){y-=_;do{T[i++]=u[E++]}while(--_);E=i-v,x=T}for(;y>2;)T[i++]=x[E++],T[i++]=x[E++],T[i++]=x[E++],y-=3;y&&(T[i++]=x[E++],y>1&&(T[i++]=x[E++]))}else{E=i-v;do{T[i++]=T[E++],T[i++]=T[E++],T[i++]=T[E++],y-=3}while(y>2);y&&(T[i++]=T[E++],y>1&&(T[i++]=T[E++]))}break}}break}}while(n<r&&i<o);y=f>>3,n-=y,f-=y<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),S.hold=h,S.bits=f};const ta=15,na=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ra=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ia=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),aa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var oa=(e,t,n,r,i,a,o,s)=>{const l=s.bits;let c,d,u,h,f,p,m=0,g=0,w=0,b=0,_=0,y=0,v=0,E=0,x=0,k=0,T=null;const S=new Uint16Array(16),A=new Uint16Array(16);let C,N,I,M=null;for(m=0;m<=ta;m++)S[m]=0;for(g=0;g<r;g++)S[t[n+g]]++;for(_=l,b=ta;b>=1&&0===S[b];b--);if(_>b&&(_=b),0===b)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(w=1;w<b&&0===S[w];w++);for(_<w&&(_=w),E=1,m=1;m<=ta;m++)if(E<<=1,E-=S[m],E<0)return-1;if(E>0&&(0===e||1!==b))return-1;for(A[1]=0,m=1;m<ta;m++)A[m+1]=A[m]+S[m];for(g=0;g<r;g++)0!==t[n+g]&&(o[A[t[n+g]]++]=g);if(0===e?(T=M=o,p=20):1===e?(T=na,M=ra,p=257):(T=ia,M=aa,p=0),k=0,g=0,m=w,f=a,y=_,v=0,u=-1,x=1<<_,h=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){C=m-v,o[g]+1<p?(N=0,I=o[g]):o[g]>=p?(N=M[o[g]-p],I=T[o[g]-p]):(N=96,I=0),c=1<<m-v,d=1<<y,w=d;do{d-=c,i[f+(k>>v)+d]=C<<24|N<<16|I|0}while(0!==d);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,g++,0==--S[m]){if(m===b)break;m=t[n+o[g]]}if(m>_&&(k&h)!==u){for(0===v&&(v=_),f+=w,y=m-v,E=1<<y;y+v<b&&(E-=S[y+v],!(E<=0));)y++,E<<=1;if(x+=1<<y,1===e&&x>852||2===e&&x>592)return 1;u=k&h,i[u]=_<<24|y<<16|f-a|0}}return 0!==k&&(i[f+k]=m-v<<24|64<<16|0),s.bits=_,0};const{Z_FINISH:sa,Z_BLOCK:la,Z_TREES:ca,Z_OK:da,Z_STREAM_END:ua,Z_NEED_DICT:ha,Z_STREAM_ERROR:fa,Z_DATA_ERROR:pa,Z_MEM_ERROR:ma,Z_BUF_ERROR:ga,Z_DEFLATED:wa}=Ir,ba=16180,_a=16190,ya=16191,va=16192,Ea=16194,xa=16199,ka=16200,Ta=16206,Sa=16209,Aa=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Ca(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Na=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ba||t.mode>16211?1:0},Ia=e=>{if(Na(e))return fa;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ba,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,da},Ma=e=>{if(Na(e))return fa;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ia(e)},za=(e,t)=>{let n;if(Na(e))return fa;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?fa:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Ma(e))},Da=(e,t)=>{if(!e)return fa;const n=new Ca;e.state=n,n.strm=e,n.window=null,n.mode=ba;const r=za(e,t);return r!==da&&(e.state=null),r};let Ra,Ua,Oa=!0;const $a=e=>{if(Oa){Ra=new Int32Array(512),Ua=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(oa(1,e.lens,0,288,Ra,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;oa(2,e.lens,0,32,Ua,0,e.work,{bits:5}),Oa=!1}e.lencode=Ra,e.lenbits=9,e.distcode=Ua,e.distbits=5},Pa=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Fa=(e,t)=>{let n,r,i,a,o,s,l,c,d,u,h,f,p,m,g,w,b,_,y,v,E,x,k=0;const T=new Uint8Array(4);let S,A;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Na(e)||!e.output||!e.input&&0!==e.avail_in)return fa;n=e.state,n.mode===ya&&(n.mode=va),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,d=n.bits,u=s,h=l,x=da;e:for(;;)switch(n.mode){case ba:if(0===n.wrap){n.mode=va;break}for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=Cr(n.check,T,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Sa;break}if((15&c)!==wa){e.msg="unknown compression method",n.mode=Sa;break}if(c>>>=4,d-=4,E=8+(15&c),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=Sa;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:ya,c=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==wa){e.msg="unknown compression method",n.mode=Sa;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Sa;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Cr(n.check,T,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=Cr(n.check,T,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Cr(n.check,T,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Cr(n.check,T,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>s&&(f=s),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),E)),512&n.flags&&4&n.wrap&&(n.check=Cr(n.check,r,f,a)),s-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;f=0;do{E=r[a+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Cr(n.check,r,f,a)),s-=f,a+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;f=0;do{E=r[a+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Cr(n.check,r,f,a)),s-=f,a+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Sa;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ya;break;case 16189:for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}e.adler=n.check=Aa(c),c=0,d=0,n.mode=_a;case _a:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,ha;e.adler=n.check=1,n.mode=ya;case ya:if(t===la||t===ca)break e;case va:if(n.last){c>>>=7&d,d-=7&d,n.mode=Ta;break}for(;d<3;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if($a(n),n.mode=xa,t===ca){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Sa}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Sa;break}if(n.length=65535&c,c=0,d=0,n.mode=Ea,t===ca)break e;case Ea:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;i.set(r.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,n.length-=f;break}n.mode=ya;break;case 16196:for(;d<14;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Sa;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.lens[C[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},x=oa(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,x){e.msg="invalid code lengths set",n.mode=Sa;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,w=k>>>16&255,b=65535&k,!(g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(b<16)c>>>=g,d-=g,n.lens[n.have++]=b;else{if(16===b){for(A=g+2;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(c>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=Sa;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===b){for(A=g+3;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,E=0,f=3+(7&c),c>>>=3,d-=3}else{for(A=g+7;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,E=0,f=11+(127&c),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Sa;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===Sa)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Sa;break}if(n.lenbits=9,S={bits:n.lenbits},x=oa(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,x){e.msg="invalid literal/lengths set",n.mode=Sa;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},x=oa(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,x){e.msg="invalid distances set",n.mode=Sa;break}if(n.mode=xa,t===ca)break e;case xa:n.mode=ka;case ka:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,ea(e,h),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,d=n.bits,n.mode===ya&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,w=k>>>16&255,b=65535&k,!(g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(w&&0==(240&w)){for(_=g,y=w,v=b;k=n.lencode[v+((c&(1<<_+y)-1)>>_)],g=k>>>24,w=k>>>16&255,b=65535&k,!(_+g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=_,d-=_,n.back+=_}if(c>>>=g,d-=g,n.back+=g,n.length=b,0===w){n.mode=16205;break}if(32&w){n.back=-1,n.mode=ya;break}if(64&w){e.msg="invalid literal/length code",n.mode=Sa;break}n.extra=15&w,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;k=n.distcode[c&(1<<n.distbits)-1],g=k>>>24,w=k>>>16&255,b=65535&k,!(g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(0==(240&w)){for(_=g,y=w,v=b;k=n.distcode[v+((c&(1<<_+y)-1)>>_)],g=k>>>24,w=k>>>16&255,b=65535&k,!(_+g<=d);){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}c>>>=_,d-=_,n.back+=_}if(c>>>=g,d-=g,n.back+=g,64&w){e.msg="invalid distance code",n.mode=Sa;break}n.offset=b,n.extra=15&w,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;d<A;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Sa;break}n.mode=16204;case 16204:if(0===l)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Sa;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[o++]=m[p++]}while(--f);0===n.length&&(n.mode=ka);break;case 16205:if(0===l)break e;i[o++]=n.length,l--,n.mode=ka;break;case Ta:if(n.wrap){for(;d<32;){if(0===s)break e;s--,c|=r[a++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Cr(n.check,i,h,o-h):Sr(n.check,i,h,o-h)),h=l,4&n.wrap&&(n.flags?c:Aa(c))!==n.check){e.msg="incorrect data check",n.mode=Sa;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break e;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Sa;break}c=0,d=0}n.mode=16208;case 16208:x=ua;break e;case Sa:x=pa;break e;case 16210:return ma;default:return fa}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<Sa&&(n.mode<Ta||t!==sa))&&Pa(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Cr(n.check,i,h,e.next_out-h):Sr(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ya?128:0)+(n.mode===xa||n.mode===Ea?256:0),(0===u&&0===h||t===sa)&&x===da&&(x=ga),x},La={inflateReset:Ma,inflateReset2:za,inflateResetKeep:Ia,inflateInit:e=>Da(e,15),inflateInit2:Da,inflate:Fa,inflateEnd:e=>{if(Na(e))return fa;let t=e.state;return t.window&&(t.window=null),e.state=null,da},inflateGetHeader:(e,t)=>{if(Na(e))return fa;const n=e.state;return 0==(2&n.wrap)?fa:(n.head=t,t.done=!1,da)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return Na(e)?fa:(r=e.state,0!==r.wrap&&r.mode!==_a?fa:r.mode===_a&&(i=1,i=Sr(i,t,n,0),i!==r.check)?pa:(a=Pa(e,t,n,n),a?(r.mode=16210,ma):(r.havedict=1,da)))},inflateInfo:"pako inflate (from Nodeca project)"};var Va=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ba=Object.prototype.toString,{Z_NO_FLUSH:Ha,Z_FINISH:ja,Z_OK:Za,Z_STREAM_END:qa,Z_NEED_DICT:Ga,Z_STREAM_ERROR:Ya,Z_DATA_ERROR:Wa,Z_MEM_ERROR:Ka}=Ir;function Qa(e){this.options=Ui.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Fi,this.strm.avail_out=0;let n=La.inflateInit2(this.strm,t.windowBits);if(n!==Za)throw new Error(Nr[n]);if(this.header=new Va,La.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Pi.string2buf(t.dictionary):"[object ArrayBuffer]"===Ba.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=La.inflateSetDictionary(this.strm,t.dictionary),n!==Za)))throw new Error(Nr[n])}function Xa(e,t){const n=new Qa(t);if(n.push(e),n.err)throw n.msg||Nr[n.err];return n.result}Qa.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?ja:Ha,"[object ArrayBuffer]"===Ba.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=La.inflate(n,o),a===Ga&&i&&(a=La.inflateSetDictionary(n,i),a===Za?a=La.inflate(n,o):a===Wa&&(a=Ga));n.avail_in>0&&a===qa&&n.state.wrap>0&&0!==e[n.next_in];)La.inflateReset(n),a=La.inflate(n,o);switch(a){case Ya:case Wa:case Ga:case Ka:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===qa))if("string"===this.options.to){let e=Pi.utf8border(n.output,n.next_out),t=n.next_out-e,i=Pi.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Za||0!==s){if(a===qa)return a=La.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Qa.prototype.onData=function(e){this.chunks.push(e)},Qa.prototype.onEnd=function(e){e===Za&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ui.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ja={Inflate:Qa,inflate:Xa,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Xa(e,t)},ungzip:Xa,constants:Ir};const{Deflate:eo,deflate:to,deflateRaw:no,gzip:ro}=Xi,{Inflate:io,inflate:ao,inflateRaw:oo,ungzip:so}=Ja;var lo={Deflate:eo,deflate:to,deflateRaw:no,gzip:ro,Inflate:io,inflate:ao,inflateRaw:oo,ungzip:so,constants:Ir};const co="pieces";async function uo(e){return lo.deflate(JSON.stringify(e),{level:9})}function ho(e){return JSON.parse(lo.inflate(e,{to:"string"}),{level:9})}function fo(){let e,t=0;for(let n in localStorage)localStorage.hasOwnProperty(n)&&(e=localStorage[n].length+n.length,t+=e);return(t/1024).toFixed(2)}const po={getAll:()=>{let e=JSON.parse(localStorage.getItem(co));return e||(e=[]),e},add:async(e,t,n,r=!1)=>{let i=po.getAll().filter((t=>t.name!=e));i.unshift(await async function(e,t,n,r=!1){return console.log(r),{name:e,settings:t,updated:Date.now(),data:r?n:await uo(n)}}(e,t,n,r));try{localStorage.setItem(co,JSON.stringify(i))}catch({error:a,message:o}){"QuotaExceededError"==a||"The quota has been exceeded."==o?(console.log("Quota exceeded, dropping: ",i.pop()),i.shift(),localStorage.setItem(co,JSON.stringify(i)),po.add(e,t,n,r)):console.error(a,o)}},export:async e=>po.getAll().filter((t=>t.name===e))[0],delete:e=>{let t=po.getAll().filter((t=>t.name!=e));localStorage.setItem(co,JSON.stringify(t))}};function mo(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}const go=6048e5,wo=864e5,bo=6e4,_o=36e5,yo=3600,vo=60,Eo=24*yo,xo=7*Eo,ko=365.2425*Eo,To=ko/12,So=3*To;let Ao={};function Co(){return Ao}function No(e,t){const n=Co(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=mo(e),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Io(e){const t=mo(e);return t.setHours(0,0,0,0),t}function Mo(e){const t=mo(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function zo(e,t){const n=Io(e),r=Io(t),i=+n-Mo(n),a=+r-Mo(r);return Math.round((i-a)/wo)}function Do(e,t){const n=mo(e),r=mo(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function Ro(e){const t=mo(e);return Math.trunc(t.getMonth()/3)+1}function Uo(e,t){const n=mo(e),r=mo(t);return 4*(n.getFullYear()-r.getFullYear())+(Ro(n)-Ro(r))}function Oo(e,t,n){const r=No(e,n),i=No(t,n),a=+r-Mo(r),o=+i-Mo(i);return Math.round((a-o)/go)}function $o(e,t){const n=mo(e),r=mo(t);return n.getFullYear()-r.getFullYear()}function Po(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function Fo(e,t){return+mo(e)-+mo(t)}function Lo(e,t,n){const r=Fo(e,t)/_o;return Po(n?.roundingMethod)(r)}function Vo(e,t,n){const r=Fo(e,t)/bo;return Po(n?.roundingMethod)(r)}function Bo(e,t,n){const r=Fo(e,t)/1e3;return Po(n?.roundingMethod)(r)}function Ho(e,t,n){let r,i=0;const a=mo(e),o=mo(t);if(n?.unit)r=n?.unit,"second"===r?i=Bo(a,o):"minute"===r?i=Vo(a,o):"hour"===r?i=Lo(a,o):"day"===r?i=zo(a,o):"week"===r?i=Oo(a,o):"month"===r?i=Do(a,o):"quarter"===r?i=Uo(a,o):"year"===r&&(i=$o(a,o));else{const e=Bo(a,o);Math.abs(e)<vo?(i=Bo(a,o),r="second"):Math.abs(e)<yo?(i=Vo(a,o),r="minute"):Math.abs(e)<Eo&&Math.abs(zo(a,o))<1?(i=Lo(a,o),r="hour"):Math.abs(e)<xo&&(i=zo(a,o))&&Math.abs(i)<7?r="day":Math.abs(e)<To?(i=Oo(a,o),r="week"):Math.abs(e)<So?(i=Do(a,o),r="month"):Math.abs(e)<ko&&Uo(a,o)<4?(i=Uo(a,o),r="quarter"):(i=$o(a,o),r="year")}return new Intl.RelativeTimeFormat(n?.locale,{localeMatcher:n?.localeMatcher,numeric:n?.numeric||"auto",style:n?.style}).format(i,r)}function jo(t){let n,i,a,o,d,p,w,b,y,E,k,T,S,A,C,N,I,M,z,D,R,U,O,$=t[0].name+"",P=t[0].name+"",F=Ho(t[0].updated,Date.now())+"",L=Math.round(11.2*Object.keys(t[0].data).length/1024)+"";return{c(){n=u("dialog"),i=u("form"),a=u("p"),o=h("Are you sure that you'd like to delete "),d=h($),p=h(" from your history?"),w=f(),b=u("div"),b.innerHTML='<button formmethod="dialog" class="p-1" value="cancel">Cancel</button> <button formmethod="dialog" class="p-1" value="export-and-delete">Export and Delete</button> <button formmethod="dialog" class="p-1" value="delete">Delete</button>',y=f(),E=u("button"),k=u("div"),T=h(P),S=f(),A=u("hr"),C=f(),N=u("div"),I=h(F),M=h(" - "),z=h(L),D=h(" kb"),_(a,"class","p-3 text-center"),_(b,"class","mx-2 mb-2 flex gap-2 w-full justify-center"),_(n,"class","rounded-lg overflow-hidden"),x(k,"white-space","nowrap"),x(k,"text-overflow","ellipsis"),x(k,"overflow","hidden"),x(A,"border-top","1px solid dimgrey",1),x(A,"width","100%"),_(A,"class","m-1"),_(N,"class","italic"),_(E,"title",R=t[0].name),_(E,"class","max-w-64 text-dimgrey justify-center align-middle text-nowrap text-ellipsis overflow-hidden"),x(E,"background","none",1),x(E,"border","1px solid dimgrey")},m(e,r){l(e,n,r),s(n,i),s(i,a),s(a,o),s(a,d),s(a,p),s(i,w),s(i,b),t[6](n),l(e,y,r),l(e,E,r),s(E,k),s(k,T),t[7](k),s(E,S),s(E,A),s(E,C),s(E,N),s(N,I),s(N,M),s(N,z),s(N,D),U||(O=[m(n,"close",t[5]),m(E,"click",t[3]),m(E,"contextmenu",g(t[4]))],U=!0)},p(e,[t]){1&t&&$!==($=e[0].name+"")&&v(d,$),1&t&&P!==(P=e[0].name+"")&&v(T,P),1&t&&F!==(F=Ho(e[0].updated,Date.now())+"")&&v(I,F),1&t&&L!==(L=Math.round(11.2*Object.keys(e[0].data).length/1024)+"")&&v(z,L),1&t&&R!==(R=e[0].name)&&_(E,"title",R)},i:e,o:e,d(e){e&&(c(n),c(y),c(E)),t[6](null),t[7](null),U=!1,r(O)}}}function Zo(e,t,n){let r,i,a=I(),{piece:o}=t;return e.$$set=e=>{"piece"in e&&n(0,o=e.piece)},[o,r,i,()=>{a("load",{project:o})},()=>{i.showModal()},()=>{"export-and-delete"==i.returnValue?(a("export"),po.delete(o.name),a("refresh")):"delete"==i.returnValue&&(po.delete(o.name),a("refresh"))},function(e){D[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},function(e){D[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class qo extends re{constructor(e){super(),ne(this,e,Zo,jo,a,{piece:0})}}function Go(e){let t;return{c(){t=h("Download Image")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function Yo(e){let t;return{c(){t=h("Please Wait...")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function Wo(e){let t;return{c(){t=h("Copy Image")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function Ko(e){let t;return{c(){t=h("Please Wait...")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function Qo(t){let n,i,a,o,d,h,p,g,w,b,y,v;function E(e,t){return e[0].capturingImage?Yo:Go}let x=E(t),k=x(t),T="undefined"!=typeof ClipboardItem&&function(e){let t,n,r,i;function a(e,t){return e[0].capturingImage?Ko:Wo}let o=a(e),s=o(e);return{c(){t=u("button"),s.c(),t.disabled=n=e[0].capturingImage},m(n,a){l(n,t,a),s.m(t,null),r||(i=m(t,"click",e[4]),r=!0)},p(e,r){o!==(o=a(e))&&(s.d(1),s=o(e),s&&(s.c(),s.m(t,null))),1&r&&n!==(n=e[0].capturingImage)&&(t.disabled=n)},d(e){e&&c(t),s.d(),r=!1,i()}}}(t);return{c(){n=u("div"),i=u("button"),i.textContent="Copy Text",a=f(),o=u("button"),k.c(),h=f(),T&&T.c(),p=f(),g=u("button"),g.textContent="Copy Transposes",w=f(),b=u("button"),b.textContent="Export",o.disabled=d=t[0].capturingImage,_(n,"class","flex flex-row gap-1")},m(e,r){l(e,n,r),s(n,i),s(n,a),s(n,o),k.m(o,null),s(n,h),T&&T.m(n,null),s(n,p),s(n,g),s(n,w),s(n,b),y||(v=[m(i,"click",t[2]),m(o,"click",t[3]),m(g,"click",t[5]),m(b,"click",t[6])],y=!0)},p(e,[t]){x!==(x=E(e))&&(k.d(1),k=x(e),k&&(k.c(),k.m(o,null))),1&t&&d!==(d=e[0].capturingImage)&&(o.disabled=d),"undefined"!=typeof ClipboardItem&&T.p(e,t)},i:e,o:e,d(e){e&&c(n),k.d(),T&&T.d(),y=!1,r(v)}}}function Xo(e,t,n){let{settings:r}=t,i=I();return e.$$set=e=>{"settings"in e&&n(0,r=e.settings)},[r,i,()=>i("copyText"),()=>i("captureSheetAsImage",{mode:"download"}),()=>i("captureSheetAsImage",{mode:"copy"}),()=>i("copyTransposes"),()=>i("export")]}class Jo extends re{constructor(e){super(),ne(this,e,Xo,Qo,a,{settings:0})}}Pn("/*\n! tailwindcss v3.4.3 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}.container {\n  width: 100%;\n}@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}.absolute {\n  position: absolute;\n}.relative {\n  position: relative;\n}.sticky {\n  position: sticky;\n}.top-0 {\n  top: 0px;\n}.z-40 {\n  z-index: 40;\n}.z-50 {\n  z-index: 50;\n}.row-auto {\n  grid-row: auto;\n}.m-1 {\n  margin: 0.25rem;\n}.mx-1 {\n  margin-left: 0.25rem;\n  margin-right: 0.25rem;\n}.mx-2 {\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n}.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}.mb-2 {\n  margin-bottom: 0.5rem;\n}.mt-3 {\n  margin-top: 0.75rem;\n}.box-border {\n  box-sizing: border-box;\n}.block {\n  display: block;\n}.flex {\n  display: flex;\n}.inline-flex {\n  display: inline-flex;\n}.hidden {\n  display: none;\n}.h-full {\n  height: 100%;\n}.w-16 {\n  width: 4rem;\n}.w-3\\/4 {\n  width: 75%;\n}.w-32 {\n  width: 8rem;\n}.w-\\[58em\\] {\n  width: 58em;\n}.w-full {\n  width: 100%;\n}.max-w-64 {\n  max-width: 16rem;\n}.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}.cursor-pointer {\n  cursor: pointer;\n}.flex-row {\n  flex-direction: row;\n}.flex-col {\n  flex-direction: column;\n}.flex-wrap {\n  flex-wrap: wrap;\n}.content-center {\n  align-content: center;\n}.items-start {\n  align-items: flex-start;\n}.items-center {\n  align-items: center;\n}.items-stretch {\n  align-items: stretch;\n}.justify-center {\n  justify-content: center;\n}.justify-around {\n  justify-content: space-around;\n}.gap-1 {\n  gap: 0.25rem;\n}.gap-12 {\n  gap: 3rem;\n}.gap-2 {\n  gap: 0.5rem;\n}.gap-4 {\n  gap: 1rem;\n}.gap-6 {\n  gap: 1.5rem;\n}.overflow-hidden {\n  overflow: hidden;\n}.overflow-clip {\n  overflow: clip;\n}.overflow-y-auto {\n  overflow-y: auto;\n}.text-ellipsis {\n  text-overflow: ellipsis;\n}.text-nowrap {\n  text-wrap: nowrap;\n}.rounded-lg {\n  border-radius: 0.5rem;\n}.rounded-xl {\n  border-radius: 0.75rem;\n}.border {\n  border-width: 1px;\n}.p-1 {\n  padding: 0.25rem;\n}.p-3 {\n  padding: 0.75rem;\n}.p-4 {\n  padding: 1rem;\n}.text-center {\n  text-align: center;\n}.align-middle {\n  vertical-align: middle;\n}.text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}.text-3xl {\n  font-size: 1.875rem;\n  line-height: 2.25rem;\n}.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}.lowercase {\n  text-transform: lowercase;\n}.italic {\n  font-style: italic;\n}.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity));\n}.underline {\n  text-decoration-line: underline;\n}.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}.transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}");const{document:es}=o;function ts(e,t,n){const r=e.slice();return r[76]=t[n],r[78]=n,r}function ns(e,t,n){const r=e.slice();return r[81]=t[n],r[82]=t,r[83]=n,r}function rs(e,t,n){const r=e.slice();return r[84]=t[n],r}function is(e){let t,n,r,i,a,o,p,m,g,w,b,y,E;function k(e,t){return 32768&t[0]&&(i=null),null==i&&(i=!(1!=e[15].length||!e[15][0].name.endsWith("(sample)"))),i?os:as}let T=k(e,[-1,-1,-1]),S=T(e),A=K(e[15]),C=[];for(let t=0;t<A.length;t+=1)C[t]=ss(rs(e,A,t));const N=e=>W(C[e],1,1,(()=>{C[e]=null}));return{c(){t=u("hr"),n=f(),r=u("div"),S.c(),a=f(),o=u("div");for(let e=0;e<C.length;e+=1)C[e].c();p=f(),m=u("div"),g=h("Used ~"),w=h(e[6]),b=h(" / 5000 kB\n            "),y=u("span"),y.textContent="ⓘ",_(t,"class","w-[58em]"),x(t,"border","1px solid #a0a0a0"),_(o,"class","w-3/4 flex flex-wrap justify-center gap-2 overflow-clip text-ellipsis"),_(r,"class","flex flex-col items-center gap-6"),_(y,"title","The last entry (or multiple) will automatically be dropped if an autosave fails.\nYou can also right-click a saved sheet to manually delete it.\nIndividual sizes are an estimation, the total is correct.")},m(e,i){l(e,t,i),l(e,n,i),l(e,r,i),S.m(r,null),s(r,a),s(r,o);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(o,null);l(e,p,i),l(e,m,i),s(m,g),s(m,w),s(m,b),s(m,y),E=!0},p(e,t){if(T!==(T=k(e,t))&&(S.d(1),S=T(e),S&&(S.c(),S.m(r,a))),134250593&t[0]){let n;for(A=K(e[15]),n=0;n<A.length;n+=1){const r=rs(e,A,n);C[n]?(C[n].p(r,t),Y(C[n],1)):(C[n]=ss(r),C[n].c(),Y(C[n],1),C[n].m(o,null))}for(q(),n=A.length;n<C.length;n+=1)N(n);G()}(!E||64&t[0])&&v(w,e[6])},i(e){if(!E){for(let e=0;e<A.length;e+=1)Y(C[e]);E=!0}},o(e){C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)W(C[e]);E=!1},d(e){e&&(c(t),c(n),c(r),c(p),c(m)),S.d(),d(C,e)}}}function as(e){let t;return{c(){t=u("p"),t.textContent="Or, continue one of your previous projects:",_(t,"class","text-white text-3xl")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function os(e){let t;return{c(){t=u("p"),t.textContent="Or, try this sample piece:",_(t,"class","text-white text-3xl")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function ss(e){let t,n;return t=new qo({props:{piece:e[84]}}),t.$on("load",e[45]),t.$on("refresh",e[46]),t.$on("export",(function(){return e[47](e[84])})),{c(){X(t.$$.fragment)},m(e,r){J(t,e,r),n=!0},p(n,r){e=n;const i={};32768&r[0]&&(i.piece=e[84]),t.$set(i)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function ls(e){let t,n,r,i,a,o,d,p,g;return{c(){t=u("p"),n=h("You are currently editing: "),r=h(e[7]),i=f(),a=u("button"),a.textContent="Import another MIDI/JSON file",o=f(),d=u("hr"),_(t,"class","mb-2"),_(a,"class","w-full"),_(d,"class","my-2 mx-1")},m(c,u){l(c,t,u),s(t,n),s(t,r),l(c,i,u),l(c,a,u),l(c,o,u),l(c,d,u),p||(g=m(a,"click",e[49]),p=!0)},p(e,t){128&t[0]&&v(r,e[7])},d(e){e&&(c(t),c(i),c(a),c(o),c(d)),p=!1,g()}}}function cs(t){let n,i,a,o,d,h,p,g,w,b,y,v,E,x,k,T,S;return{c(){n=u("div"),i=u("button"),i.textContent="Transpose selection down",a=f(),o=u("button"),o.textContent="Transpose selection up",d=f(),h=u("button"),h.textContent="Auto-transpose (single)",p=f(),g=u("button"),g.textContent="Auto-transpose (multi)",w=f(),b=u("div"),y=u("button"),y.textContent="Split selection",v=f(),E=u("button"),E.textContent="Join selection",x=f(),k=u("button"),k.textContent="Add a comment",_(i,"class","w-full block"),_(o,"class","w-full block"),_(n,"class","flex flex-row justify-around items-center gap-2"),_(y,"class","w-full block"),_(E,"class","w-full block"),_(b,"class","flex flex-row justify-around items-stretch gap-2")},m(e,r){l(e,n,r),s(n,i),s(n,a),s(n,o),l(e,d,r),l(e,h,r),l(e,p,r),l(e,g,r),l(e,w,r),l(e,b,r),s(b,y),s(b,v),s(b,E),l(e,x,r),l(e,k,r),T||(S=[m(i,"click",t[50]),m(o,"click",t[51]),m(h,"click",t[52]),m(g,"click",t[53]),m(y,"click",t[54]),m(E,"click",t[55]),m(k,"click",t[56])],T=!0)},p:e,d(e){e&&(c(n),c(d),c(h),c(p),c(g),c(w),c(b),c(x),c(k)),T=!1,r(S)}}}function ds(e){let t,n,r=K(e[10]),i=[];for(let t=0;t<r.length;t+=1)i[t]=us(ns(e,r,t));const a=e=>W(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=p()},m(e,r){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,r);l(e,t,r),n=!0},p(e,n){if(5120&n[0]){let o;for(r=K(e[10]),o=0;o<r.length;o+=1){const a=ns(e,r,o);i[o]?(i[o].p(a,n),Y(i[o],1)):(i[o]=us(a),i[o].c(),Y(i[o],1),i[o].m(t.parentNode,t))}for(q(),o=r.length;o<i.length;o+=1)a(o);G()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Y(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)W(i[e]);n=!1},d(e){e&&c(t),d(i,e)}}}function us(e){let t,n,r;function i(t){e[58](t,e[83])}let a={track:e[81],idx:e[83]+1};return void 0!==e[12][e[83]]&&(a.selected=e[12][e[83]]),t=new Un({props:a}),D.push((()=>Q(t,"selected",i))),{c(){X(t.$$.fragment)},m(e,n){J(t,e,n),r=!0},p(r,i){e=r;const a={};1024&i[0]&&(a.track=e[81]),!n&&4096&i[0]&&(n=!0,a.selected=e[12][e[83]],F((()=>n=!1))),t.$set(a)},i(e){r||(Y(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){ee(t,e)}}}function hs(e){let t,n,i,a,o,h,p,w,y;n=new Jo({props:{settings:e[3]}}),n.$on("captureSheetAsImage",e[61]),n.$on("copyText",e[62]),n.$on("copyTransposes",e[63]),n.$on("export",e[64]);let v=K(e[11]),E=[];for(let t=0;t<v.length;t+=1)E[t]=vs(ts(e,v,t));const k=e=>W(E[e],1,1,(()=>{E[e]=null}));return{c(){t=u("div"),X(n.$$.fragment),i=f(),a=u("div"),o=u("div");for(let e=0;e<E.length;e+=1)E[e].c();x(o,"width","max-content"),x(o,"font-family",e[3].font),P((()=>e[66].call(o))),x(a,"background","#2D2A32"),x(a,"user-select","none"),_(t,"class","flex flex-col items-start")},m(r,d){l(r,t,d),J(n,t,null),s(t,i),s(t,a),s(a,o);for(let e=0;e<E.length;e+=1)E[e]&&E[e].m(o,null);h=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=u("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=C();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=m(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{i=m(n.contentWindow,"resize",t),t()}),s(e,n),()=>{(r||i&&n.contentWindow)&&i(),c(n)}}(o,e[66].bind(o)),e[67](a),p=!0,w||(y=[m(o,"click",b(e[30])),m(o,"keypress",b(e[30])),m(t,"contextmenu",g(e[36]))],w=!0)},p(e,t){const r={};if(8&t[0]&&(r.settings=e[3]),n.$set(r),1050632&t[0]|2&t[1]){let n;for(v=K(e[11]),n=0;n<v.length;n+=1){const r=ts(e,v,n);E[n]?(E[n].p(r,t),Y(E[n],1)):(E[n]=vs(r),E[n].c(),Y(E[n],1),E[n].m(o,null))}for(q(),n=v.length;n<E.length;n+=1)k(n);G()}(!p||8&t[0])&&x(o,"font-family",e[3].font)},i(e){if(!p){Y(n.$$.fragment,e);for(let e=0;e<v.length;e+=1)Y(E[e]);p=!0}},o(e){W(n.$$.fragment,e),E=E.filter(Boolean);for(let e=0;e<E.length;e+=1)W(E[e]);p=!1},d(i){i&&c(t),ee(n),d(E,i),h(),e[67](null),w=!1,r(y)}}}function fs(e){let t,n;return t=new Vn({props:{chord:e[76],next:e[76].next??void 0,selected:e[76].selected,index:e[76].index,settings:e[3]}}),t.$on("select",e[32]),{c(){X(t.$$.fragment)},m(e,r){J(t,e,r),n=!0},p(e,n){const r={};2048&n[0]&&(r.chord=e[76]),2048&n[0]&&(r.next=e[76].next??void 0),2048&n[0]&&(r.selected=e[76].selected),2048&n[0]&&(r.index=e[76].index),8&n[0]&&(r.settings=e[3]),t.$set(r)},i(e){n||(Y(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function ps(t){let n;function r(e,t){return"break"===e[76].type?gs:"comment"===e[76].type?ms:void 0}let i=r(t),a=i&&i(t);return{c(){a&&a.c(),n=p()},m(e,t){a&&a.m(e,t),l(e,n,t)},p(e,t){i===(i=r(e))&&a?a.p(e,t):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(n.parentNode,n)))},i:e,o:e,d(e){e&&c(n),a&&a.d(e)}}}function ms(e){let t,n,r,i="comment"!=e[80]?.type&&1!=e[76].notop&&ws();function a(e,t){return"custom"==e[76].kind||"tempo"==e[76].kind?_s:bs}let o=a(e),s=o(e);return{c(){i&&i.c(),t=f(),s.c(),n=f(),r=u("br")},m(e,a){i&&i.m(e,a),l(e,t,a),s.m(e,a),l(e,n,a),l(e,r,a)},p(e,r){"comment"!=e[80]?.type&&1!=e[76].notop?i||(i=ws(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),o===(o=a(e))&&s?s.p(e,r):(s.d(1),s=o(e),s&&(s.c(),s.m(n.parentNode,n)))},d(e){e&&(c(t),c(n),c(r)),i&&i.d(e),s.d(e)}}}function gs(e){let t,n="comment"!=e[79]?.type&&ys();return{c(){n&&n.c(),t=p()},m(e,r){n&&n.m(e,r),l(e,t,r)},p(e,r){"comment"!=e[79]?.type?n||(n=ys(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){e&&c(t),n&&n.d(e)}}}function ws(e){let t;return{c(){t=u("br")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function bs(e){let t,n,r,i,a=e[76].text+"";return{c(){t=u("span"),n=h(a),_(t,"class","comment")},m(a,o){l(a,t,o),s(t,n),r||(i=m(t,"contextmenu",g(e[40])),r=!0)},p(e,t){2048&t[0]&&a!==(a=e[76].text+"")&&v(n,a)},d(e){e&&c(t),r=!1,i()}}}function _s(e){let t,n,i,a,o=e[76].text+"";function d(...t){return e[65](e[78],...t)}return{c(){t=u("span"),n=h(o),_(t,"class","comment"),_(t,"contenteditable","true"),x(t,"white-space","pre-wrap")},m(r,o){l(r,t,o),s(t,n),i||(a=[m(t,"click",w(e[37])),m(t,"keypress",w(e[38])),m(t,"contextmenu",g(e[39])),m(t,"focusout",d)],i=!0)},p(t,r){e=t,2048&r[0]&&o!==(o=e[76].text+"")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(n,o)},d(e){e&&c(t),i=!1,r(a)}}}function ys(e){let t;return{c(){t=u("br")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function vs(e){let t,n,r,i;const a=[ps,fs],o=[];function s(e,t){return e[76].type?0:1}function d(e,t){return 0===t?function(e){const t=e.slice(),n=t[11][+t[78]+1];t[79]=n;const r=t[11][+t[78]-1];return t[80]=r,t}(e):e}return t=s(e),n=o[t]=a[t](d(e,t)),{c(){n.c(),r=p()},m(e,n){o[t].m(e,n),l(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?o[t].p(d(e,t),i):(q(),W(o[l],1,1,(()=>{o[l]=null})),G(),n=o[t],n?n.p(d(e,t),i):(n=o[t]=a[t](d(e,t)),n.c()),Y(n,1),n.m(r.parentNode,r))},i(e){i||(Y(n),i=!0)},o(e){W(n),i=!1},d(e){e&&c(r),o[t].d(e)}}}function Es(e){let t,n,i,a,o,d,h,p,w,y,v,E,k,T,S,A,C,N,I,M,z,R,U,O,$,P,L,V,B,H,j,Z,K,te=e[15].length>0&&is(e),ne=e[9]&&ls(e),re=e[16]&&cs(e);function ie(t){e[57](t)}let ae={show:e[9],hasMIDI:!!e[2]};void 0!==e[3]&&(ae.settings=e[3]),z=new zn({props:ae}),D.push((()=>Q(z,"settings",ie)));let oe=e[10]&&ds(e),se=1==e[9]&&hs(e);return{c(){t=f(),n=u("dialog"),n.innerHTML='<form class="flex flex-col row-auto items-center"><p class="p-3 text-center">Careful, you&#39;ve previously edited this sheet!\n            <br/>\n            Loading it again will overwrite your progress.</p> <div class="mx-2 mb-2 flex gap-2 w-full justify-center"><button formmethod="dialog" class="p-1" value="load">Load saved</button> <button formmethod="dialog" class="p-1" value="export-and-restart">Export and Start over</button> <button formmethod="dialog" class="p-1" value="new">Start over</button></div></form>',i=f(),a=u("div"),o=u("div"),d=u("p"),d.textContent="Import a MIDI/JSON file to get started:",h=f(),p=u("label"),p.textContent="Click or drop a MIDI/JSON file here!",w=f(),y=u("input"),v=f(),te&&te.c(),E=f(),k=u("div"),T=u("div"),S=u("div"),ne&&ne.c(),A=f(),C=u("div"),N=u("button"),N.textContent="Select all",I=f(),re&&re.c(),M=f(),X(z.$$.fragment),U=f(),O=u("div"),O.innerHTML=`Click on a note to set selection beginning/ending<br/>\n            Double-click on a note to select the whole line\n            <hr class="my-2 mx-1"/>\n            Timing:<br/> <span style="color: ${On.whole}">Whole note</span><br/> <span style="color: ${On.half}">Half note</span><br/> <span style="color: ${On.quarter}">Quarter note</span><br/> <span style="color: ${On.eighth}">Eighth note</span><br/> <span style="color: ${On.sixteenth}">Sixteenth note</span><br/> <span style="color: ${On.thirtysecond}">Thirty-second note</span><br/><br/> <span style="color: ${On.quadruple}">Longer than whole</span><br/> <span style="color: ${On.sixtyfourth}">Shorter than thirty-second</span><br/>`,$=f(),P=u("section"),L=u("div"),oe&&oe.c(),V=f(),B=u("button"),B.textContent="Import selected tracks",H=f(),se&&se.c(),es.title="MIDI Converter",_(n,"class","rounded-lg overflow-hidden"),_(d,"class","text-white text-3xl"),_(p,"for","drop"),_(p,"class","cursor-pointer rounded-xl text-xl p-4"),x(p,"border","2px solid dimgrey"),_(y,"id","drop"),_(y,"class","hidden"),_(y,"type","file"),_(y,"accept",".mid,.midi,.json"),_(o,"class","flex flex-col items-center gap-6"),_(a,"class","flex flex-col gap-12 w-full h-full items-center align-center justify-center content-center absolute top-0 z-50"),x(a,"height","100%"),x(a,"background","rgb(45,42,50)"),x(a,"background","linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%)"),x(a,"transition","all 0.6s ease-in-out"),_(C,"class","flex flex-col gap-2"),_(O,"id","guide"),_(T,"id","sidebar"),_(T,"class","m-1 flex flex-col sticky overflow-y-auto top-0"),x(T,"min-width","25em"),x(T,"max-width","25em"),x(T,"max-height","99vh"),_(L,"id","tracks"),_(L,"class","flex flex-col gap-2"),_(P,"id","track-chooser"),_(P,"class","z-40 w-full absolute flex flex-col gap-4 justify-center items-center content-center text-2xl"),x(P,"top","-110vh"),x(P,"height","100vh"),x(P,"background","rgb(45,42,50)"),x(P,"background","linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%)"),x(P,"transition","all 0.6s ease-in-out"),_(k,"class","flex flex-row")},m(r,c){l(r,t,c),l(r,n,c),e[42](n),l(r,i,c),l(r,a,c),s(a,o),s(o,d),s(o,h),s(o,p),s(o,w),s(o,y),e[44](y),s(a,v),te&&te.m(a,null),e[48](a),l(r,E,c),l(r,k,c),s(k,T),s(T,S),ne&&ne.m(S,null),s(S,A),s(S,C),s(C,N),s(C,I),re&&re.m(C,null),s(S,M),J(z,S,null),s(T,U),s(T,O),s(k,$),s(k,P),s(P,L),oe&&oe.m(L,null),s(P,V),s(P,B),e[60](P),s(k,H),se&&se.m(k,null),j=!0,Z||(K=[m(n,"close",e[43]),m(p,"drop",g(e[28])),m(p,"dragover",g(e[41])),m(y,"change",e[17]),m(N,"click",e[31]),m(B,"click",e[59]),m(k,"click",b(e[30])),m(k,"keypress",b(e[30]))],Z=!0)},p(e,t){e[15].length>0?te?(te.p(e,t),32768&t[0]&&Y(te,1)):(te=is(e),te.c(),Y(te,1),te.m(a,null)):te&&(q(),W(te,1,1,(()=>{te=null})),G()),e[9]?ne?ne.p(e,t):(ne=ls(e),ne.c(),ne.m(S,A)):ne&&(ne.d(1),ne=null),e[16]?re?re.p(e,t):(re=cs(e),re.c(),re.m(C,null)):re&&(re.d(1),re=null);const n={};512&t[0]&&(n.show=e[9]),4&t[0]&&(n.hasMIDI=!!e[2]),!R&&8&t[0]&&(R=!0,n.settings=e[3],F((()=>R=!1))),z.$set(n),e[10]?oe?(oe.p(e,t),1024&t[0]&&Y(oe,1)):(oe=ds(e),oe.c(),Y(oe,1),oe.m(L,null)):oe&&(q(),W(oe,1,1,(()=>{oe=null})),G()),1==e[9]?se?(se.p(e,t),512&t[0]&&Y(se,1)):(se=hs(e),se.c(),Y(se,1),se.m(k,null)):se&&(q(),W(se,1,1,(()=>{se=null})),G())},i(e){j||(Y(te),Y(z.$$.fragment,e),Y(oe),Y(se),j=!0)},o(e){W(te),W(z.$$.fragment,e),W(oe),W(se),j=!1},d(o){o&&(c(t),c(n),c(i),c(a),c(E),c(k)),e[42](null),e[44](null),te&&te.d(),e[48](null),ne&&ne.d(),re&&re.d(),ee(z),oe&&oe.d(),e[60](null),se&&se.d(),Z=!1,r(K)}}}function xs(e,t,n=0){let r=n;for(;e[r]&&t(e[r]);)r++;return e[r]}function ks(e,t,n){let r={element:void 0,hide:()=>{n(5,r.element.style.top="-110vh",r),L(),A()},show:()=>{n(5,r.element.style.top="0px",r)}},i=fo();let a,o,s,l,c,d,u,h,f={element:void 0,name:void 0,data:void 0,set:(e,t=!1)=>{n(2,s=t?s:void 0),n(0,f.name=a??e.name,f),n(0,f.data=ho(e.data),f)},setAndProceed:(e,t=!1)=>{n(2,s=t?s:void 0),n(0,f.name=a??e.name,f),n(0,f.data=ho(e.data),f),f.proceed("load")},proceed:(e="prompt")=>{let t=f.element?.returnValue;if("prompt"!==e&&(t=e),t){if("load"==t||"existing"==t){console.log("Loading",f.name),n(9,g=!0),n(11,c=f.data),!c.find((e=>cn(e)))?.notes&&(confirm("Looks like this project is from an older version, and unfortunately can't be opened anymore.\nYou can right-click it on the main screen to export or delete it from your list.\n\nIf you must view/edit it again, you can open it in an older version (reach me at @arijanj on Discord for help with this)"),window.location.reload());for(let e=0;e<c.length;e++){let t=c[e];if(cn(t)){let r=[];for(let e of t.notes){let t=new un(e.value,e.playTime,e.tempo,e.BPM,e.delta);t.original=e.original,r.push(t)}let i=new hn(r,t.classicChordOrder,t.sequentialQuantize);i.index=t.index,i.next=t.next,n(11,c[e]=i,c)}}console.log(c),E()}else"export-and-restart"==t?po.export(f.name).then((e=>{R(e),b()})):"new"==t&&b();r.hide()}}},p=e=>{if(e)return e.split(".").slice(0,-1).join(".")},m={element:void 0,hide:()=>{n(8,m.element.style.top="-110vh",m)},show:()=>{n(8,m.element.style.top="0px",m)}},g=!1;async function w(){n(7,a=p(o.files[0].name));let e=O.find((e=>e.name==a))??!1;e?(n(0,f.name=a,f),n(0,f.data=ho(e.data),f),f.element.showModal()):(b(),r.hide())}async function b(e=undefined){e&&n(1,o.files=e.files,o);if("json"===o.files[0].type.split("/")[1]){let e=await o.files[0].text();return f.set(JSON.parse(e)),n(9,g=!0),n(11,c=f.data),void E()}await o.files[0].arrayBuffer().then((e=>{n(2,s=new sn(e)),function(e){return e.header.getTimeDivision()===sn.Header.TICKS_PER_BEAT?{ticksPerBeat:e.header.getTicksPerBeat()}:{SMPTEFrames:e.header.getSMPTEFrames(),ticksPerFrame:e.header.getTicksPerFrame()}}(s).ticksPerBeat||console.error("No ticksPerBeat in this midi file"),n(10,l=s.tracks),n(12,d=l.map((()=>!0))),n(9,g=!1),m.show()}))}let _,y,v=()=>{if(!s)return void console.log("no midiobject");let e=function(e,t){let n=[];return e.getEvents().forEach((e=>{e.subtype==Xt.EVENT_META_SET_TEMPO&&n.push(e),e.subtype==Xt.EVENT_MIDI_NOTE_ON&&(e.track||!0!==t[0]?!0===t[e.track]&&n.push(e):n.push(e))})),n}(s,d);n(11,c=fn(e,y,c));let t=c.filter((e=>cn(e)));t.forEach(((e,n)=>{e.next={notes:[{playTime:t[n+1]?.notes[0]?.playTime}]}})),E(),A(),n(9,g=!0)};try{y=JSON.parse(localStorage.getItem("preferences")),y.beats=4}catch(e){y=void 0}let E=()=>{n(11,c)},x=e=>{let t=_n(c,e);c.splice(t,0,{type:"comment",kind:"custom",text:"Add a comment..."}),V()},k=(e,t)=>{""==t?c.splice(e,1):n(11,c[e].text=t,c),V(),$()},T=(e,t,n,r=undefined)=>{let i=r?.relative??!1;for(let r=e;r<=c.length;r++){let e=c[_n(c,r)];if(!dn(e)){if(e.index>t)break;C(r,n,{relative:i,skipUpdate:!0})}}!0!==r?.skipSave&&(V(),$())},S=(e,t,n=undefined)=>{let r=n?.stickTo??0,i=n?.skipSave??!1,a=[];for(let n=e;n<=t;n++){let e=c[_n(c,n)];a.push(e)}"same"==r&&(r=a[0].notes[0].transposition());let o=bn(a,11,r,y.resilience??4);return T(e,t,o,{relative:!1,skipSave:!0}),A(),i||$(),o},A=()=>{if(!c)return;n(11,c=c.filter((e=>"transpose"!=e.kind)));let e=xs(c,dn,0).notes[0].transposition();c.splice(0,0,{type:"comment",kind:"transpose",text:"Transpose by: "+-e,notop:!0});let t=e;for(let e=0;e<c.length;e++){let n=c[e];if(dn(n))continue;let r=n.notes[0].transposition(),i=r-t;if(0!=i){let n=`Transpose by: ${-r>0?"+":""}${-r}`;n+=` (${-i>0?"+":""}${-i})`;let a=e-1;for(;"comment"==c[a]?.type;)a--;c.splice(a+1,0,{type:"comment",kind:"transpose",text:n}),t=r}}E()},C=(e,t,n)=>{let r=n.relative??!1,i=n.skipUpdate??!1,a=c[_n(c,e)];dn(a)||(a.transpose(t,r,!0),i||E())},N=(e,t)=>{let n=[];for(let r=_n(c,e);r<c.length;r++){let i=c[r]??void 0;if(i.index>=t){n.push({left:e,right:i.index});break}if("break"==i.type){let t=xs(c,dn,r);n.push({left:e,right:t.index}),e=t.index}}let r=c[_n(c,n[0].left)],i=r.notes[0]?.transposition()??0;for(let e of n){i=S(e.left,e.right,{stickTo:i,skipSave:!0})}A(),$()},I=()=>c.filter((e=>"transpose"==e.kind)).map((e=>-parseInt(e.text.match(/\d+/)))).join(" ");function z(e){n(3,y.capturingImage=!0,y),n(13,u.firstChild.style.width=`${h+1}px`,u),setTimeout((()=>function(e,t){return me(this,null,(function*(){const n=yield gt(e,t),{log:r,type:i,quality:a,dpi:o}=n,s=yield qt(n);r.time("canvas to blob");const l=yield ot(s,i,a);if(["image/png","image/jpeg"].includes(i)&&o){const e=yield ct(l.slice(0,33));let t=new Uint8Array(e);return"image/png"===i?t=Ee(t,o):"image/jpeg"===i&&(t=function(e,t){return e[13]=1,e[14]=t>>8,e[15]=255&t,e[16]=t>>8,e[17]=255&t,e}(t,o)),r.timeEnd("canvas to blob"),new Blob([t,l.slice(33)],{type:i})}return r.timeEnd("canvas to blob"),l}))}(u,{width:h,scale:2}).then((t=>{"copy"===e?function(e){try{navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(e){console.error(e)}}(t):function(e){U(e,"png")}(t),n(3,y.capturingImage=!1,y),n(13,u.firstChild.style.width="max-content",u)}))),250)}function R(e){n(7,a=e.name),U(new Blob([JSON.stringify(e)],{type:"text/json"}),"json")}function U(e,t){const n=URL.createObjectURL(e);let r=`${a}.${t}`,i=document.createElement("a");i.href=n,i.download=r,document.body.appendChild(i),i.click(),URL.revokeObjectURL(n),document.body.removeChild(i)}let O=po.getAll();function $(){n(6,i=fo())}0!=O.length||localStorage.getItem("hadSample")||(localStorage.setItem("hadSample",!0),fetch("https://gist.githubusercontent.com/ArijanJ/80f86cbe9dcf8384dbdf9578c83102a6/raw/4ec84c63f655866e6d0d4e1c75949a22537c417e/Mariage_dAmour_(sample).json").then((e=>e.json())).then((e=>{po.add(e.name,e.settings,e.data,!0),setTimeout((()=>{n(15,O=po.getAll(n(6,i=fo())))}),0)})));let P=!1,F={left:void 0,right:void 0};function L(){if(g&&(F.left||F.right)){for(let e=F.left;e<c.length;e++){const t=c[e];if(!dn(t)){if(t.index>F.right)break;t.selected=void 0}}n(4,F.left=void 0,F),n(4,F.right=void 0,F),E()}}function V(e){if(c){for(let e=F.left;e<c.length;e++){let t=c[_n(c,e)];if(!dn(t)&&(t.selected=void 0,e>t.index))break}for(let e=F.left;e<=F.right;e++){let t=c[_n(c,e)];if(t){if(t.index>F.right)break;t.selected=!0}}E()}}function B(e){let t=_n(c,e);c.splice(t,0,{type:"break"}),E()}function H(e,t){for(let n=_n(c,e);n<c.length&&("break"==c[n]?.type&&(c.splice(n,1),n--),!(n>_n(c,t)));n++);E()}return e.$$.update=()=>{if(3&e.$$.dirty[0]&&o&&n(7,a=p(o.files[0]?.name)??f.name),12&e.$$.dirty[0]|16&e.$$.dirty[1]){_?(["beats","classicChordOrder","quantize","sequentialQuantize","minSpeedChange","bpmChanges","bpm"].some((e=>y[e]!=_[e]))&&v(),n(35,_={...y}),s&&localStorage.setItem("preferences",JSON.stringify(y)),V()):n(35,_={...y})}16&e.$$.dirty[0]&&n(16,P=null!=F.left&&null!=F.right)},[f,o,s,y,F,r,i,a,m,g,l,c,d,u,h,O,P,w,v,x,k,T,S,A,N,I,z,R,function(e){e.preventDefault();let t=e?.dataTransfer?.items?.[0];t&&t.getAsFile?(n(1,o.files=e.dataTransfer.files,o),w()):console.error("bad file dropped")},$,L,function(){n(4,F.left=0,F),n(4,F.right=c.length-1,F),V()},function(e){let t=e.detail?.index??e;if(F.left===t&&F.right===t){let e=_n(c,t);for(;cn(c[e]);)e--;e++;let r=e;for(;cn(c[r]);)r++;r--,n(4,F.left=c[e].index,F),n(4,F.right=c[r].index,F)}else t<F.left||void 0===F.left?(n(4,F.right=F.left??t,F),n(4,F.left=t,F)):n(4,F.right=t,F);V()},B,H,_,function(t){M.call(this,e,t)},function(t){M.call(this,e,t)},function(t){M.call(this,e,t)},function(t){M.call(this,e,t)},function(t){M.call(this,e,t)},function(t){M.call(this,e,t)},function(e){D[e?"unshift":"push"]((()=>{f.element=e,n(0,f)}))},()=>{f.proceed()},function(e){D[e?"unshift":"push"]((()=>{o=e,n(1,o)}))},e=>{f.setAndProceed(e.detail.project),r.hide()},()=>{n(15,O=po.getAll()),n(6,i=fo())},e=>R(e),function(e){D[e?"unshift":"push"]((()=>{r.element=e,n(5,r)}))},()=>{r.show(),setTimeout((()=>{n(9,g=!1),n(7,a=null),document.getElementById("drop").value=""}),600)},()=>{T(F.left,F.right,1,{relative:!0}),A()},()=>{T(F.left,F.right,-1,{relative:!0}),A()},()=>{S(F.left,F.right)},()=>{N(F.left,F.right)},()=>{B(F.left)},()=>{H(F.left,F.right)},()=>{x(F.left)},function(e){y=e,n(3,y)},function(t,r){e.$$.not_equal(d[r],t)&&(d[r]=t,n(12,d))},()=>{v(),m.hide()},function(e){D[e?"unshift":"push"]((()=>{m.element=e,n(8,m)}))},e=>{z(e.detail.mode)},()=>{n(3,y.tempoMarks=!0,y),setTimeout((()=>{navigator.clipboard.writeText(u.firstChild.innerText)}),0)},()=>{navigator.clipboard.writeText(I())},()=>{$(),setTimeout((()=>{if(void 0===f?.data){let e=po.getAll().filter((e=>e.name===a))[0];f.setAndProceed(e,!0)}po.export(f.name).then((e=>R(e)))}),0)},(e,t)=>{k(e,t.target.innerText)},function(){h=this.clientWidth,n(14,h)},function(e){D[e?"unshift":"push"]((()=>{u=e,n(13,u)}))}]}return new class extends re{constructor(e){super(),ne(this,e,ks,Es,a,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
